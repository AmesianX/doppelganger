var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,i,r,o,s,a,c,u,l,h,p=t&&t.split("/"),f=g.map,d=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),u=0;u<e.length;u+=1)if(h=e[u],"."===h)e.splice(u,1),u-=1;else if(".."===h){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||d)&&f){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),p)for(l=p.length;l>0;l-=1)if(r=f[p.slice(0,l).join("/")],r&&(r=r[i])){o=r,s=u;break}if(o)break;!a&&d&&d[i]&&(a=d[i],c=u)}!o&&a&&(o=a,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function i(t,n){return function(){return l.apply(e,y.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function o(e){return function(t){f[e]=t}}function s(n){if(t(d,n)){var i=d[n];delete d[n],m[n]=!0,u.apply(e,i)}if(!t(f,n)&&!t(m,n))throw new Error("No "+n);return f[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var u,l,h,p,f={},d={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(e,t){var i,o=a(e),c=o[0];return e=o[1],c&&(c=n(c,t),i=s(c)),c?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),o=a(e),c=o[0],e=o[1],c&&(i=s(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:i}},p={require:function(e){return i(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:c(e)}}},u=function(n,r,a,c){var u,l,g,v,y,b,w=[];if(c=c||n,"function"==typeof a){for(r=!r.length&&a.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],c),l=v.f,"require"===l)w[y]=p.require(n);else if("exports"===l)w[y]=p.exports(n),b=!0;else if("module"===l)u=w[y]=p.module(n);else if(t(f,l)||t(d,l)||t(m,l))w[y]=s(l);else{if(!v.p)throw new Error(n+" missing "+l);v.p.load(v.n,i(c,!0),o(l),{}),w[y]=f[l]}g=a.apply(f[n],w),n&&(u&&u.exports!==e&&u.exports!==f[n]?f[n]=u.exports:g===e&&b||(f[n]=g))}else n&&(f[n]=a)},requirejs=require=l=function(t,n,i,r,o){return"string"==typeof t?p[t]?p[t](n):s(h(t,n).f):(t.splice||(g=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=r,r=o),r?u(e,t,n,i):setTimeout(function(){u(e,t,n,i)},4),l)},l.config=function(e){return g=e,g.deps&&l(g.deps,g.callback),l},requirejs._defined=f,define=function(e,n,i){n.splice||(i=n,n=[]),t(f,e)||t(d,e)||(d[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("vendor/almond",function(){}),function(){var e={};e.Point=function(e,t){this.X=e,this.Y=t},e.Rectangle=function(e,t,n,i){this.X=e,this.Y=t,this.Width=n,this.Height=i},e.Line=function(e,t,n,i){this.X1=e,this.Y1=t,this.X2=n,this.Y2=i},e.Hexagon=function(t,n,i){this.Points=[];var r=null,o=null;e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?(r=(e.Hexagon.Static.WIDTH-e.Hexagon.Static.SIDE)/2,o=e.Hexagon.Static.HEIGHT/2,this.Points.push(new e.Point(r+n,i)),this.Points.push(new e.Point(r+e.Hexagon.Static.SIDE+n,i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new e.Point(r+e.Hexagon.Static.SIDE+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(r+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(n,o+i))):(r=e.Hexagon.Static.WIDTH/2,o=(e.Hexagon.Static.HEIGHT-e.Hexagon.Static.SIDE)/2,this.Points.push(new e.Point(r+n,i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new e.Point(e.Hexagon.Static.WIDTH+n,o+e.Hexagon.Static.SIDE+i)),this.Points.push(new e.Point(r+n,e.Hexagon.Static.HEIGHT+i)),this.Points.push(new e.Point(n,o+e.Hexagon.Static.SIDE+i)),this.Points.push(new e.Point(n,o+i))),this.Id=t,this.x=n,this.y=i,this.x1=r,this.y1=o,this.TopLeftPoint=new e.Point(this.x,this.y),this.BottomRightPoint=new e.Point(this.x+e.Hexagon.Static.WIDTH,this.y+e.Hexagon.Static.HEIGHT),this.MidPoint=new e.Point(this.x+e.Hexagon.Static.WIDTH/2,this.y+e.Hexagon.Static.HEIGHT/2),this.P1=new e.Point(n+r,i+o),this.selected=!1},e.Hexagon.prototype.draw=function(e,t,n){e.beginPath(),e.moveTo(this.Points[0].X,this.Points[0].Y);for(var i=1;i<this.Points.length;i++){var r=this.Points[i];e.lineTo(r.X,r.Y)}e.closePath(),e.lineWidth=2,e.strokeStyle=t||"#0c2731",(this.selected||n)&&(e.fillStyle=n||"rgba(0, 0, 0, 0.15)",e.fill()),t!==!1&&e.stroke()},e.Hexagon.prototype.isInBounds=function(t,n){return this.Contains(new e.Point(t,n))},e.Hexagon.prototype.isInHexBounds=function(e){return this.TopLeftPoint.X<e.X&&this.TopLeftPoint.Y<e.Y&&e.X<this.BottomRightPoint.X&&e.Y<this.BottomRightPoint.Y?!0:!1},e.Hexagon.prototype.Contains=function(e){var t=!1;if(this.isInHexBounds(e)){var n,i=0;for(n=0,i=this.Points.length-1;n<this.Points.length;i=n++){var r=this.Points[n],o=this.Points[i];(r.Y<=e.Y&&e.Y<o.Y||o.Y<=e.Y&&e.Y<r.Y)&&e.X<(o.X-r.X)*(e.Y-r.Y)/(o.Y-r.Y)+r.X&&(t=!t)}}return t},e.Hexagon.prototype.isOnScreen=function(e,t){var n=this.MidPoint,i=n.X+(e||0),r=n.Y+(t||0);return 0>i||i>window.innerWidth?!1:0>r||r>window.innerHeight?!1:!0},e.Hexagon.Orientation={Normal:0,Rotated:1},e.Hexagon.Static={HEIGHT:173.20508075688775,WIDTH:200,SIDE:100,ORIENTATION:e.Hexagon.Orientation.Normal,DRAWSTATS:!1},window.HT=e}(),define("vendor/hex/tools",function(){}),function(e){window.findHexWithSideLengthZAndRatio=function(t,n){t=t||50,n=n||1.1547;var i=Math.pow(n,2),r=(1+i)/i,o=t/i,s=(1-4*i)/(4*i)*Math.pow(t,2),a=(-o+Math.sqrt(Math.pow(o,2)-4*r*s))/(2*r),c=(2*a+t)/(2*n),u=2*a+t,l=2*c;e.Hexagon.Static.WIDTH=u,e.Hexagon.Static.HEIGHT=l,e.Hexagon.Static.SIDE=t},window.findHexWithWidthAndHeight=function(t,n){t=t||100,n=n||86.60254037844388;var i=-3,r=-2*t,o=Math.pow(t,2)+Math.pow(n,2),s=(-r-Math.sqrt(Math.pow(r,2)-4*i*o))/(2*i);e.Hexagon.Static.WIDTH=t,e.Hexagon.Static.HEIGHT=n,e.Hexagon.Static.SIDE=s}}(window.HT),define("vendor/hex/calculations",function(){}),function(e){e.Grid=function(t,n){this.Hexes=[],this.width=t,this.height=n;for(var i={},r=0,o=0;o+e.Hexagon.Static.HEIGHT<=n;){var s=0,a=0;1===r%2&&(a=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?(e.Hexagon.Static.WIDTH-e.Hexagon.Static.SIDE)/2+e.Hexagon.Static.SIDE:e.Hexagon.Static.WIDTH/2,s=1);for(var c=a;c+e.Hexagon.Static.WIDTH<=t;){var u=this.GetHexId(r,s),l=new e.Hexagon(u,c,o),h=s;e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?l.PathCoOrdX=s:(l.PathCoOrdY=r,h=r),this.Hexes.push(l),i[h]||(i[h]=[]),i[h].push(l),s+=2,c+=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?e.Hexagon.Static.WIDTH+e.Hexagon.Static.SIDE:e.Hexagon.Static.WIDTH}r++,o+=e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?e.Hexagon.Static.HEIGHT/2:(e.Hexagon.Static.HEIGHT-e.Hexagon.Static.SIDE)/2+e.Hexagon.Static.SIDE}for(var p in i){var f=i[p],d=Math.floor(p/2)+p%2;for(var g in f){var m=f[g];e.Hexagon.Static.ORIENTATION===e.Hexagon.Orientation.Normal?m.PathCoOrdY=d++:m.PathCoOrdX=d++}}},e.Grid.Static={Letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},e.Grid.prototype.GetHexId=function(t,n){for(var i=t,r="";i>25;)r=e.Grid.Static.Letters[i%26]+r,i-=26;return e.Grid.Static.Letters[i]+r+(n+1)},e.Grid.prototype.GetHexAt=function(e){for(var t in this.Hexes)if(this.Hexes[t].Contains(e))return this.Hexes[t];return null},e.Grid.prototype.getHexAtCenter=function(t,n){var i=new e.Point(t/2,n/2);for(var r in this.Hexes)if(this.Hexes[r].Contains(i))return this.Hexes[r];return null},e.Grid.prototype.getNearestHexFromAngle=function(t,n){n*=Math.PI/180;var i=e.Hexagon.Static.HEIGHT,r=e.Hexagon.Static.WIDTH,o=t.MidPoint,s=o.X+Math.sin(n)*r,a=o.Y+Math.cos(n)*i;return this.GetHexAt(new e.Point(s,a))},e.Grid.prototype.nearestHexFromCenter=function(e,t,n){var i,r=this.getHexAtCenter(e,t);return n!==!1&&(i=this.getNearestHexFromAngle(r,n)),i||r},e.Grid.prototype.GetHexDistance=function(e,t){var n=e.PathCoOrdX-t.PathCoOrdX,i=e.PathCoOrdY-t.PathCoOrdY;return(Math.abs(n)+Math.abs(i)+Math.abs(n-i))/2},e.Grid.prototype.GetHexById=function(e){for(var t in this.Hexes)if(this.Hexes[t].Id===e)return this.Hexes[t];return null},e.Grid.prototype.GetHexByCartesian=function(e,t){for(var n in this.Hexes)if(this.Hexes[n].PathCoOrdX===e&&this.Hexes[n].PathCoOrdY===t)return this.Hexes[n];return null},e.Grid.prototype.Cache=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.width,e.height=this.height;for(var n in this.Hexes)this.Hexes[n].draw(t);return this.selected&&this.selected.draw(t),this.cache=e,e},e.Grid.prototype.select=function(e){for(var t in this.Hexes)this.Hexes[t].selected=!1;e.selected=!0,this.selected=e},e.Grid.prototype.each=function(e,t){var n=0,i=this.Hexes.length;for(i;i>n;n++)e.call(t||this,this.Hexes[n]);return this},e.Grid.prototype.eachOnScreen=function(e,t,n,i){var r=0,o=this.Hexes.length;for(o;o>r;r++)this.Hexes[r].isOnScreen(e,t)&&n.call(i||this,this.Hexes[r])}}(window.HT),define("hex",["vendor/hex/tools","vendor/hex/calculations"],function(){}),function(){function e(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}function t(t,n){var i=typeof n;if(t=t.cache,"boolean"==i||null==n)return t[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var r="number"==i?n:w+n;return t=(t=t[i])&&t[r],"object"==i?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:w+e,r=t[n]||(t[n]={});"object"==n?(r[i]||(r[i]=[])).push(e):r[i]=!0}}function i(e){return e.charCodeAt(0)}function r(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||"undefined"==typeof n)return 1;if(i>n||"undefined"==typeof i)return-1}return e.index-t.index}function o(e){var t=-1,i=e.length,r=e[0],o=e[0|i/2],s=e[i-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&s&&"object"==typeof s)return!1;var a=c();a["false"]=a["null"]=a["true"]=a.undefined=!1;var u=c();for(u.array=e,u.cache=a,u.push=n;++t<i;)u.push(e[t]);return u}function s(e){return"\\"+et[e]}function a(){return m.pop()||[]}function c(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function u(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function l(){}function h(e){e.length=0,m.length<_&&m.push(e)}function p(e){var t=e.cache;t&&p(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,v.length<_&&v.push(e)}function f(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,o=Array(0>r?0:r);++i<r;)o[i]=e[t+i];return o}function d(n){function m(e){return e&&"object"==typeof e&&!cr(e)&&Ii.call(e,"__wrapped__")?e:new v(e)}function v(e,t){this.__chain__=!!t,this.__wrapped__=e}function _(e,t,n,i,r){if(n){var o=n(e);if("undefined"!=typeof o)return o}var s=Pt(e);if(!s)return e;var c=Li.call(e);if(!Y[c]||!or.nodeClass&&u(e))return e;var l=ir[c];switch(c){case L:case z:return new l(+e);case B:case G:return new l(e);case X:return o=l(e.source,O.exec(e)),o.lastIndex=e.lastIndex,o}var p=cr(e);if(t){var d=!i;i||(i=a()),r||(r=a());for(var g=i.length;g--;)if(i[g]==e)return r[g];o=p?l(e.length):{}}else o=p?f(e):br({},e);return p&&(Ii.call(e,"index")&&(o.index=e.index),Ii.call(e,"input")&&(o.input=e.input)),t?(i.push(e),r.push(o),(p?yr:kr)(e,function(e,s){o[s]=_(e,t,n,i,r)}),d&&(h(i),h(r)),o):o}function et(e,t,n){if("function"!=typeof e)return Qn;if("undefined"==typeof t)return e;var i=e.__bindData__||or.funcNames&&!e.name;if("undefined"==typeof i){var r=I&&Mi.call(e);or.funcNames||!r||R.test(r)||(i=!0),(or.funcNames||!i)&&(i=!or.funcDecomp||I.test(r),ar(e,i))}if(i!==!0&&i&&1&i[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return jn(e,t)}function nt(e,t,n,i){for(var r=(i||0)-1,o=e?e.length:0,s=[];++r<o;){var a=e[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(cr(a)||mt(a))){t||(a=nt(a,t,n));var c=-1,u=a.length,l=s.length;for(s.length+=u;++c<u;)s[l++]=a[c]}else n||s.push(a)}return s}function it(e,t,n,i,r,o){if(n){var s=n(e,t);if("undefined"!=typeof s)return!!s}if(e===t)return 0!==e||1/e==1/t;var c=typeof e,l=typeof t;if(!(e!==e||e&&Z[c]||t&&Z[l]))return!1;if(null==e||null==t)return e===t;var p=Li.call(e),f=Li.call(t);if(p==q&&(p=U),f==q&&(f=U),p!=f)return!1;switch(p){case L:case z:return+e==+t;case B:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case X:case G:return e==xi(t)}var d=p==$;if(!d){if(Ii.call(e,"__wrapped__ ")||Ii.call(t,"__wrapped__"))return it(e.__wrapped__||e,t.__wrapped__||t,n,i,r,o);if(p!=U||!or.nodeClass&&(u(e)||u(t)))return!1;var g=!or.argsObject&&mt(e)?bi:e.constructor,m=!or.argsObject&&mt(t)?bi:t.constructor;if(g!=m&&!(Mt(g)&&g instanceof g&&Mt(m)&&m instanceof m))return!1}var v=!r;r||(r=a()),o||(o=a());for(var y=r.length;y--;)if(r[y]==e)return o[y]==t;var b=0;if(s=!0,r.push(e),o.push(t),d){if(y=e.length,b=t.length,s=b==e.length,!s&&!i)return s;for(;b--;){var w=y,x=t[b];if(i)for(;w--&&!(s=it(e[w],x,n,i,r,o)););else if(!(s=it(e[b],x,n,i,r,o)))break}return s}return xr(t,function(t,a,c){return Ii.call(c,a)?(b++,s=Ii.call(e,a)&&it(e[a],t,n,i,r,o)):void 0}),s&&!i&&xr(e,function(e,t,n){return Ii.call(n,t)?s=--b>-1:void 0}),v&&(h(r),h(o)),s}function ot(e,t,n,i,r){(cr(t)?Qt:kr)(t,function(t,o){var s,a,c=t,u=e[o];if(t&&((a=cr(t))||_r(t))){for(var l=i.length;l--;)if(s=i[l]==t){u=r[l];break}if(!s){var h;n&&(c=n(u,t),(h="undefined"!=typeof c)&&(u=c)),h||(u=a?cr(u)?u:[]:_r(u)?u:{}),i.push(t),r.push(u),h||ot(u,t,n,i,r)}}else n&&(c=n(u,t),"undefined"==typeof c&&(c=t)),"undefined"!=typeof c&&(u=c);e[o]=u})}function at(n,i,r){var s=-1,c=ft(),u=n?n.length:0,l=[],f=!i&&u>=x&&c===e,d=r||f?a():l;if(f){var g=o(d);g?(c=t,d=g):(f=!1,d=r?d:(h(d),l))}for(;++s<u;){var m=n[s],v=r?r(m,s,n):m;(i?!s||d[d.length-1]!==v:c(d,v)<0)&&((r||f)&&d.push(v),l.push(m))}return f?(h(d.array),p(d)):r&&h(d),l}function ct(e){return function(t,n,i){var r={};if(n=m.createCallback(n,i,3),cr(t))for(var o=-1,s=t.length;++o<s;){var a=t[o];e(r,a,n(a,o,t),t)}else yr(t,function(t,i,o){e(r,t,n(t,i,o),o)});return r}}function ut(e,t,n,i,r,o){var s=1&t,a=2&t,c=4&t,u=8&t,l=16&t,h=32&t,p=e;if(!a&&!Mt(e))throw new ki;l&&!n.length&&(t&=-17,l=n=!1),h&&!i.length&&(t&=-33,h=i=!1);var f=e&&e.__bindData__;if(f)return!s||1&f[1]||(f[4]=r),!s&&1&f[1]&&(t|=8),!c||4&f[1]||(f[5]=o),l&&ji.apply(f[2]||(f[2]=[]),n),h&&ji.apply(f[3]||(f[3]=[]),i),f[1]|=t,ut.apply(null,f);if(!s||a||c||h||!(or.fastBind||Wi&&l))g=function(){var f=arguments,d=s?r:this;if((c||l||h)&&(f=er.call(f),l&&zi.apply(f,n),h&&ji.apply(f,i),c&&f.length<o))return t|=16,ut(e,u?t:-4&t,f,null,r,o);if(a&&(e=d[p]),this instanceof g){d=ht(e.prototype);var m=e.apply(d,f);return Pt(m)?m:d}return e.apply(d,f)};else{if(l){var d=[r];ji.apply(d,n)}var g=l?Wi.apply(e,d):Wi.call(e,r)}return ar(g,er.call(arguments)),g}function lt(){Q.shadowedProps=N,Q.array=Q.bottom=Q.loop=Q.top="",Q.init="iterable",Q.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)Q[n]=e[n];var i=Q.args;Q.firstArg=/^[^,]+/.exec(i)[0];var r=mi("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+sr(Q)+"\n}");return r(et,F,Ci,Ii,b,mt,cr,Vt,Q.keys,Ti,Z,rr,G,Ei,Li)}function ht(e){return Pt(e)?Bi(e):{}}function pt(e){return dr[e]}function ft(){var t=(t=m.indexOf)===wn?e:t;return t}function dt(e){var t,n;return!e||Li.call(e)!=U||(t=e.constructor,Mt(t)&&!(t instanceof t))||!or.argsClass&&mt(e)||!or.nodeClass&&u(e)?!1:or.ownLast?(xr(e,function(e,t,i){return n=Ii.call(i,t),!1}),n!==!1):(xr(e,function(e,t){n=t}),"undefined"==typeof n||Ii.call(e,n))}function gt(e){return gr[e]}function mt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Li.call(e)==q||!1}function vt(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),_(e,t,"function"==typeof n&&et(n,i,1))}function yt(e,t,n){return _(e,!0,"function"==typeof t&&et(t,n,1))}function bt(e,t,n){var i;return t=m.createCallback(t,n,3),kr(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function wt(e,t,n){var i;return t=m.createCallback(t,n,3),kt(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function xt(e,t,n){var i=[];xr(e,function(e,t){i.push(t,e)});var r=i.length;for(t=et(t,n,3);r--&&t(i[r--],i[r],e)!==!1;);return e}function kt(e,t,n){var i=lr(e),r=i.length;for(t=et(t,n,3);r--;){var o=i[r];if(t(e[o],o,e)===!1)break}return e}function _t(e){var t=[];return xr(e,function(e,n){Mt(e)&&t.push(n)}),t.sort()}function Ct(e,t){return e?Ii.call(e,t):!1}function Tt(e){for(var t=-1,n=lr(e),i=n.length,r={};++t<i;){var o=n[t];r[e[o]]=o}return r}function Et(e){return e===!0||e===!1||Li.call(e)==L}function St(e){return e?"object"==typeof e&&Li.call(e)==z:!1}function Ht(e){return e?1===e.nodeType:!1}function Ot(e){var t=!0;if(!e)return t;var n=Li.call(e),i=e.length;return n==$||n==G||(or.argsClass?n==q:mt(e))||n==U&&"number"==typeof i&&Mt(e.splice)?!i:(kr(e,function(){return t=!1}),t)}function Rt(e,t,n,i){return it(e,t,"function"==typeof n&&et(n,i,2))}function At(e){return Xi(e)&&!Gi(parseFloat(e))}function Mt(e){return"function"==typeof e}function Pt(e){return!(!e||!Z[typeof e])}function It(e){return jt(e)&&e!=+e}function Dt(e){return null===e}function jt(e){return"number"==typeof e||Li.call(e)==B}function Nt(e){return e&&Z[typeof e]?Li.call(e)==X:!1}function Vt(e){return"string"==typeof e||Li.call(e)==G}function qt(e){return"undefined"==typeof e}function $t(e){var t=arguments,n=2;if(!Pt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var i=et(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(i=t[--n]);for(var r=er.call(arguments,1,n),o=-1,s=a(),c=a();++o<n;)ot(e,r[o],i,s,c);return h(s),h(c),e}function Lt(e,t,n){var i=ft(),r="function"==typeof t,o={};if(r)t=m.createCallback(t,n,3);else var s=nt(arguments,!0,!1,1);return xr(e,function(e,n,a){(r?!t(e,n,a):i(s,n)<0)&&(o[n]=e)}),o}function zt(e){for(var t=-1,n=lr(e),i=n.length,r=pi(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r}function Ft(e,t,n){var i={};if("function"!=typeof t)for(var r=-1,o=nt(arguments,!0,!1,1),s=Pt(e)?o.length:0;++r<s;){var a=o[r];a in e&&(i[a]=e[a])}else t=m.createCallback(t,n,3),xr(e,function(e,n,r){t(e,n,r)&&(i[n]=e)});return i}function Wt(e,t,n,i){var r=cr(e);if(t=et(t,i,4),null==n)if(r)n=[];else{var o=e&&e.constructor,s=o&&o.prototype;n=ht(s)}return(r?yr:kr)(e,function(e,i,r){return t(n,e,i,r)}),n}function Bt(e){for(var t=-1,n=lr(e),i=n.length,r=pi(i);++t<i;)r[t]=e[n[t]];return r}function Ut(e){var t=arguments,n=-1,i=nt(t,!0,!1,1),r=t[2]&&t[2][t[1]]===e?1:i.length,o=pi(r);for(or.unindexedChars&&Vt(e)&&(e=e.split(""));++n<r;)o[n]=e[i[n]];return o}function Xt(e,t,n){var i=-1,r=ft(),o=e?e.length:0,s=!1;return n=(0>n?Ji(0,o+n):n)||0,cr(e)?s=r(e,t,n)>-1:"number"==typeof o?s=(Vt(e)?e.indexOf(t,n):r(e,t,n))>-1:yr(e,function(e){return++i>=n?!(s=e===t):void 0}),s}function Gt(e,t,n){var i=!0;if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o&&(i=!!t(e[r],r,e)););else yr(e,function(e,n,r){return i=!!t(e,n,r)});return i}function Yt(e,t,n){var i=[];if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o;){var s=e[r];t(s,r,e)&&i.push(s)}else yr(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function Jt(e,t,n){if(t=m.createCallback(t,n,3),!cr(e)){var i;return yr(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}for(var r=-1,o=e.length;++r<o;){var s=e[r];if(t(s,r,e))return s}}function Kt(e,t,n){var i;return t=m.createCallback(t,n,3),Zt(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}function Qt(e,t,n){if(t&&"undefined"==typeof n&&cr(e))for(var i=-1,r=e.length;++i<r&&t(e[i],i,e)!==!1;);else yr(e,t,n);return e}function Zt(e,t,n){var i=e,r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:et(t,n,3),cr(e))for(;r--&&t(e[r],r,e)!==!1;);else{if("number"!=typeof r){var o=lr(e);r=o.length}else or.unindexedChars&&Vt(e)&&(i=e.split(""));yr(e,function(e,n,s){return n=o?o[--r]:--r,t(i[n],n,s)})}return e}function en(e,t){var n=er.call(arguments,2),i=-1,r="function"==typeof t,o=e?e.length:0,s=pi("number"==typeof o?o:0);return Qt(e,function(e){s[++i]=(r?t:e[t]).apply(e,n)}),s}function tn(e,t,n){var i=-1,r=e?e.length:0,o=pi("number"==typeof r?r:0);if(t=m.createCallback(t,n,3),cr(e))for(;++i<r;)o[i]=t(e[i],i,e);else yr(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function nn(e,t,n){var r=-1/0,o=r;if(!t&&cr(e))for(var s=-1,a=e.length;++s<a;){var c=e[s];c>o&&(o=c)}else t=!t&&Vt(e)?i:m.createCallback(t,n,3),yr(e,function(e,n,i){var s=t(e,n,i);s>r&&(r=s,o=e)});return o}function rn(e,t,n){var r=1/0,o=r;if(!t&&cr(e))for(var s=-1,a=e.length;++s<a;){var c=e[s];o>c&&(o=c)}else t=!t&&Vt(e)?i:m.createCallback(t,n,3),yr(e,function(e,n,i){var s=t(e,n,i);r>s&&(r=s,o=e)});return o}function on(e,t,n,i){var r=arguments.length<3;if(t=et(t,i,4),cr(e)){var o=-1,s=e.length;for(r&&(n=e[++o]);++o<s;)n=t(n,e[o],o,e)}else yr(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)});return n}function sn(e,t,n,i){var r=arguments.length<3;return t=et(t,i,4),Zt(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function an(e,t,n){return t=m.createCallback(t,n,3),Yt(e,function(e,n,i){return!t(e,n,i)})}function cn(e,t,n){var i=e?e.length:0;if("number"!=typeof i?e=Bt(e):or.unindexedChars&&Vt(e)&&(e=e.split("")),null==t||n)return e?e[ti(i-1)]:g;var r=un(e);return r.length=Ki(Ji(0,t),r.length),r}function un(e){var t=-1,n=e?e.length:0,i=pi("number"==typeof n?n:0);return Qt(e,function(e){var n=ti(++t);i[t]=i[n],i[n]=e}),i}function ln(e){var t=e?e.length:0;return"number"==typeof t?t:lr(e).length}function hn(e,t,n){var i;if(t=m.createCallback(t,n,3),cr(e))for(var r=-1,o=e.length;++r<o&&!(i=t(e[r],r,e)););else yr(e,function(e,n,r){return!(i=t(e,n,r))});return!!i}function pn(e,t,n){var i=-1,o=e?e.length:0,s=pi("number"==typeof o?o:0);for(t=m.createCallback(t,n,3),Qt(e,function(e,n,r){var o=s[++i]=c();o.criteria=t(e,n,r),o.index=i,o.value=e}),o=s.length,s.sort(r);o--;){var a=s[o];s[o]=a.value,p(a)}return s}function fn(e){return e&&"number"==typeof e.length?or.unindexedChars&&Vt(e)?e.split(""):f(e):Bt(e)}function dn(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function gn(n){var i=-1,r=ft(),s=n?n.length:0,a=nt(arguments,!0,!0,1),c=[],u=s>=x&&r===e;if(u){var l=o(a);l?(r=t,a=l):u=!1}for(;++i<s;){var h=n[i];r(a,h)<0&&c.push(h)}return u&&p(a),c}function mn(e,t,n){var i=-1,r=e?e.length:0;for(t=m.createCallback(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1}function vn(e,t,n){var i=e?e.length:0;for(t=m.createCallback(t,n,3);i--;)if(t(e[i],i,e))return i;return-1}function yn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=m.createCallback(t,n,3);++o<r&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[0]:g;return f(e,0,Ki(Ji(0,i),r))}function bn(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=i&&i[t]===e?null:t,t=!1),null!=n&&(e=tn(e,n,i)),nt(e,t)}function wn(t,n,i){if("number"==typeof i){var r=t?t.length:0;i=0>i?Ji(0,r+i):i||0}else if(i){var o=On(t,n);return t[o]===n?o:-1}return e(t,n,i)}function xn(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else i=null==t||n?1:t||i;return f(e,0,Ki(Ji(0,r-i),r))}function kn(n){for(var i=arguments,r=i.length,s=-1,c=a(),u=-1,l=ft(),f=n?n.length:0,d=[],g=a();++s<r;){var m=i[s];c[s]=l===e&&(m?m.length:0)>=x&&o(s?i[s]:g)}e:for(;++u<f;){var v=c[0];if(m=n[u],(v?t(v,m):l(g,m))<0){for(s=r,(v||g).push(m);--s;)if(v=c[s],(v?t(v,m):l(i[s],m))<0)continue e;d.push(m)}}for(;r--;)v=c[r],v&&p(v);return h(c),h(g),d}function _n(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:g;return f(e,Ji(0,r-i))}function Cn(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?Ji(0,i+n):Ki(n,i-1))+1);i--;)if(e[i]===t)return i;return-1}function Tn(e){for(var t=arguments,n=0,i=t.length,r=e?e.length:0;++n<i;)for(var o=-1,s=t[n];++o<r;)e[o]===s&&($i.call(e,o--,1),r--);return e}function En(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var i=-1,r=Ji(0,Oi((t-e)/(n||1))),o=pi(r);++i<r;)o[i]=e,e+=n;return o}function Sn(e,t,n){var i=-1,r=e?e.length:0,o=[];for(t=m.createCallback(t,n,3);++i<r;){var s=e[i];t(s,i,e)&&(o.push(s),$i.call(e,i--,1),r--)}return o}function Hn(e,t,n){if("number"!=typeof t&&null!=t){var i=0,r=-1,o=e?e.length:0;for(t=m.createCallback(t,n,3);++r<o&&t(e[r],r,e);)i++}else i=null==t||n?1:Ji(0,t);return f(e,i)}function On(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?m.createCallback(n,i,1):Qn,t=n(t);o>r;){var s=r+o>>>1;n(e[s])<t?r=s+1:o=s}return r}function Rn(){return at(nt(arguments,!0,!0))}function An(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=i&&i[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,i,3)),at(e,t,n)}function Mn(e){return gn(e,er.call(arguments,1))}function Pn(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?nn(Sr(e,"length")):0,i=pi(0>n?0:n);++t<n;)i[t]=Sr(e,t);return i}function In(e,t){for(var n=-1,i=e?e.length:0,r={};++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Dn(e,t){if(!Mt(t))throw new ki;return function(){return--e<1?t.apply(this,arguments):void 0}}function jn(e,t){return arguments.length>2?ut(e,17,er.call(arguments,2),null,t):ut(e,1,null,null,t)}function Nn(e){for(var t=arguments.length>1?nt(arguments,!0,!1,1):_t(e),n=-1,i=t.length;++n<i;){var r=t[n];e[r]=ut(e[r],1,null,null,e)}return e}function Vn(e,t){return arguments.length>2?ut(t,19,er.call(arguments,2),null,e):ut(t,3,null,null,e)}function qn(){for(var e=arguments,t=e.length;t--;)if(!Mt(e[t]))throw new ki;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function $n(e,t,n){var i=typeof e;if(null==e||"function"==i)return et(e,t,n);if("object"!=i)return function(t){return t[e]};var r=lr(e),o=r[0],s=e[o];return 1!=r.length||s!==s||Pt(s)?function(t){for(var n=r.length,i=!1;n--&&(i=it(t[r[n]],e[r[n]],null,!0)););return i}:function(e){var t=e[o];return s===t&&(0!==s||1/s==1/t)}}function Ln(e,t){return t="number"==typeof t?t:+t||e.length,ut(e,4,null,null,null,t)}function zn(e,t,n){var i,r,o,s,a,c,u,l=0,h=!1,p=!0;if(!Mt(e))throw new ki;if(t=Ji(0,t)||0,n===!0){var f=!0;p=!1}else Pt(n)&&(f=n.leading,h="maxWait"in n&&(Ji(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var d=function(){var n=t-(Di()-s);if(0>=n){r&&Ri(r);var h=u;r=c=u=g,h&&(l=Di(),o=e.apply(a,i))}else c=qi(d,n)},m=function(){c&&Ri(c),r=c=u=g,(p||h!==t)&&(l=Di(),o=e.apply(a,i))};return function(){if(i=arguments,s=Di(),a=this,u=p&&(c||!f),h===!1)var n=f&&!c;else{r||f||(l=s);var g=h-(s-l);0>=g?(r&&(r=Ri(r)),l=s,o=e.apply(a,i)):r||(r=qi(m,g))}return c||t===h||(c=qi(d,t)),n&&(o=e.apply(a,i)),o}}function Fn(e){if(!Mt(e))throw new ki;var t=er.call(arguments,1);return qi(function(){e.apply(g,t)},1)}function Wn(e,t){if(!Mt(e))throw new ki;var n=er.call(arguments,2);return qi(function(){e.apply(g,n)},t)}function Bn(e,t){if(!Mt(e))throw new ki;var n=function(){var i=n.cache,r=t?t.apply(this,arguments):w+arguments[0];return Ii.call(i,r)?i[r]:i[r]=e.apply(this,arguments)};return n.cache={},n}function Un(e){var t,n;if(!Mt(e))throw new ki;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Xn(e){return ut(e,16,er.call(arguments,1))}function Gn(e){return ut(e,32,null,er.call(arguments,1))}function Yn(e,t,n){var i=!0,r=!0;if(!Mt(e))throw new ki;n===!1?i=!1:Pt(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),J.leading=i,J.maxWait=t,J.trailing=r;var o=zn(e,t,J);return o}function Jn(e,t){if(!Mt(t))throw new ki;return function(){var n=[e];return ji.apply(n,arguments),t.apply(this,n)}}function Kn(e){return null==e?"":xi(e).replace(vr,pt)}function Qn(e){return e}function Zn(e,t){var n=e,i=!t||Mt(n);t||(n=v,t=e,e=m),Qt(_t(t),function(r){var o=e[r]=t[r];i&&(n.prototype[r]=function(){var t=this.__wrapped__,i=[t];ji.apply(i,arguments);var r=o.apply(e,i);return t&&"object"==typeof t&&t===r?this:(r=new n(r),r.__chain__=this.__chain__,r)})})}function ei(){return n._=Si,this}function ti(e,t,n){var i=null==e,r=null==t;null==n&&("boolean"==typeof e&&r?(n=e,e=1):r||"boolean"!=typeof t||(n=t,r=!0)),i&&r&&(t=1),e=+e||0,r?(t=e,e=0):t=+t||0;var o=Zi();return n||e%1||t%1?Ki(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t):e+Ai(o*(t-e+1))}function ni(e,t){if(e){var n=e[t];return Mt(n)?e[t]():n}}function ii(e,t,n){var i=m.templateSettings;e||(e=""),n=wr({},n,i);var r,o=wr({},n.imports,i.imports),a=lr(o),c=Bt(o),u=0,l=n.interpolate||P,h="__p += '",p=wi((n.escape||P).source+"|"+l.source+"|"+(l===A?H:P).source+"|"+(n.evaluate||P).source+"|$","g");e.replace(p,function(t,n,i,o,a,c){return i||(i=o),h+=e.slice(u,c).replace(D,s),n&&(h+="' +\n__e("+n+") +\n'"),a&&(r=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+t.length,t}),h+="';\n";var f=n.variable,d=f;d||(f="obj",h="with ("+f+") {\n"+h+"\n}\n"),h=(r?h.replace(T,""):h).replace(E,"$1").replace(S,"$1;"),h="function("+f+") {\n"+(d?"":f+" || ("+f+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+V++ +"]")+"\n*/";try{var y=mi(a,"return "+h+v).apply(g,c)}catch(b){throw b.source=h,b}return t?y(t):(y.source=h,y)}function ri(e,t,n){e=(e=+e)>-1?e:0;var i=-1,r=pi(e);for(t=et(t,n,1);++i<e;)r[i]=t(i);return r}function oi(e){return null==e?"":xi(e).replace(mr,gt)}function si(e){var t=++y;return xi(null==e?"":e)+t}function ai(e){return e=new v(e),e.__chain__=!0,e}function ci(e,t){return t(e),e}function ui(){return this.__chain__=!0,this}function li(){return xi(this.__wrapped__)}function hi(){return this.__wrapped__}n=n?st.defaults(tt.Object(),n,st.pick(tt,j)):tt;var pi=n.Array,fi=n.Boolean,di=n.Date,gi=n.Error,mi=n.Function,vi=n.Math,yi=n.Number,bi=n.Object,wi=n.RegExp,xi=n.String,ki=n.TypeError,_i=[],Ci=gi.prototype,Ti=bi.prototype,Ei=xi.prototype,Si=n._,Hi=wi("^"+xi(Ti.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Oi=vi.ceil,Ri=n.clearTimeout,Ai=vi.floor,Mi=mi.prototype.toString,Pi=Hi.test(Pi=bi.getPrototypeOf)&&Pi,Ii=Ti.hasOwnProperty,Di=Hi.test(Di=di.now)&&Di||function(){return+new di},ji=_i.push,Ni=Ti.propertyIsEnumerable,Vi=n.setImmediate,qi=n.setTimeout,$i=_i.splice,Li=Ti.toString,zi=_i.unshift,Fi=function(){try{var e={},t=Hi.test(t=bi.defineProperty)&&t,n=t(e,e,e)&&t}catch(i){}return n}(),Wi=Hi.test(Wi=Li.bind)&&Wi,Bi=Hi.test(Bi=bi.create)&&Bi,Ui=Hi.test(Ui=pi.isArray)&&Ui,Xi=n.isFinite,Gi=n.isNaN,Yi=Hi.test(Yi=bi.keys)&&Yi,Ji=vi.max,Ki=vi.min,Qi=n.parseInt,Zi=vi.random,er=_i.slice,tr=Hi.test(n.attachEvent),nr=Wi&&!/\n|true/.test(Wi+tr),ir={};ir[$]=pi,ir[L]=fi,ir[z]=di,ir[W]=mi,ir[U]=bi,ir[B]=yi,ir[X]=wi,ir[G]=xi;var rr={};rr[$]=rr[z]=rr[B]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},rr[L]=rr[G]={constructor:!0,toString:!0,valueOf:!0},rr[F]=rr[W]=rr[X]={constructor:!0,toString:!0},rr[U]={constructor:!0},function(){for(var e=N.length;e--;){var t=N[e];for(var n in rr)Ii.call(rr,n)&&!Ii.call(rr[n],t)&&(rr[n][t]=!1)}}(),v.prototype=m.prototype;var or=m.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var r in new e)i.push(r);for(r in arguments);or.argsClass=Li.call(arguments)==q,or.argsObject=arguments.constructor==bi&&!(arguments instanceof pi),or.enumErrorProps=Ni.call(Ci,"message")||Ni.call(Ci,"name"),or.enumPrototypes=Ni.call(e,"prototype"),or.fastBind=Wi&&!nr,or.funcDecomp=!Hi.test(n.WinRTError)&&I.test(d),or.funcNames="string"==typeof mi.name,or.nonEnumArgs=0!=r,or.nonEnumShadows=!/valueOf/.test(i),or.ownLast="x"!=i[0],or.spliceObjects=(_i.splice.call(t,0,1),!t[0]),or.unindexedChars="xx"!="x"[0]+bi("x")[0];try{or.nodeClass=!(Li.call(document)==U&&!({toString:0}+""))
}catch(o){or.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:A,variable:"",imports:{_:m}};var sr=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",or.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):or.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),or.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),or.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(or.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),or.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",or.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||or.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};Bi||(ht=function(e){if(Pt(e)){l.prototype=e;var t=new l;l.prototype=null}return t||{}});var ar=Fi?function(e,t){K.value=t,Fi(e,"__bindData__",K)}:l;or.argsClass||(mt=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ii.call(e,"callee")||!1});var cr=Ui||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Li.call(e)==$||!1},ur=lt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),lr=Yi?function(e){return Pt(e)?or.enumPrototypes&&"function"==typeof e||or.nonEnumArgs&&e.length&&mt(e)?ur(e):Yi(e):[]}:ur,hr={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:lr,loop:"if (callback(iterable[index], index, collection) === false) return result"},pr={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:lr,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},fr={top:"if (!objectTypes[typeof iterable]) return result;\n"+hr.top,array:!1},dr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gr=Tt(dr),mr=wi("("+lr(gr).join("|")+")","g"),vr=wi("["+lr(dr).join("")+"]","g"),yr=lt(hr),br=lt(pr,{top:pr.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),wr=lt(pr),xr=lt(hr,fr,{useHas:!1}),kr=lt(hr,fr);Mt(/x/)&&(Mt=function(e){return"function"==typeof e&&Li.call(e)==W});var _r=Pi?function(e){if(!e||Li.call(e)!=U||!or.argsClass&&mt(e))return!1;var t=e.valueOf,n="function"==typeof t&&(n=Pi(t))&&Pi(n);return n?e==n||Pi(e)==n:dt(e)}:dt,Cr=ct(function(e,t,n){Ii.call(e,n)?e[n]++:e[n]=1}),Tr=ct(function(e,t,n){(Ii.call(e,n)?e[n]:e[n]=[]).push(t)}),Er=ct(function(e,t,n){e[n]=t}),Sr=tn,Hr=Yt;nr&&rt&&"function"==typeof Vi&&(Fn=function(e){if(!Mt(e))throw new ki;return Vi.apply(n,arguments)});var Or=8==Qi(C+"08")?Qi:function(e,t){return Qi(Vt(e)?e.replace(M,""):e,t||0)};return m.after=Dn,m.assign=br,m.at=Ut,m.bind=jn,m.bindAll=Nn,m.bindKey=Vn,m.chain=ai,m.compact=dn,m.compose=qn,m.countBy=Cr,m.createCallback=$n,m.curry=Ln,m.debounce=zn,m.defaults=wr,m.defer=Fn,m.delay=Wn,m.difference=gn,m.filter=Yt,m.flatten=bn,m.forEach=Qt,m.forEachRight=Zt,m.forIn=xr,m.forInRight=xt,m.forOwn=kr,m.forOwnRight=kt,m.functions=_t,m.groupBy=Tr,m.indexBy=Er,m.initial=xn,m.intersection=kn,m.invert=Tt,m.invoke=en,m.keys=lr,m.map=tn,m.max=nn,m.memoize=Bn,m.merge=$t,m.min=rn,m.omit=Lt,m.once=Un,m.pairs=zt,m.partial=Xn,m.partialRight=Gn,m.pick=Ft,m.pluck=Sr,m.pull=Tn,m.range=En,m.reject=an,m.remove=Sn,m.rest=Hn,m.shuffle=un,m.sortBy=pn,m.tap=ci,m.throttle=Yn,m.times=ri,m.toArray=fn,m.transform=Wt,m.union=Rn,m.uniq=An,m.values=Bt,m.where=Hr,m.without=Mn,m.wrap=Jn,m.zip=Pn,m.zipObject=In,m.collect=tn,m.drop=Hn,m.each=Qt,m.eachRight=Zt,m.extend=br,m.methods=_t,m.object=In,m.select=Yt,m.tail=Hn,m.unique=An,m.unzip=Pn,Zn(m),m.clone=vt,m.cloneDeep=yt,m.contains=Xt,m.escape=Kn,m.every=Gt,m.find=Jt,m.findIndex=mn,m.findKey=bt,m.findLast=Kt,m.findLastIndex=vn,m.findLastKey=wt,m.has=Ct,m.identity=Qn,m.indexOf=wn,m.isArguments=mt,m.isArray=cr,m.isBoolean=Et,m.isDate=St,m.isElement=Ht,m.isEmpty=Ot,m.isEqual=Rt,m.isFinite=At,m.isFunction=Mt,m.isNaN=It,m.isNull=Dt,m.isNumber=jt,m.isObject=Pt,m.isPlainObject=_r,m.isRegExp=Nt,m.isString=Vt,m.isUndefined=qt,m.lastIndexOf=Cn,m.mixin=Zn,m.noConflict=ei,m.parseInt=Or,m.random=ti,m.reduce=on,m.reduceRight=sn,m.result=ni,m.runInContext=d,m.size=ln,m.some=hn,m.sortedIndex=On,m.template=ii,m.unescape=oi,m.uniqueId=si,m.all=Gt,m.any=hn,m.detect=Jt,m.findWhere=Jt,m.foldl=on,m.foldr=sn,m.include=Xt,m.inject=on,kr(m,function(e,t){m.prototype[t]||(m.prototype[t]=function(){var t=[this.__wrapped__],n=this.__chain__;ji.apply(t,arguments);var i=e.apply(m,t);return n?new v(i,n):i})}),m.first=yn,m.last=_n,m.sample=cn,m.take=yn,m.head=yn,kr(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,i){var r=this.__chain__,o=e(this.__wrapped__,t,i);return r||null!=t&&(!i||n&&"function"==typeof t)?new v(o,r):o})}),m.VERSION="2.2.1",m.prototype.chain=ui,m.prototype.toString=li,m.prototype.value=hi,m.prototype.valueOf=hi,yr(["join","pop","shift"],function(e){var t=_i[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new v(n,e):n}}),yr(["push","reverse","sort","unshift"],function(e){var t=_i[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),yr(["concat","slice","splice"],function(e){var t=_i[e];m.prototype[e]=function(){return new v(t.apply(this.__wrapped__,arguments),this.__chain__)}}),or.spliceObjects||yr(["pop","shift","splice"],function(e){var t=_i[e],n="splice"==e;m.prototype[e]=function(){var e=this.__chain__,i=this.__wrapped__,r=t.apply(i,arguments);return 0===i.length&&delete i[0],e||n?new v(r,e):r}}),m}var g,m=[],v=[],y=0,b={},w=+new Date+"",x=75,_=40,C=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",T=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,S=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,O=/\w*$/,R=/^function[ \n\r\t]+\w/,A=/<%=([\s\S]+?)%>/g,M=RegExp("^["+C+"]*0+(?=.$)"),P=/($^)/,I=/\bthis\b/,D=/['\n\r\t\u2028\u2029\\]/g,j=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],N=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],V=0,q="[object Arguments]",$="[object Array]",L="[object Boolean]",z="[object Date]",F="[object Error]",W="[object Function]",B="[object Number]",U="[object Object]",X="[object RegExp]",G="[object String]",Y={};Y[W]=!1,Y[q]=Y[$]=Y[L]=Y[z]=Y[B]=Y[U]=Y[X]=Y[G]=!0;var J={leading:!1,maxWait:0,trailing:!1},K={configurable:!1,enumerable:!1,value:null,writable:!1},Q={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},et={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},tt=Z[typeof window]&&window||this,nt=Z[typeof exports]&&exports&&!exports.nodeType&&exports,it=Z[typeof module]&&module&&!module.nodeType&&module,rt=it&&it.exports===nt&&nt,ot=Z[typeof global]&&global;!ot||ot.global!==ot&&ot.window!==ot||(tt=ot);var st=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(tt._=st,define("lodash",[],function(){return st})):nt&&it?rt?(it.exports=st)._=st:nt._=st:tt._=st}.call(this),function(e,t){function n(e){var t=e.length,n=B.type(e);return B.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=it[e]={};return B.each(e.match(X)||[],function(e,n){t[n]=!0}),t}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=B.expando+Math.random()}function o(e,n,i){var r;if(i===t&&1===e.nodeType)if(r="data-"+n.replace(at,"-$1").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:st.test(i)?JSON.parse(i):i}catch(o){}rt.set(e,n,i)}else i=t;return i}function s(){return!0}function a(){return!1}function c(){try{return A.activeElement}catch(e){}}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e,t,n){if(B.isFunction(t))return B.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return B.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(vt.test(t))return B.filter(t,e,n);t=B.filter(t,e)}return B.grep(e,function(e){return L.call(t,e)>=0!==n})}function h(e,t){return B.nodeName(e,"table")&&B.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Ht.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function d(e,t){for(var n=e.length,i=0;n>i;i++)ot.set(e[i],"globalEval",!t||ot.get(t[i],"globalEval"))}function g(e,t){var n,i,r,o,s,a,c,u;if(1===t.nodeType){if(ot.hasData(e)&&(o=ot.access(e),s=ot.set(t,o),u=o.events)){delete s.handle,s.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)B.event.add(t,r,u[r][n])}rt.hasData(e)&&(a=rt.access(e),c=B.extend({},a),rt.set(t,c))}}function m(e,n){var i=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&B.nodeName(e,n)?B.merge([e],i):i}function v(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Tt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function y(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=zt.length;r--;)if(t=zt[r]+n,t in e)return t;return i}function b(e,t){return e=t||e,"none"===B.css(e,"display")||!B.contains(e.ownerDocument,e)}function w(t){return e.getComputedStyle(t,null)}function x(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=ot.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[s]=ot.access(i,"olddisplay",T(i.nodeName)))):o[s]||(r=b(i),(n&&"none"!==n||!r)&&ot.set(i,"olddisplay",r?n:B.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function k(e,t,n){var i=Dt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=B.css(e,n+Lt[o],!0,r)),i?("content"===n&&(s-=B.css(e,"padding"+Lt[o],!0,r)),"margin"!==n&&(s-=B.css(e,"border"+Lt[o]+"Width",!0,r))):(s+=B.css(e,"padding"+Lt[o],!0,r),"padding"!==n&&(s+=B.css(e,"border"+Lt[o]+"Width",!0,r)));return s}function C(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=w(e),s=B.support.boxSizing&&"border-box"===B.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=At(e,t,o),(0>r||null==r)&&(r=e.style[t]),jt.test(r))return r;i=s&&(B.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(s?"border":"content"),i,o)+"px"}function T(e){var t=A,n=Vt[e];return n||(n=E(e,t),"none"!==n&&n||(Mt=(Mt||B("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Mt[0].contentWindow||Mt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=E(e,t),Mt.detach()),Vt[e]=n),n}function E(e,t){var n=B(t.createElement(e)).appendTo(t.body),i=B.css(n[0],"display");return n.remove(),i}function S(e,t,n,i){var r;if(B.isArray(t))B.each(t,function(t,r){n||Wt.test(e)?i(e,r):S(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==B.type(t))i(e,t);else for(r in t)S(e+"["+r+"]",t[r],n,i)}var H,O,R=typeof t,A=(e.location,e.document),M=A.documentElement,P=e.jQuery,I=e.$,D={},j=[],N="2.0.3 -sizzle,-wrap,-ajax,-ajax/script,-ajax/jsonp,-ajax/xhr,-effects,-offset,-deprecated",V=j.concat,q=j.push,$=j.slice,L=j.indexOf,z=D.toString,F=D.hasOwnProperty,W=N.trim,B=function(e,t){return new B.fn.init(e,t,H)},U=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=/\S+/g,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Y=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,J=/^-ms-/,K=/-([\da-z])/gi,Q=function(e,t){return t.toUpperCase()},Z=function(){A.removeEventListener("DOMContentLoaded",Z,!1),e.removeEventListener("load",Z,!1),B.ready()};B.fn=B.prototype={jquery:N,constructor:B,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:G.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof B?n[0]:n,B.merge(this,B.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:A,!0)),Y.test(r[1])&&B.isPlainObject(n))for(r in n)B.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=A.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=A,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):B.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),B.makeArray(e,this))},selector:"",length:0,toArray:function(){return $.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=B.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return B.each(this,e,t)},ready:function(e){return B.ready.promise().done(e),this},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(B.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:[].sort,splice:[].splice},B.fn.init.prototype=B.fn,B.extend=B.fn.extend=function(){var e,n,i,r,o,s,a=arguments[0]||{},c=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},c=2),"object"==typeof a||B.isFunction(a)||(a={}),u===c&&(a=this,--c);u>c;c++)if(null!=(e=arguments[c]))for(n in e)i=a[n],r=e[n],a!==r&&(l&&r&&(B.isPlainObject(r)||(o=B.isArray(r)))?(o?(o=!1,s=i&&B.isArray(i)?i:[]):s=i&&B.isPlainObject(i)?i:{},a[n]=B.extend(l,s,r)):r!==t&&(a[n]=r));return a},B.extend({expando:"jQuery"+(N+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===B&&(e.$=I),t&&e.jQuery===B&&(e.jQuery=P),B},isReady:!1,readyWait:1,holdReady:function(e){e?B.readyWait++:B.ready(!0)},ready:function(e){(e===!0?--B.readyWait:B.isReady)||(B.isReady=!0,e!==!0&&--B.readyWait>0||(O.resolveWith(A,[B]),B.fn.trigger&&B(A).trigger("ready").off("ready")))},isFunction:function(e){return"function"===B.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?D[z.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==B.type(e)||e.nodeType||B.isWindow(e))return!1;try{if(e.constructor&&!F.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||A;var i=Y.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=B.buildFragment([e],t,r),r&&B(r).remove(),B.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,n=i.parseFromString(e,"text/xml")}catch(r){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&B.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=B.trim(e),e&&(1===e.indexOf("use strict")?(t=A.createElement("script"),t.text=e,A.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(J,"ms-").replace(K,Q)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":W.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?B.merge(i,"string"==typeof e?[e]:e):q.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:L.call(t,e,n)},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,s=e.length;for(n=!!n;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),c=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&(c[c.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(c[c.length]=r);return V.apply([],c)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),B.isFunction(e)?(r=$.call(arguments,2),o=function(){return e.apply(n||this,r.concat($.call(arguments)))},o.guid=e.guid=e.guid||B.guid++,o):t},access:function(e,n,i,r,o,s,a){var c=0,u=e.length,l=null==i;if("object"===B.type(i)){o=!0;for(c in i)B.access(e,n,c,i[c],!0,s,a)}else if(r!==t&&(o=!0,B.isFunction(r)||(a=!0),l&&(a?(n.call(e,r),n=null):(l=n,n=function(e,t,n){return l.call(B(e),n)})),n))for(;u>c;c++)n(e[c],i,a?r:r.call(e[c],c,n(e[c],i)));return o?e:l?n.call(e):u?n(e[0],i):s},now:Date.now,swap:function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r}}),B.ready.promise=function(t){return O||(O=B.Deferred(),"complete"===A.readyState?setTimeout(B.ready):(A.addEventListener("DOMContentLoaded",Z,!1),e.addEventListener("load",Z,!1))),O.promise(t)},B.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){D["[object "+t+"]"]=t.toLowerCase()}),H=B(A);var et,tt=M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector,nt=function(e,t){if(e===t)return et=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n?e===A||B.contains(A,e)?-1:t===A||B.contains(A,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1};B.extend({find:function(e,t,n,i){var r,o,s=0;if(n=n||[],t=t||A,!e||"string"!=typeof e)return n;if(1!==(o=t.nodeType)&&9!==o)return[];if(i)for(;r=i[s++];)B.find.matchesSelector(r,e)&&n.push(r);else B.merge(n,t.querySelectorAll(e));return n},unique:function(e){var t,n=[],i=0,r=0;if(et=!1,e.sort(nt),et){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r)return e.textContent;if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=B.text(t);return n},contains:function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!n.contains(i))},isXMLDoc:function(e){return"HTML"!==(e.ownerDocument||e).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),B.extend(B.find,{matches:function(e,t){return B.find(e,null,null,t)},matchesSelector:function(e,t){return tt.call(e,t)},attr:function(e,t){return e.getAttribute(t)}});var it={};B.Callbacks=function(e){e="string"==typeof e?it[e]||i(e):B.extend({},e);var n,r,o,s,a,c,u=[],l=!e.once&&[],h=function(t){for(n=e.memory&&t,r=!0,c=s||0,s=0,a=u.length,o=!0;u&&a>c;c++)if(u[c].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,u&&(l?l.length&&h(l.shift()):n?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;!function i(t){B.each(t,function(t,n){var r=B.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),o?a=u.length:n&&(s=t,h(n))}return this},remove:function(){return u&&B.each(arguments,function(e,t){for(var n;(n=B.inArray(t,u,n))>-1;)u.splice(n,1),o&&(a>=n&&a--,c>=n&&c--)}),this},has:function(e){return e?B.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=l=n=t,this},disabled:function(){return!u},lock:function(){return l=t,n||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||r&&!l||(t=t||[],t=[e,t.slice?t.slice():t],o?l.push(t):h(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},B.extend({Deferred:function(e){var t=[["resolve","done",B.Callbacks("once memory"),"resolved"],["reject","fail",B.Callbacks("once memory"),"rejected"],["notify","progress",B.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return B.Deferred(function(n){B.each(t,function(t,o){var s=o[0],a=B.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&B.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?B.extend(e,i):i}},r={};return i.pipe=i.then,B.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=$.call(arguments),s=o.length,a=1!==s||e&&B.isFunction(e.promise)?s:0,c=1===a?e:B.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?$.call(arguments):r,i===t?c.notifyWith(n,i):--a||c.resolveWith(n,i)}};if(s>1)for(t=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&B.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(c.reject).progress(u(r,n,t)):--a;return a||c.resolveWith(i,o),c.promise()}}),B.support=function(t){var n=A.createElement("input"),i=A.createDocumentFragment(),r=A.createElement("div"),o=A.createElement("select"),s=o.appendChild(A.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=s.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled,n=A.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),t.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===r.style.backgroundClip,B(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=A.getElementsByTagName("body")[0];s&&(n=A.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",B.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===r.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(A.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),t):t}({});var rt,ot,st=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,at=/([A-Z])/g;r.uid=1,r.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=r.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,B.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(B.isEmptyObject(o))B.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,n){var i=this.cache[this.key(e)];return n===t?i:i[n]},access:function(e,n,i){var r;return n===t||n&&"string"==typeof n&&i===t?(r=this.get(e,n),r!==t?r:this.get(e,B.camelCase(n))):(this.set(e,n,i),i!==t?i:n)},remove:function(e,n){var i,r,o,s=this.key(e),a=this.cache[s];if(n===t)this.cache[s]={};else{B.isArray(n)?r=n.concat(n.map(B.camelCase)):(o=B.camelCase(n),n in a?r=[n,o]:(r=o,r=r in a?[r]:r.match(X)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(e){return!B.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},rt=new r,ot=new r,B.extend({acceptData:r.accepts,hasData:function(e){return rt.hasData(e)||ot.hasData(e)},data:function(e,t,n){return rt.access(e,t,n)},removeData:function(e,t){rt.remove(e,t)},_data:function(e,t,n){return ot.access(e,t,n)},_removeData:function(e,t){ot.remove(e,t)}}),B.fn.extend({data:function(e,n){var i,r,s=this[0],a=0,c=null;if(e===t){if(this.length&&(c=rt.get(s),1===s.nodeType&&!ot.get(s,"hasDataAttrs"))){for(i=s.attributes;i.length>a;a++)r=i[a].name,0===r.indexOf("data-")&&(r=B.camelCase(r.slice(5)),o(s,r,c[r]));ot.set(s,"hasDataAttrs",!0)}return c}return"object"==typeof e?this.each(function(){rt.set(this,e)}):B.access(this,function(n){var i,r=B.camelCase(e);if(s&&n===t){if(i=rt.get(s,e),i!==t)return i;if(i=rt.get(s,r),i!==t)return i;if(i=o(s,r,t),i!==t)return i}else this.each(function(){var i=rt.get(this,r);rt.set(this,r,n),-1!==e.indexOf("-")&&i!==t&&rt.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){rt.remove(this,e)})}}),B.extend({queue:function(e,n,i){var r;return e?(n=(n||"fx")+"queue",r=ot.get(e,n),i&&(!r||B.isArray(i)?r=ot.access(e,n,B.makeArray(i)):r.push(i)),r||[]):t},dequeue:function(e,t){t=t||"fx";var n=B.queue(e,t),i=n.length,r=n.shift(),o=B._queueHooks(e,t),s=function(){B.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ot.get(e,n)||ot.access(e,n,{empty:B.Callbacks("once memory").add(function(){ot.remove(e,[t+"queue",n])})})}}),B.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?B.queue(this[0],e):n===t?this:this.each(function(){var t=B.queue(this,e,n);B._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&B.dequeue(this,e)})},dequeue:function(e){return this.each(function(){B.dequeue(this,e)})},delay:function(e,t){return e=B.fx?B.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=B.Deferred(),s=this,a=this.length,c=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=ot.get(s[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(c));return c(),o.promise(n)}});var ct,ut,lt=/[\t\r\n\f]/g,ht=/\r/g,pt=/^(?:input|select|textarea|button)$/i;B.fn.extend({attr:function(e,t){return B.access(this,B.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){B.removeAttr(this,e)})},prop:function(e,t){return B.access(this,B.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[B.propFix[e]||e]})},addClass:function(e){var t,n,i,r,o,s=0,a=this.length,c="string"==typeof e&&e;if(B.isFunction(e))return this.each(function(t){B(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(X)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(lt," "):" ")){for(o=0;r=t[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=B.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,s=0,a=this.length,c=0===arguments.length||"string"==typeof e&&e;if(B.isFunction(e))return this.each(function(t){B(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(X)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(lt," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?B.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):B.isFunction(e)?this.each(function(n){B(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=B(this),o=e.match(X)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===R||"boolean"===n)&&(this.className&&ot.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ot.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(lt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];return arguments.length?(r=B.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=r?e.call(this,i,B(this).val()):e,null==o?o="":"number"==typeof o?o+="":B.isArray(o)&&(o=B.map(o,function(e){return null==e?"":e+""})),n=B.valHooks[this.type]||B.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))})):o?(n=B.valHooks[o.type]||B.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(ht,""):null==i?"":i)):void 0}}),B.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;
return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,c=0>r?a:o?r:0;a>c;c++)if(n=i[c],!(!n.selected&&c!==r||(B.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&B.nodeName(n.parentNode,"optgroup"))){if(t=B(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=B.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=B.inArray(B(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?typeof e.getAttribute===R?B.prop(e,n,i):(1===s&&B.isXMLDoc(e)||(n=n.toLowerCase(),r=B.attrHooks[n]||(B.expr.match.bool.test(n)?ut:ct)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=B.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(B.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(X);if(o&&1===e.nodeType)for(;n=o[r++];)i=B.propFix[n]||n,B.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!B.support.radioValue&&"radio"===t&&B.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,s,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?(s=1!==a||!B.isXMLDoc(e),s&&(n=B.propFix[n]||n,o=B.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||pt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),ut={set:function(e,t,n){return t===!1?B.removeAttr(e,n):e.setAttribute(n,n),n}},B.each(B.expr.match.bool.source.match(/\w+/g),function(e,n){var i=B.expr.attrHandle[n]||B.find.attr;B.expr.attrHandle[n]=function(e,n,r){var o=B.expr.attrHandle[n],s=r?t:(B.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return B.expr.attrHandle[n]=o,s}}),B.support.optSelected||(B.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),B.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){B.propFix[this.toLowerCase()]=this}),B.each(["radio","checkbox"],function(){B.valHooks[this]={set:function(e,n){return B.isArray(n)?e.checked=B.inArray(B(e).val(),n)>=0:t}},B.support.checkOn||(B.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ft=/^key/,dt=/^(?:mouse|contextmenu)|click/,gt=/^(?:focusinfocus|focusoutblur)$/,mt=/^([^.]*)(?:\.(.+)|)$/;B.event={global:{},add:function(e,n,i,r,o){var s,a,c,u,l,h,p,f,d,g,m,v=ot.get(e);if(v){for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=B.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof B===R||e&&B.event.triggered===e.type?t:B.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=(n||"").match(X)||[""],l=n.length;l--;)c=mt.exec(n[l])||[],d=m=c[1],g=(c[2]||"").split(".").sort(),d&&(p=B.event.special[d]||{},d=(o?p.delegateType:p.bindType)||d,p=B.event.special[d]||{},h=B.extend({type:d,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&B.expr.match.needsContext.test(o),namespace:g.join(".")},s),(f=u[d])||(f=u[d]=[],f.delegateCount=0,p.setup&&p.setup.call(e,r,g,a)!==!1||e.addEventListener&&e.addEventListener(d,a,!1)),p.add&&(p.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?f.splice(f.delegateCount++,0,h):f.push(h),B.event.global[d]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,c,u,l,h,p,f,d,g,m=ot.hasData(e)&&ot.get(e);if(m&&(c=m.events)){for(t=(t||"").match(X)||[""],u=t.length;u--;)if(a=mt.exec(t[u])||[],f=g=a[1],d=(a[2]||"").split(".").sort(),f){for(h=B.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,p=c[f]||[],a=a[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)l=p[o],!r&&g!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,h.remove&&h.remove.call(e,l));s&&!p.length&&(h.teardown&&h.teardown.call(e,d,m.handle)!==!1||B.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)B.event.remove(e,f+t[u],n,i,!0);B.isEmptyObject(c)&&(delete m.handle,ot.remove(e,"events"))}},trigger:function(n,i,r,o){var s,a,c,u,l,h,p,f=[r||A],d=F.call(n,"type")?n.type:n,g=F.call(n,"namespace")?n.namespace.split("."):[];if(a=c=r=r||A,3!==r.nodeType&&8!==r.nodeType&&!gt.test(d+B.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),l=0>d.indexOf(":")&&"on"+d,n=n[B.expando]?n:new B.Event(d,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:B.makeArray(i,[n]),p=B.event.special[d]||{},o||!p.trigger||p.trigger.apply(r,i)!==!1)){if(!o&&!p.noBubble&&!B.isWindow(r)){for(u=p.delegateType||d,gt.test(u+d)||(a=a.parentNode);a;a=a.parentNode)f.push(a),c=a;c===(r.ownerDocument||A)&&f.push(c.defaultView||c.parentWindow||e)}for(s=0;(a=f[s++])&&!n.isPropagationStopped();)n.type=s>1?u:p.bindType||d,h=(ot.get(a,"events")||{})[n.type]&&ot.get(a,"handle"),h&&h.apply(a,i),h=l&&a[l],h&&B.acceptData(a)&&h.apply&&h.apply(a,i)===!1&&n.preventDefault();return n.type=d,o||n.isDefaultPrevented()||p._default&&p._default.apply(f.pop(),i)!==!1||!B.acceptData(r)||l&&B.isFunction(r[d])&&!B.isWindow(r)&&(c=r[l],c&&(r[l]=null),B.event.triggered=d,r[d](),B.event.triggered=t,c&&(r[l]=c)),n.result}},dispatch:function(e){e=B.event.fix(e);var n,i,r,o,s,a=[],c=$.call(arguments),u=(ot.get(this,"events")||{})[e.type]||[],l=B.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=B.event.handlers.call(this,e,u),n=0;(o=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((B.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,c),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,s,a=[],c=n.delegateCount,u=e.target;if(c&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],i=0;c>i;i++)s=n[i],o=s.selector+" ",r[o]===t&&(r[o]=s.needsContext?B(o,this).index(u)>=0:B.find(o,this,null,[u]).length),r[o]&&r.push(s);r.length&&a.push({elem:u,handlers:r})}return n.length>c&&a.push({elem:this,handlers:n.slice(c)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||A,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[B.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=dt.test(r)?this.mouseHooks:ft.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new B.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=A),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):t},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&B.nodeName(this,"input")?(this.click(),!1):t},_default:function(e){return B.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=B.extend(new B.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?B.event.trigger(r,null,t):B.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},B.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},B.Event=function(e,n){return this instanceof B.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?s:a):this.type=e,n&&B.extend(this,n),this.timeStamp=e&&e.timeStamp||B.now(),this[B.expando]=!0,t):new B.Event(e,n)},B.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){B.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!B.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){B.event.simulate(t,e.target,B.event.fix(e),!0)};B.event.special[t]={setup:function(){0===n++&&A.addEventListener(e,i,!0)},teardown:function(){0===--n&&A.removeEventListener(e,i,!0)}}}),B.fn.extend({on:function(e,n,i,r,o){var s,c;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(c in e)this.on(c,n,i,e[c],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=a;else if(!r)return this;return 1===o&&(s=r,r=function(e){return B().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=B.guid++)),this.each(function(){B.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,B(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=a),this.each(function(){B.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){B.event.trigger(e,t,this)})},triggerHandler:function(e,n){var i=this[0];return i?B.event.trigger(e,n,i,!0):t}});var vt=/^.[^:#\[\.,]*$/,yt=/^(?:parents|prev(?:Until|All))/,bt=B.expr.match.needsContext,wt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(B(e).filter(function(){for(t=0;r>t;t++)if(B.contains(i[t],this))return!0}));for(t=0;r>t;t++)B.find(e,i[t],n);return n=this.pushStack(r>1?B.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=B(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(B.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(l(this,e||[],!0))},filter:function(e){return this.pushStack(l(this,e||[],!1))},is:function(e){return!!l(this,"string"==typeof e&&bt.test(e)?B(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=bt.test(e)||"string"!=typeof e?B(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&B.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?B.unique(o):o)},index:function(e){return e?"string"==typeof e?L.call(B(e),this[0]):L.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?B(e,t):B.makeArray(e&&e.nodeType?[e]:e),i=B.merge(this.get(),n);return this.pushStack(B.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),B.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B.dir(e,"parentNode")},parentsUntil:function(e,t,n){return B.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return B.dir(e,"nextSibling")},prevAll:function(e){return B.dir(e,"previousSibling")},nextUntil:function(e,t,n){return B.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return B.dir(e,"previousSibling",n)},siblings:function(e){return B.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return B.sibling(e.firstChild)},contents:function(e){return e.contentDocument||B.merge([],e.childNodes)}},function(e,t){B.fn[e]=function(n,i){var r=B.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=B.filter(i,r)),this.length>1&&(wt[e]||B.unique(r),yt.test(e)&&r.reverse()),this.pushStack(r)}}),B.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?B.find.matchesSelector(i,e)?[i]:[]:B.find.matches(e,B.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=i!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&B(e).is(i))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kt=/<([\w:]+)/,_t=/<|&#?\w+;/,Ct=/<(?:script|style|link)/i,Tt=/^(?:checkbox|radio)$/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,St=/^$|\/(?:java|ecma)script/i,Ht=/^true\/(.*)/,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td,B.fn.extend({text:function(e){return B.access(this,function(e){return e===t?B.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?B.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||B.cleanData(m(n)),n.parentNode&&(t&&B.contains(n.ownerDocument,n)&&d(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(B.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return B.clone(this,e,t)})},html:function(e){return B.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!Ct.test(e)&&!Rt[(kt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(xt,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(B.cleanData(m(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=B.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),B(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=V.apply([],e);var i,r,o,s,a,c,u=0,l=this.length,h=this,d=l-1,g=e[0],v=B.isFunction(g);if(v||!(1>=l||"string"!=typeof g||B.support.checkClone)&&Et.test(g))return this.each(function(i){var r=h.eq(i);v&&(e[0]=g.call(this,i,r.html())),r.domManip(e,t,n)});if(l&&(i=B.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=B.map(m(i,"script"),p),s=o.length;l>u;u++)a=i,u!==d&&(a=B.clone(a,!0,!0),s&&B.merge(o,m(a,"script"))),t.call(this[u],a,u);if(s)for(c=o[o.length-1].ownerDocument,B.map(o,f),u=0;s>u;u++)a=o[u],St.test(a.type||"")&&!ot.access(a,"globalEval")&&B.contains(c,a)&&(a.src?B._evalUrl(a.src):B.globalEval(a.textContent.replace(Ot,"")))}return this}}),B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){B.fn[e]=function(e){for(var n,i=[],r=B(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),B(r[s])[t](n),q.apply(i,n.get());return this.pushStack(i)}}),B.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),c=B.contains(e.ownerDocument,e);if(!(B.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||B.isXMLDoc(e)))for(s=m(a),o=m(e),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(t)if(n)for(o=o||m(e),s=s||m(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(e,a);return s=m(a,"script"),s.length>0&&d(s,!c&&m(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,c,u,l=0,h=e.length,p=t.createDocumentFragment(),f=[];h>l;l++)if(r=e[l],r||0===r)if("object"===B.type(r))B.merge(f,r.nodeType?[r]:r);else if(_t.test(r)){for(o=o||p.appendChild(t.createElement("div")),s=(kt.exec(r)||["",""])[1].toLowerCase(),a=Rt[s]||Rt._default,o.innerHTML=a[1]+r.replace(xt,"<$1></$2>")+a[2],u=a[0];u--;)o=o.lastChild;B.merge(f,o.childNodes),o=p.firstChild,o.textContent=""}else f.push(t.createTextNode(r));for(p.textContent="",l=0;r=f[l++];)if((!i||-1===B.inArray(r,i))&&(c=B.contains(r.ownerDocument,r),o=m(p.appendChild(r),"script"),c&&d(o),n))for(u=0;r=o[u++];)St.test(r.type||"")&&n.push(r);return p},cleanData:function(e){for(var n,i,o,s,a,c,u=B.event.special,l=0;(i=e[l])!==t;l++){if(r.accepts(i)&&(a=i[ot.expando],a&&(n=ot.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(c=0;(s=o[c])!==t;c++)u[s]?B.event.remove(i,s):B.removeEvent(i,s,n.handle);ot.cache[a]&&delete ot.cache[a]}delete rt.cache[i[rt.expando]]}},_evalUrl:function(e){return B.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});var At,Mt,Pt=/^(none|table(?!-c[ea]).+)/,It=/^margin/,Dt=RegExp("^("+U+")(.*)$","i"),jt=RegExp("^("+U+")(?!px)[a-z%]+$","i"),Nt=RegExp("^([+-])=("+U+")","i"),Vt={BODY:"block"},qt={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:0,fontWeight:400},Lt=["Top","Right","Bottom","Left"],zt=["Webkit","O","Moz","ms"];B.fn.extend({css:function(e,n){return B.access(this,function(e,n,i){var r,o,s={},a=0;if(B.isArray(n)){for(r=w(e),o=n.length;o>a;a++)s[n[a]]=B.css(e,n[a],!1,r);return s}return i!==t?B.style(e,n,i):B.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){b(this)?B(this).show():B(this).hide()})}}),B.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=At(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,c=B.camelCase(n),u=e.style;return n=B.cssProps[c]||(B.cssProps[c]=y(u,c)),a=B.cssHooks[n]||B.cssHooks[c],i===t?a&&"get"in a&&(o=a.get(e,!1,r))!==t?o:u[n]:(s=typeof i,"string"===s&&(o=Nt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(B.css(e,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||B.cssNumber[c]||(i+="px"),B.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,r))===t||(u[n]=i)),t)}},css:function(e,n,i,r){var o,s,a,c=B.camelCase(n);return n=B.cssProps[c]||(B.cssProps[c]=y(e.style,c)),a=B.cssHooks[n]||B.cssHooks[c],a&&"get"in a&&(o=a.get(e,!0,i)),o===t&&(o=At(e,n,r)),"normal"===o&&n in $t&&(o=$t[n]),""===i||i?(s=parseFloat(o),i===!0||B.isNumeric(s)?s||0:o):o}}),At=function(e,n,i){var r,o,s,a=i||w(e),c=a?a.getPropertyValue(n)||a[n]:t,u=e.style;return a&&(""!==c||B.contains(e.ownerDocument,e)||(c=B.style(e,n)),jt.test(c)&&It.test(n)&&(r=u.width,o=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=c,c=a.width,u.width=r,u.minWidth=o,u.maxWidth=s)),c},B.each(["height","width"],function(e,n){B.cssHooks[n]={get:function(e,i,r){return i?0===e.offsetWidth&&Pt.test(B.css(e,"display"))?B.swap(e,qt,function(){return C(e,n,r)}):C(e,n,r):t},set:function(e,t,i){var r=i&&w(e);return k(e,t,i?_(e,n,i,B.support.boxSizing&&"border-box"===B.css(e,"boxSizing",!1,r),r):0)}}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(e,n){return n?B.swap(e,{display:"inline-block"},At,[e,"marginRight"]):t}}),!B.support.pixelPosition&&B.fn.position&&B.each(["top","left"],function(e,n){B.cssHooks[n]={get:function(e,i){return i?(i=At(e,n),jt.test(i)?B(e).position()[n]+"px":i):t}}})}),B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},B.expr.filters.visible=function(e){return!B.expr.filters.hidden(e)}),B.each({margin:"",padding:"",border:"Width"},function(e,t){B.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Lt[i]+t]=o[i]||o[i-2]||o[0];return r}},It.test(e)||(B.cssHooks[e+t].set=k)});var Ft=/%20/g,Wt=/\[\]$/,Bt=/\r?\n/g,Ut=/^(?:submit|button|image|reset|file)$/i,Xt=/^(?:input|select|textarea|keygen)/i;B.fn.extend({serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=B.prop(this,"elements");return e?B.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!B(this).is(":disabled")&&Xt.test(this.nodeName)&&!Ut.test(e)&&(this.checked||!Tt.test(e))}).map(function(e,t){var n=B(this).val();return null==n?null:B.isArray(n)?B.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),B.param=function(e,n){var i,r=[],o=function(e,t){t=B.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=B.ajaxSettings&&B.ajaxSettings.traditional),B.isArray(e)||e.jquery&&!B.isPlainObject(e))B.each(e,function(){o(this.name,this.value)});else for(i in e)S(i,e[i],n,o);return r.join("&").replace(Ft,"+")},B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){B.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),B.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),B.each({Height:"height",Width:"width"},function(e,n){B.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){B.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return B.access(this,function(n,i,r){var o;return B.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?B.css(n,i,a):B.style(n,i,r,a)},n,s?r:t,s,null)}})}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=B:"function"==typeof define&&define.amd&&define("jquery",[],function(){return B}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=B)}(window),function(){var e,t=this,n=t.Backbone,i=[],r=i.push,o=i.slice,s=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var c=e.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var i=this,r=a.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n)},off:function(e,t,n){var i,r,o,s,c,u,h,p;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:a.keys(this._events),c=0,u=s.length;u>c;c++)if(e=s[c],o=this._events[e]){if(this._events[e]=i=[],t||n)for(h=0,p=o.length;p>h;h++)r=o[h],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&h(n,t),i&&h(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var o in i)i[o].off(t,n,this),r&&delete this._listeners[o];return this}},u=/\s+/,l=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},h=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};a.each(p,function(e,t){c[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=a.uniqueId("l"));return r[o]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),c.bind=c.on,c.unbind=c.off,a.extend(e,c);var f=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,d)),t.parse&&(i=this.parse(i,t)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];a.extend(f.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r,o,s,c,u,l,h;if(null==e)return this;if("object"==typeof e?(r=e,n=t):(r={})[e]=t,n||(n={}),!this._validate(r,n))return!1;o=n.unset,c=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=a.clone(this.attributes),this.changed={}),h=this.attributes,l=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)t=r[i],a.isEqual(h[i],t)||s.push(i),a.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete h[i]:h[i]=t;if(!c){s.length&&(this._pending=!0);for(var p=0,f=s.length;f>p;p++)this.trigger("change:"+s[p],this,h[s[p]],n)}if(u)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in e)a.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},N(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,r,o,s=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var c=this,u=n.success;return n.success=function(e){c.attributes=s;var t=c.parse(e,n);return n.wait&&(t=a.extend(i||{},t)),a.isObject(t)&&!c.set(t,n)?!1:(u&&u(c,e,n),c.trigger("sync",c,e,n),void 0)},N(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(e){e=e?a.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e),t.isNew()||t.trigger("sync",t,r,e)},this.isNew())return e.success(),!1;N(this,e);var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||j();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,a.extend(t||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,c,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},y))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var n,i,r,o;for(n=0,i=e.length;i>n;n++)o=this.get(e[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){t=a.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var n,i,o,c,u,l=t.at,h=this.comparator&&null==l&&t.sort!==!1,p=a.isString(this.comparator)?this.comparator:null,f=[],d=[],g={};
for(n=0,i=e.length;i>n;n++)(o=this._prepareModel(e[n],t))&&((c=this.get(o))?(t.remove&&(g[c.cid]=!0),t.merge&&(c.set(o.attributes,t),h&&!u&&c.hasChanged(p)&&(u=!0))):t.add&&(f.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(t.remove){for(n=0,i=this.length;i>n;++n)g[(o=this.models[n]).cid]||d.push(o);d.length&&this.remove(d,t)}if(f.length&&(h&&(u=!0),this.length+=f.length,null!=l?s.apply(this.models,[l,0].concat(f)):r.apply(this.models,f)),u&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=f.length;i>n;n++)(o=f[n]).trigger("add",o,this,t);return u&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,i,n)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var r=e.reset?"reset":"set";n[r](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(r){t.wait&&n.add(e,t),i&&i(e,r,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(b,function(e){m.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var w=["groupBy","countBy","sortBy"];a.each(w,function(e){m.prototype[e]=function(t,n){var i=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,i,n)}});var x=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(a.isFunction(n)||(n=this[e[t]]),n){var i=t.match(k),r=i[1],o=i[2];n=a.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,_)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var n=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var r=C[t];a.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=a.result(n,"url")||j()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=i.xhr=e.ajax(a.extend(o,i));return n.trigger("request",n,c,i),c};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var T=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,H=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(T.prototype,c,{initialize:function(){},route:function(t,n,i){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return e.history.route(t,function(o){var s=r._extractParameters(t,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),e.history.trigger("route",r,n,s)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(E,"(?:$1)?").replace(S,function(e,t){return t?e:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var R=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,P=/msie [\w.]+/,I=/\/$/;R.started=!1,a.extend(R.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(I,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(A,"")},start:function(t){if(R.started)throw new Error("Backbone.history has already been started");R.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=P.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(M,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),R.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!R.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new R;var D=function(e,t){var n,i=this;n=e&&a.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&a.extend(n.prototype,e),n.__super__=i.prototype,n};f.extend=m.extend=T.extend=x.extend=R.extend=D;var j=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),define("backbone",["lodash","jquery"],function(e){return function(){var t;return t||e.Backbone}}(this)),Backbone.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(Backbone,_),Backbone.Wreqr=function(e,t,n){var i={};return i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,n),i.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},n.isFunction(this.initialize)&&this.initialize(e)};return n.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,i){var r=this.storage.getCommands(e);n.each(r.instances,function(e){t.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,i=e.storageType||this.storageType;t=n.isFunction(i)?new i:i,this.storage=t}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,n),i}(Backbone,Backbone.Marionette,_);var Marionette=function(e,t,n){function i(e){return s.call(e)}function r(e,t){var n=Error(e);throw n.name=t||"Error",n}var o={};t.Marionette=o,o.$=t.$;var s=Array.prototype.slice;return o.extend=t.Model.extend,o.getOption=function(e,t){if(e&&t){var n;return n=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},o.triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi,i=function(i){var r="on"+i.replace(t,e),o=this[r];return this.trigger.apply(this,arguments),n.isFunction(o)?o.apply(this,n.tail(arguments)):void 0};return i}(),o.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,i(e)}function t(e){e._isRendered=!0,i(e)}function i(e){e._isShown&&e._isRendered&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){e(n)}),n.listenTo(n,"render",function(){t(n)})}}(),function(e){function t(e,t,i,o){var s=o.split(/\s+/);n.each(s,function(n){var o=e[n];o||r("Method '"+n+"' was configured as an event handler, but does not exist."),e.listenTo(t,i,o,e)})}function i(e,t,n,i){e.listenTo(t,n,i,e)}function o(e,t,i,r){var o=r.split(/\s+/);n.each(o,function(n){var r=e[n];e.stopListening(t,i,r,e)})}function s(e,t,n,i){e.stopListening(t,n,i,e)}function a(e,t,i,r,o){t&&i&&(n.isFunction(i)&&(i=i.call(e)),n.each(i,function(i,s){n.isFunction(i)?r(e,t,s,i):o(e,t,s,i)}))}e.bindEntityEvents=function(e,n,r){a(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,n){a(e,t,n,s,o)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(n,i){t&&(n=t),e.call(n,i)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.triggerMethod=o.triggerMethod,this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),o.Region=function(e){if(this.options=e||{},this.el=o.getOption(this,"el"),!this.el){var t=Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(o.Region,{buildRegion:function(e,t){var i="string"==typeof e,r="string"==typeof e.selector,o=void 0===e.regionType,s="function"==typeof e;if(!s&&!i&&!r)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var a,c;i&&(a=e),e.selector&&(a=e.selector),s&&(c=e),!s&&o&&(c=t),e.regionType&&(c=e.regionType);var u=new c({el:a});return e.parentEl&&(u.getEl=function(t){var i=e.parentEl;return n.isFunction(i)&&(i=i()),i.find(t)}),u}}),n.extend(o.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||n.isUndefined(e.$el),i=e!==this.currentView;i&&this.close(),e.render(),(i||t)&&this.open(e),this.currentView=e,o.triggerMethod.call(this,"show",e),o.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return o.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),o.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var i={};return n.each(e,function(e,r){"string"==typeof e&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var o=this.addRegion(r,e);i[r]=o},this),i},addRegion:function(t,i){var r,o=n.isObject(i),s=n.isString(i),a=!!i.selector;return r=s||o&&a?e.Region.buildRegion(i,e.Region):n.isFunction(i)?e.Region.buildRegion(i,e.Region):i,this._store(t,r),this.triggerMethod("region:add",t,r),r},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){n.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){n.each(this._regions,function(e){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(e){t.prototype[e]=function(){var t=n.values(this._regions),i=[t].concat(n.toArray(arguments));return n[e].apply(n,i)}}),t}(o),o.TemplateCache=function(e){this.templateId=e},n.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i(arguments),n=t.length;if(n>0)for(e=0;n>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=o.$(e).html();return t&&0!==t.length||r("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return n.template(e)}}),o.Renderer={render:function(e,t){if(!e){var n=Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return i="function"==typeof e?e:o.TemplateCache.get(e),i(t)}},o.View=t.View.extend({constructor:function(){n.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:o.triggerMethod,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=this.templateHelpers;return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=n.result(this,"triggers");return n.each(t,function(t,n){e[n]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,n)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,n.isFunction(e)&&(e=e.call(this));var i={},r=this.configureTriggers();n.extend(i,e,r),t.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),n=o.Renderer.render(t,e);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),n=this.collection.indexOf(e);this.addItemView(e,t,n)},onShowCalled:function(){this.children.each(function(e){o.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getItemView(t),this.addItemView(t,e,n)},this)},showEmptyView:function(){var e=o.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new t.Model;this.addItemView(n,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var e=o.getOption(this,"itemView");return e||r("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,i){var r=o.getOption(this,"itemViewOptions");n.isFunction(r)&&(r=r.call(this,e,i));var s=this.buildItemView(e,t,r);this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,i),this._isShown&&o.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s)},addChildViewEventForwarding:function(e){var t=o.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var n=i(arguments);n[0]=t+":"+n[0],n.splice(1,0,e),o.triggerMethod.apply(this,n)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,i){var r=n.extend({model:e},i);return new t(r)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(e,t){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,i(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var e=o.getOption(this,"itemView")||this.constructor;return e||r("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return o.Renderer.render(t,e)},appendHtml:function(e,t){var n=this.getItemViewContainer(e);n.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t;if(e.itemViewContainer){var i=n.result(e,"itemViewContainer");t=e.$(i),0>=t.length&&r("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.prototype.constructor.call(this,e)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=o.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);o.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var n={};return n[e]=t,this.addRegions(n)[e]},addRegions:function(e){return this.regions=n.extend(this.regions||{},e),this._buildRegions(e)},removeRegion:function(e){return this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,n={parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,n)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),o.AppRouter=t.Router.extend({constructor:function(e){if(t.Router.prototype.constructor.apply(this,i(arguments)),this.options=e,this.appRoutes){var n=o.getOption(this,"controller");this.processAppRoutes(n,this.appRoutes)}},processAppRoutes:function(e,t){var i=n.keys(t).reverse();n.each(i,function(i){var r=t[i],o=e[r];if(!o)throw Error("Method '"+r+"' was not found on the controller");this.route(i,r,n.bind(o,e))},this)}}),o.Application=function(e){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},n.extend(this,e),this.triggerMethod=o.triggerMethod},n.extend(o.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},removeRegion:function(e){this._regionManager.removeRegion(e)},module:function(){var e=i(arguments);return e.unshift(this),o.Module.create.apply(o.Module,e)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e){delete this[e]})}}),o.Application.extend=o.extend,o.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=o.triggerMethod
},n.extend(o.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var r=n.flatten([this,this.app,t,o,o.$,n,i]);e.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),n.extend(o.Module,{create:function(e,t,r){var o=e,s=i(arguments);s.splice(0,3),t=t.split(".");var a=t.length,c=[];return c[a-1]=r,n.each(t,function(t,n){var i=o;o=this._getModule(i,t,e),this._addModuleDefinition(i,o,c[n],s)},this),o},_getModule:function(e,t,n){var i=e[t];return i||(i=new o.Module(t,n),e[t]=i,e.submodules[t]=i),i},_addModuleDefinition:function(e,t,i,r){var o,s;n.isFunction(i)?(o=i,s=!0):n.isObject(i)?(o=i.define,s=i.startWithParent):s=!0,o&&t.addDefinition(o,r),t.startWithParent=t.startWithParent&&s,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o}(this,Backbone,_);define("marionette",["backbone"],function(e){return function(){var t;return t||e.Marionette}}(this)),define("app/core",[],function(){var e=new Marionette.Application;return e.on("initialize:after",function(){Backbone.history.start()}),e.addRegions({body:"#region--body",navigation:"#region--navigation"}),e}),!function(e){if("function"==typeof bootstrap)bootstrap("simplewebrtc",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeSimpleWebRTC=e}else"undefined"!=typeof window?window.SimpleWebRTC=e():global.SimpleWebRTC=e()}(function(){return function(e,t,n){function i(n,o){if(!t[n]){if(!e[n]){var s="function"==typeof require&&require;if(!o&&s)return s(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var a=t[n]={exports:{}};e[n][0].call(a.exports,function(t){var r=e[n][1][t];return i(r?r:t)},a,a.exports)}return t[n].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){function n(e){var t,n,s=this,a=e||{},u=this.config={url:"http://signaling.simplewebrtc.com:8888",debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!0,peerVolumeWhenSpeaking:.25};this.logger=function(){return e.debug?e.logger||console:e.logger||c}();for(t in a)this.config[t]=a[t];this.capabilities=o,r.call(this),n=this.connection=io.connect(this.config.url),n.on("connect",function(){s.emit("connectionReady",n.socket.sessionid),s.sessionReady=!0,s.testReadiness()}),n.on("message",function(e){var t,n=s.webrtc.getPeers(e.from,e.roomType);"offer"===e.type?(t=n.length?n[0]:s.webrtc.createPeer({id:e.from,type:e.roomType,sharemyscreen:"screen"===e.roomType&&!e.broadcaster}),t.handleMessage(e)):n.length&&n.forEach(function(t){t.handleMessage(e)})}),n.on("remove",function(e){e.id!==s.connection.socket.sessionid&&s.webrtc.removePeers(e.id,e.type)}),e.logger=this.logger,e.debug=!1,this.webrtc=new i(e),["mute","unmute","pause","resume"].forEach(function(e){s[e]=s.webrtc[e].bind(s.webrtc)}),this.webrtc.on("*",function(){s.emit.apply(s,arguments)}),u.debug&&this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:")),this.webrtc.on("localStream",function(){s.testReadiness()}),this.webrtc.on("message",function(e){s.connection.emit("message",e)}),this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this)),this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this)),this.config.adjustPeerVolume&&(this.webrtc.on("speaking",this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1))),this.config.autoRequestMedia&&this.startLocalVideo()}var i=e("webrtc"),r=e("wildemitter"),o=e("webrtcsupport"),s=e("attachmediastream"),a=e("getscreenmedia"),c=e("mockconsole");n.prototype=Object.create(r.prototype,{constructor:{value:n}}),n.prototype.leaveRoom=function(){this.roomName&&(this.connection.emit("leave",this.roomName),this.webrtc.peers.forEach(function(e){e.end()}),this.getLocalScreen()&&this.stopScreenShare(),this.emit("leftRoom",this.roomName))},n.prototype.handlePeerStreamAdded=function(e){var t=this.getRemoteVideoContainer(),n=s(e.stream);e.videoEl=n,n.id=this.getDomId(e),t&&t.appendChild(n),this.emit("videoAdded",n,e)},n.prototype.handlePeerStreamRemoved=function(e){var t=this.getRemoteVideoContainer(),n=e.videoEl;this.config.autoRemoveVideos&&t&&n&&t.removeChild(n),n&&this.emit("videoRemoved",n,e)},n.prototype.getDomId=function(e){return[e.id,e.type,e.broadcaster?"broadcasting":"incoming"].join("_")},n.prototype.setVolumeForAll=function(e){this.webrtc.peers.forEach(function(t){t.videoEl&&(t.videoEl.volume=e)})},n.prototype.joinRoom=function(e,t){var n=this;this.roomName=e,this.connection.emit("join",e,function(i,r){if(i)n.emit("error",i);else{var o,s,a,c;for(o in r.clients){s=r.clients[o];for(a in s)s[a]&&(c=n.webrtc.createPeer({id:o,type:a}),c.start())}}t&&t(i,r),n.emit("joinedRoom",e)})},n.prototype.getEl=function(e){return"string"==typeof e?document.getElementById(e):e},n.prototype.startLocalVideo=function(){var e=this;this.webrtc.startLocalMedia(null,function(t,n){t?e.emit(t):s(n,e.getLocalVideoContainer(),{muted:!0,mirror:!0})})},n.prototype.stopLocalVideo=function(){this.webrtc.stopLocalMedia()},n.prototype.getLocalVideoContainer=function(){var e=this.getEl(this.config.localVideoEl);if(e&&"VIDEO"===e.tagName)return e;if(e){var t=document.createElement("video");return e.appendChild(t),t}},n.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)},n.prototype.shareScreen=function(e){var t=this;a(function(n,i){var r=document.createElement("video"),o=t.getRemoteVideoContainer();n?t.emit(n):(t.webrtc.localScreen=i,r.id="localScreen",s(i,r),o&&o.appendChild(r),t.emit("localScreenAdded",r),t.connection.emit("shareScreen"),t.webrtc.peers.forEach(function(e){var n;"video"===e.type&&(n=t.webrtc.createPeer({id:e.id,type:"screen",sharemyscreen:!0,broadcaster:t.connection.socket.sessionid}),n.start())})),e&&e(n,i)})},n.prototype.getLocalScreen=function(){return this.webrtc.localScreen},n.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var e=document.getElementById("localScreen"),t=this.getRemoteVideoContainer(),n=this.getLocalScreen();this.config.autoRemoveVideos&&t&&e&&t.removeChild(e),e&&this.emit("videoRemoved",e),n&&n.stop(),this.webrtc.peers.forEach(function(e){e.broadcaster&&e.end()}),delete this.webrtc.localScreen},n.prototype.testReadiness=function(){var e=this;this.webrtc.localStream&&this.sessionReady&&setTimeout(function(){e.emit("readyToCall",e.connection.socket.sessionid)},1e3)},n.prototype.createRoom=function(e,t){2===arguments.length?this.connection.emit("create",e,t):this.connection.emit("create",e)},n.prototype.sendFile=function(){return o.dataChannel?void 0:this.emit("error",new Error("DataChannelNotSupported"))},t.exports=n},{attachmediastream:4,getscreenmedia:6,mockconsole:7,webrtc:2,webrtcsupport:5,wildemitter:3}],3:[function(e,t){function n(){this.callbacks={}}t.exports=n,n.prototype.on=function(e){var t=3===arguments.length,n=t?arguments[1]:void 0,i=t?arguments[2]:arguments[1];return i._groupName=n,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},n.prototype.once=function(e){function t(){n.off(e,t),o.apply(this,arguments)}var n=this,i=3===arguments.length,r=i?arguments[1]:void 0,o=i?arguments[2]:arguments[1];return this.on(e,r,t),this},n.prototype.releaseGroup=function(e){var t,n,i,r;for(t in this.callbacks)for(r=this.callbacks[t],n=0,i=r.length;i>n;n++)r[n]._groupName===e&&(r.splice(n,1),n--,i--);return this},n.prototype.off=function(e,t){var n,i=this.callbacks[e];return i?1===arguments.length?(delete this.callbacks[e],this):(n=i.indexOf(t),i.splice(n,1),this):this},n.prototype.emit=function(e){var t,n,i=[].slice.call(arguments,1),r=this.callbacks[e],o=this.getWildcardCallbacks(e);if(r)for(t=0,n=r.length;n>t&&r[t];++t)r[t].apply(this,i);if(o)for(t=0,n=o.length;n>t&&o[t];++t)o[t].apply(this,[e].concat(i));return this},n.prototype.getWildcardCallbacks=function(e){var t,n,i=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[1].length)===n[1])&&(i=i.concat(this.callbacks[t]));return i}},{}],4:[function(e,t){t.exports=function(e,t,n){var i,r=window.URL,o={autoplay:!0,mirror:!1,muted:!1},s=t||document.createElement("video");if(n)for(i in n)o[i]=n[i];if(o.autoplay&&(s.autoplay="autoplay"),o.muted&&(s.muted=!0),o.mirror&&["","moz","webkit","o","ms"].forEach(function(e){var t=e?e+"Transform":"transform";s.style[t]="scaleX(-1)"}),r&&r.createObjectURL)s.src=r.createObjectURL(e);else if(s.srcObject)s.srcObject=e;else{if(!s.mozSrcObject)return!1;s.mozSrcObject=e}return s}},{}],5:[function(e,t){var n,i=!1,r=!1,o=navigator.userAgent.toLowerCase();-1!==o.indexOf("firefox")?(n="moz",r=!0):-1!==o.indexOf("chrome")&&(n="webkit",i=!0);var s=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,c=window.mozRTCSessionDescription||window.RTCSessionDescription,u=window.webkitMediaStream||window.MediaStream,l=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,h=window.webkitAudioContext||window.AudioContext;t.exports={support:!!s,dataChannel:i||r||s.prototype&&s.prototype.createDataChannel,prefix:n,webAudio:!(!h||!h.prototype.createMediaStreamSource),mediaStream:!(!u||!u.prototype.removeTrack),screenSharing:!!l,AudioContext:h,PeerConnection:s,SessionDescription:c,IceCandidate:a}},{}],7:[function(e,t){for(var n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=n.length,r=function(){},o={};i--;)o[n[i]]=r;t.exports=o},{}],6:[function(e,t){var n=e("getusermedia");t.exports=function(e){var t,i={video:{mandatory:{chromeMediaSource:"screen"}}};return"http:"===window.location.protocol?(t=new Error("NavigatorUserMediaError"),t.name="HTTPS_REQUIRED",e(t)):(n(i,e),void 0)}},{getusermedia:8}],9:[function(e,t){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t.exports=function(e,t){var i,r=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return r||(t=e,e=o),n?(n.call(navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("NavigatorUserMediaError"),n.name=e===s?s:a):(n=e,n.name||(e.name=n[s]?s:a)),t(n)}),void 0):(i=new Error("NavigatorUserMediaError"),i.name="NOT_SUPPORTED_ERROR",t(i))}},{}],8:[function(e,t){var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;t.exports=function(e,t){var i,r=2===arguments.length,o={video:!0,audio:!0},s="PERMISSION_DENIED",a="CONSTRAINT_NOT_SATISFIED";return r||(t=e,e=o),n?(n.call(navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("NavigatorUserMediaError"),n.name=e===s?s:a):(n=e,n.name||(e.name=n[s]?s:a)),t(n)}),void 0):(i=new Error("NavigatorUserMediaError"),i.name="NOT_SUPPORTED_ERROR",t(i))}},{}],2:[function(e,t){function n(e){var t=this,n=e||{};this.config={debug:!1,localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,peerConnectionConfig:{iceServers:[{url:"stun:stun.l.google.com:19302"}]},peerConnectionContraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!0}]},autoAdjustMic:!1,media:{audio:!0,video:!0},detectSpeakingEvents:!0,enableDataChannels:!0};var i;this.screenSharingSupport=r.screenSharing,this.logger=function(){return e.debug?e.logger||console:e.logger||l}();for(i in n)this.config[i]=n[i];r.support||this.logger.error("Your browser doesn't seem to support WebRTC"),this.peers=[],a.call(this),this.config.debug&&this.on("*",function(e,n,i){var r;r=t.config.logger===l?console:t.logger,r.log("event:",e,n,i)})}function i(e){var t=this;if(this.id=e.id,this.parent=e.parent,this.type=e.type||"video",this.oneway=e.oneway||!1,this.sharemyscreen=e.sharemyscreen||!1,this.browserPrefix=e.prefix,this.stream=e.stream,this.channels={},this.pc=new s(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionContraints),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this)),this.pc.on("addChannel",this.handleDataChannelAdded.bind(this)),this.pc.on("removeStream",this.handleStreamRemoved.bind(this)),this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded")),this.logger=this.parent.logger,"screen"===e.type?this.parent.localScreen&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreen),this.broadcaster=e.broadcaster):this.pc.addStream(this.parent.localStream),this.parent.config.enableDataChannels&&r.dataChannel){try{if(this.reliableChannel=this.getDataChannel("reliable",{reliable:!0}),!this.reliableChannel.reliable)throw Error("Failed to make reliable channel")}catch(n){this.logger.warn("Failed to create reliable data channel."),this.reliableChannel=!1,delete this.channels.reliable}try{if(this.unreliableChannel=this.getDataChannel("unreliable",{reliable:!1,preset:!0}),this.unreliableChannel.unreliable!==!1)throw Error("Failed to make unreliable channel")}catch(n){this.logger.warn("Failed to create unreliable data channel."),this.unreliableChannel=!1,delete this.channels.unreliableChannel}}a.call(this),this.on("*",function(){t.parent.emit.apply(t.parent,arguments)})}var r=e("webrtcsupport"),o=e("getusermedia"),s=e("rtcpeerconnection"),a=e("wildemitter"),c=e("hark"),u=e("mediastream-gain"),l=e("mockconsole");n.prototype=Object.create(a.prototype,{constructor:{value:n}}),n.prototype.createPeer=function(e){var t;return e.parent=this,t=new i(e),this.peers.push(t),t},n.prototype.startLocalMedia=function(e,t){var n=this,i=e||{video:!0,audio:!0};o(i,function(e,r){e||(i.audio&&n.config.detectSpeakingEvents&&n.setupAudioMonitor(r),n.localStream=r,n.config.autoAdjustMic&&(n.gainController=new u(r),n.setMicIfEnabled(.5)),n.emit("localStream",r)),t&&t(e,r)})},n.prototype.stopLocalMedia=function(){this.localStream&&(this.localStream.stop(),this.emit("localStreamStopped"))},n.prototype.mute=function(){this._audioEnabled(!1),this.hardMuted=!0,this.emit("audioOff")},n.prototype.unmute=function(){this._audioEnabled(!0),this.hardMuted=!1,this.emit("audioOn")},n.prototype.setupAudioMonitor=function(e){this.logger.log("Setup audio");var t,n=c(e),i=this;n.on("speaking",function(){i.hardMuted||(i.setMicIfEnabled(1),i.sendToAll("speaking",{}),i.emit("speaking"))}),n.on("stopped_speaking",function(){i.hardMuted||(t&&clearTimeout(t),t=setTimeout(function(){i.setMicIfEnabled(.5),i.sendToAll("stopped_speaking",{}),i.emit("stoppedSpeaking")},1e3))})},n.prototype.setMicIfEnabled=function(e){this.config.autoAdjustMic&&this.gainController.setGain(e)},n.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},n.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},n.prototype.pause=function(){this._audioEnabled(!1),this.pauseVideo()},n.prototype.resume=function(){this._audioEnabled(!0),this.resumeVideo()},n.prototype._audioEnabled=function(e){this.setMicIfEnabled(e?1:0),this.localStream.getAudioTracks().forEach(function(t){t.enabled=!!e})},n.prototype._videoEnabled=function(e){this.localStream.getVideoTracks().forEach(function(t){t.enabled=!!e})},n.prototype.removePeers=function(e,t){this.getPeers(e,t).forEach(function(e){e.end()})},n.prototype.getPeers=function(e,t){return this.peers.filter(function(n){return!(e&&n.id!==e||t&&n.type!==t)})},n.prototype.sendToAll=function(e,t){this.peers.forEach(function(n){n.send(e,t)})},i.prototype=Object.create(a.prototype,{constructor:{value:i}}),i.prototype.handleMessage=function(e){var t=this;this.logger.log("getting",e.type,e),e.prefix&&(this.browserPrefix=e.prefix),"offer"===e.type?this.pc.answer(e.payload,function(e,n){t.send("answer",n)}):"answer"===e.type?this.pc.handleAnswer(e.payload):"candidate"===e.type?this.pc.processIce(e.payload):"speaking"===e.type?this.parent.emit("speaking",{id:e.from}):"stopped_speaking"===e.type&&this.parent.emit("stopped_speaking",{id:e.from})},i.prototype.send=function(e,t){var n={to:this.id,broadcaster:this.broadcaster,roomType:this.type,type:e,payload:t,prefix:r.prefix};this.logger.log("sending",e,n),this.parent.emit("message",n)},i.prototype._observeDataChannel=function(e){var t=this;e.onclose=this.emit.bind(this,"channelClose",e),e.onerror=this.emit.bind(this,"channelError",e),e.onmessage=function(n){t.emit("message",e.label,n.data,e,n)},e.onopen=this.emit.bind(this,"channelOpen",e)},i.prototype.getDataChannel=function(e,t){if(!r.dataChannel)return this.emit("error",new Error("createDataChannel not supported"));var n=this.channels[e];return t||(t={}),n?n:(n=this.channels[e]=this.pc.createDataChannel(e,t),this._observeDataChannel(n),n)},i.prototype.onIceCandidate=function(e){this.closed||(e?this.send("candidate",e):this.logger.log("End of candidates."))},i.prototype.start=function(){var e=this;this.pc.offer(function(t,n){e.send("offer",n)})},i.prototype.end=function(){this.pc.close(),this.handleStreamRemoved()},i.prototype.handleRemoteStreamAdded=function(e){this.stream?this.logger.warn("Already have a remote stream"):(this.stream=e.stream,this.parent.emit("peerStreamAdded",this))},i.prototype.handleStreamRemoved=function(){this.parent.peers.splice(this.parent.peers.indexOf(this),1),this.closed=!0,this.parent.emit("peerStreamRemoved",this)},i.prototype.handleDataChannelAdded=function(e){this.channels[e.name]=e},t.exports=n},{getusermedia:9,hark:12,"mediastream-gain":11,mockconsole:7,rtcpeerconnection:10,webrtcsupport:5,wildemitter:3}],11:[function(e,t){function n(e){if(this.support=i.webAudio&&i.mediaStream,this.gain=1,this.support){var t=this.context=new i.AudioContext;this.microphone=t.createMediaStreamSource(e),this.gainFilter=t.createGain(),this.destination=t.createMediaStreamDestination(),this.outputStream=this.destination.stream,this.microphone.connect(this.gainFilter),this.gainFilter.connect(this.destination),e.removeTrack(e.getAudioTracks()[0]),e.addTrack(this.outputStream.getAudioTracks()[0])}this.stream=e}var i=e("webrtcsupport");n.prototype.setGain=function(e){this.support&&(this.gainFilter.gain.value=e,this.gain=e)},n.prototype.getGain=function(){return this.gain},n.prototype.off=function(){return this.setGain(0)},n.prototype.on=function(){this.setGain(1)},t.exports=n},{webrtcsupport:13}],13:[function(e,t){var n=window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection,i=window.mozRTCIceCandidate||window.RTCIceCandidate,r=window.mozRTCSessionDescription||window.RTCSessionDescription,o=function(){return window.mozRTCPeerConnection?"moz":window.webkitRTCPeerConnection?"webkit":void 0}(),s=window.webkitMediaStream||window.MediaStream,a=navigator.userAgent.match("Chrome")&&parseInt(navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,c=window.webkitAudioContext||window.AudioContext;t.exports={support:!!n,dataChannel:!!(n&&n.prototype&&n.prototype.createDataChannel),prefix:o,webAudio:!(!c||!c.prototype.createMediaStreamSource),mediaStream:!(!s||!s.prototype.removeTrack),screenSharing:a,AudioContext:c,PeerConnection:n,SessionDescription:r,IceCandidate:i}},{}],10:[function(e,t){function n(e,t){var n;this.pc=new r.PeerConnection(e,t),i.call(this),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onaddstream=this._onAddStream.bind(this),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.config={debug:!1,sdpHack:!0};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){var t=e.logger||console;t.log("PeerConnection event:",arguments)})}var i=e("wildemitter"),r=e("webrtcsupport");n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},n.prototype.processIce=function(e){this.pc.addIceCandidate(new r.IceCandidate(e))},n.prototype.offer=function(e,t){var n=this,i=2===arguments.length,r=i?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=i?t:e;this.pc.createOffer(function(e){e.sdp=n._applySdpHack(e.sdp),n.pc.setLocalDescription(e),n.emit("offer",e),o&&o(null,e)},function(e){n.emit("error",e),o&&o(e)},r)},n.prototype.answerAudioOnly=function(e,t){var n={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(e,n,t)},n.prototype.answerBroadcastOnly=function(e,t){var n={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(e,n,t)},n.prototype.answer=function(e,t,n){var i=3===arguments.length,r=i?n:t,o=i?t:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(e,o,r)},n.prototype.handleAnswer=function(e){this.pc.setRemoteDescription(new r.SessionDescription(e))},n.prototype.close=function(){this.pc.close(),this.emit("close")},n.prototype._answer=function(e,t,n){var i=this;this.pc.setRemoteDescription(new r.SessionDescription(e)),this.pc.createAnswer(function(e){e.sdp=i._applySdpHack(e.sdp),i.pc.setLocalDescription(e),i.emit("answer",e),n&&n(null,e)},function(e){i.emit("error",e),n&&n(e)},t)},n.prototype._onIce=function(e){e.candidate?this.emit("ice",e.candidate):this.emit("endOfCandidates")},n.prototype._onDataChannel=function(e){this.emit("addChannel",e.channel)},n.prototype._onAddStream=function(e){this.remoteStream=e.stream,this.emit("addStream",e)},n.prototype._applySdpHack=function(e){if(!this.config.sdpHack)return e;var t=e.split("b=AS:30");return 2===t.length?t[0]+"b=AS:102400"+t[1]:e},n.prototype.createDataChannel=function(e,t){t||(t={});var n,i,o=!!t.reliable,s=t.protocol||"text/plain",a=!(!t.negotiated&&!t.preset);return"moz"===r.prefix?(n=o?{protocol:s,preset:a,stream:e}:{},i=this.pc.createDataChannel(e,n),i.binaryType="blob"):(n=o?{reliable:!0}:{reliable:!1},i=this.pc.createDataChannel(e,n)),i},t.exports=n},{webrtcsupport:5,wildemitter:3}],12:[function(e,t){function n(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var i=0,r=t.length;r>i;i++)t[i]>n&&t[i]<0&&(n=t[i]);return n}var i=e("wildemitter");t.exports=function(e,t){var r=new i;if(!window.webkitAudioContext)return r;var o,s,a,t=t||{},c=t.smoothing||.5,u=t.interval||100,l=t.threshold,h=t.play,p=new webkitAudioContext;a=p.createAnalyser(),a.fftSize=512,a.smoothingTimeConstant=c,s=new Float32Array(a.fftSize),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement?(o=p.createMediaElementSource(e),"undefined"==typeof h&&(h=!0),l=l||-65):(o=p.createMediaStreamSource(e),l=l||-45),o.connect(a),h&&a.connect(p.destination),r.speaking=!1,r.setThreshold=function(e){l=e},r.setInterval=function(e){u=e};var f=function(){setTimeout(function(){var e=n(a,s);r.emit("volume_change",e,l),e>l?r.speaking||(r.speaking=!0,r.emit("speaking")):r.speaking&&(r.speaking=!1,r.emit("stopped_speaking")),f()},u)};return f(),r}},{wildemitter:3}]},{},[1])(1)});var io="undefined"==typeof module?{}:module.exports;!function(){!function(e,t){var n=e;n.version="0.9.11",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,i){var r,o,s=n.util.parseUri(e);t&&t.location&&(s.protocol=s.protocol||t.location.protocol.slice(0,-1),s.host=s.host||(t.document?t.document.domain:t.location.hostname),s.port=s.port||t.location.port),r=n.util.uniqueUri(s);var a={host:s.host,secure:"https"==s.protocol,port:s.port||("https"==s.protocol?443:80),query:s.query||""};return n.util.merge(a,i),(a["force new connection"]||!n.sockets[r])&&(o=new n.Socket(a)),!a["force new connection"]&&o&&(n.sockets[r]=o),o=o||n.sockets[r],o.of(s.path.length>1?s.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=i.exec(e||""),n={},o=14;o--;)n[r[o]]=t[o]||"";return n},n.uniqueUri=function(e){var n=e.protocol,i=e.host,r=e.port;return"document"in t?(i=i||document.domain,r=r||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(i=i||"localhost",r||"https"!=n||(r=443)),(n||"http")+"://"+i+":"+(r||80)},n.query=function(e,t){var i=n.chunkQuery(e||""),r=[];n.merge(i,n.chunkQuery(t||""));for(var o in i)i.hasOwnProperty(o)&&r.push(o+"="+i[o]);return r.length?"?"+r.join("&"):""},n.chunkQuery=function(e){for(var t,n={},i=e.split("&"),r=0,o=i.length;o>r;++r)t=i[r].split("="),t[0]&&(n[t[0]]=t[1]);return n};var o=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||o?e():(n.on(t,"load",e,!1),void 0)},n.on=function(e,t,n,i){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,i)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){o=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?(n.load(function(){setTimeout(e,100)}),void 0):e()},n.merge=function(e,t,i,r){var o,s=r||[],a="undefined"==typeof i?2:i;for(o in t)t.hasOwnProperty(o)&&n.indexOf(s,o)<0&&("object"==typeof e[o]&&a?n.merge(e[o],t[o],a-1,s):(e[o]=t[o],s.push(t[o])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var i=[],r=e.length>t.length?e:t,o=e.length>t.length?t:e,s=0,a=o.length;a>s;s++)~n.indexOf(r,o[s])&&i.push(o[s]);return i},n.indexOf=function(e,t,n){for(var i=e.length,n=0>n?0>n+i?0:n+i:n||0;i>n&&e[n]!==t;n++);return n>=i?-1:n},n.toArray=function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){i.removeListener(e,n),t.apply(this,arguments)}var i=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var i=this.$events[e];if(t.util.isArray(i)){for(var r=-1,o=0,s=i.length;s>o;o++)if(i[o]===n||i[o].listener&&i[o].listener===n){r=o;break}if(0>r)return this;i.splice(r,1),i.length||delete this.$events[e]}else(i===n||i.listener&&i.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var i=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,i);else{if(!t.util.isArray(n))return!1;for(var r=n.slice(),o=0,s=r.length;s>o;o++)r[o].apply(this,i)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,s,a=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)s[n]=str(n,c)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,c),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},i=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],r=n.reasons=["transport not supported","client not handshaken","unauthorized"],o=n.advice=["reconnect"],s=t.JSON,a=t.util.indexOf;
n.encodePacket=function(e){var t=a(i,e.type),n=e.id||"",c=e.endpoint||"",u=e.ack,l=null;switch(e.type){case"error":var h=e.reason?a(r,e.reason):"",p=e.advice?a(o,e.advice):"";(""!==h||""!==p)&&(l=h+(""!==p?"+"+p:""));break;case"message":""!==e.data&&(l=e.data);break;case"event":var f={name:e.name};e.args&&e.args.length&&(f.args=e.args),l=s.stringify(f);break;case"json":l=s.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+s.stringify(e.args):"")}var d=[t,n+("data"==u?"+":""),c];return null!==l&&void 0!==l&&d.push(l),d.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,i=e.length;i>n;n++){var r=e[n];t+="�"+r.length+"�"+e[n]}return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(c);if(!t)return{};var n=t[2]||"",e=t[5]||"",a={type:i[t[1]],endpoint:t[4]||""};switch(n&&(a.id=n,a.ack=t[3]?"data":!0),a.type){case"error":var t=e.split("+");a.reason=r[t[0]]||"",a.advice=o[t[1]]||"";break;case"message":a.data=e||"";break;case"event":try{var u=s.parse(e);a.name=u.name,a.args=u.args}catch(l){}a.args=a.args||[];break;case"json":try{a.data=s.parse(e)}catch(l){}break;case"connect":a.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(a.ackId=t[1],a.args=[],t[3]))try{a.args=t[3]?s.parse(t[3]):[]}catch(l){}break;case"disconnect":case"heartbeat":}return a},n.decodePayload=function(e){if("�"==e.charAt(0)){for(var t=[],i=1,r="";i<e.length;i++)"�"==e.charAt(i)?(t.push(n.decodePacket(e.substr(i+1).substr(0,r))),i+=Number(r)+1,r=""):r+=e.charAt(i);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var i=0,r=n.length;r>i;i++)this.onPacket(n[i])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function i(e){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var i=this;t.util.on(n,"beforeunload",function(){i.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function r(){}e.Socket=i,t.util.mixin(i,t.EventEmitter),i.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},i.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},i.prototype.handshake=function(e){function n(t){t instanceof Error?(i.connecting=!1,i.onError(t.message)):e.apply(null,t.split(":"))}var i=this,o=this.options,s=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var a=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=s+"&jsonp="+t.j.length,a.parentNode.insertBefore(c,a),t.j.push(function(e){n(e),c.parentNode.removeChild(c)})}else{var u=t.util.request();u.open("GET",s,!0),this.isXDomain()&&(u.withCredentials=!0),u.onreadystatechange=function(){4==u.readyState&&(u.onreadystatechange=r,200==u.status?n(u.responseText):403==u.status?i.onError(u.responseText):(i.connecting=!1,!i.reconnecting&&i.onError(u.responseText)))},u.send(null)}},i.prototype.getTransport=function(e){for(var n,i=e||this.transports,r=0;n=i[r];r++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this)))return new t.Transport[n](this,this.sessionid);return null},i.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake(function(i,r,o,s){function a(e){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),n.transport?(n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){for(var e=n.transports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?a(e):n.publish("connect_failed")}},n.options["connect timeout"]))}),void 0):n.publish("connect_failed")}n.sessionid=i,n.closeTimeout=1e3*o,n.heartbeatTimeout=1e3*r,n.transports||(n.transports=n.origTransports=s?t.util.intersect(s.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),a(n.transports),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},i.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)}},i.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},i.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},i.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},i.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},i.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},i.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},i.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},i.prototype.onOpen=function(){this.open=!0},i.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},i.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},i.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},i.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},i.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer),n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=r}function t(){return n.reconnecting?n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):(n.reconnectionAttempts++>=i?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transports=n.origTransports,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<o&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay)),void 0):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,i=this.options["max reconnection attempts"],r=this.options["try multiple transports"],o=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new i(this,"json"),this.ackPackets=0,this.acks={}}function i(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],i={type:"event",name:e};return"function"==typeof n&&(i.id=++this.ackPackets,i.ack="data",this.acks[i.id]=n,t=t.slice(0,t.length-1)),i.args=t,this.packet(i)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){i.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var i=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var r=["message",e.data];"data"==e.ack?r.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,r);break;case"event":var r=[e.name].concat(e.args);"data"==e.ack&&r.push(n),this.$emit.apply(this,r);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},i.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},i.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function i(){t.Transport.apply(this,arguments)}e.websocket=i,t.util.inherit(i,t.Transport),i.prototype.name="websocket",i.prototype.open=function(){var e,i=t.util.query(this.socket.options.query),r=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+i),this.websocket.onopen=function(){r.onOpen(),r.socket.setBuffer(!1)},this.websocket.onmessage=function(e){r.onData(e.data)},this.websocket.onclose=function(){r.onClose(),r.socket.setBuffer(!0)},this.websocket.onerror=function(e){r.onError(e)},this},i.prototype.send=t.util.ua.iDevice?function(e){var t=this;return setTimeout(function(){t.websocket.send(e)},0),this}:function(e){return this.websocket.send(e),this},i.prototype.payload=function(e){for(var t=0,n=e.length;n>t;t++)this.packet(e[t]);return this},i.prototype.close=function(){return this.websocket.close(),this},i.prototype.onError=function(e){this.socket.onError(e)},i.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},i.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},i.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function r(){}e.XHR=i,t.util.inherit(i,t.Transport),i.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},i.prototype.payload=function(e){for(var n=[],i=0,r=e.length;r>i;i++)n.push(t.parser.encodePacket(e[i]));this.send(t.parser.encodePayload(n))},i.prototype.send=function(e){return this.post(e),this},i.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=r,o.posting=!1,200==this.status?o.socket.setBuffer(!1):o.onClose())}function i(){this.onload=r,o.socket.setBuffer(!1)}var o=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=i:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},i.prototype.close=function(){return this.onClose(),this},i.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),i=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+i,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(r){}return n},i.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},i.check=function(e,i){try{var r=t.util.request(i),o=n.XDomainRequest&&r instanceof XDomainRequest,s=e&&e.options&&e.options.secure?"https:":"http:",a=n.location&&s!=n.location.protocol;if(r&&(!o||!a))return!0}catch(c){}return!1},i.xdomainCheck=function(e){return i.check(e,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,i=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+i,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(i){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(e){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(i){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function i(){t.Transport.XHR.apply(this,arguments)}function r(){}e["xhr-polling"]=i,t.util.inherit(i,t.Transport.XHR),t.util.merge(i,t.Transport.XHR),i.prototype.name="xhr-polling",i.prototype.heartbeats=function(){return!1},i.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},i.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=r,200==this.status?(o.onData(this.responseText),o.get()):o.onClose())}function t(){this.onload=r,this.onerror=r,o.retryCounter=1,o.onData(this.responseText),o.get()}function i(){o.retryCounter++,!o.retryCounter||o.retryCounter>3?o.onClose():o.get()}if(this.isOpen){var o=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=t,this.xhr.onerror=i):this.xhr.onreadystatechange=e,this.xhr.send(null)}},i.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=r;try{this.xhr.abort()}catch(e){}this.xhr=null}},i.prototype.ready=function(e,n){var i=this;t.util.defer(function(){n.call(i)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var e=this;t.j.push(function(t){e._(t)})}var r=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function n(){i(),r.socket.setBuffer(!1)}function i(){r.iframe&&r.form.removeChild(r.iframe);try{s=document.createElement('<iframe name="'+r.iframeId+'">')}catch(e){s=document.createElement("iframe"),s.name=r.iframeId}s.id=r.iframeId,r.form.appendChild(s),r.iframe=s}var r=this,o=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var s,a=document.createElement("form"),c=document.createElement("textarea"),u=this.iframeId="socketio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.display="none",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),c.name="d",a.appendChild(c),document.body.appendChild(a),this.form=a,this.area=c}this.form.action=this.prepareUrl()+o,i(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(l){}this.iframe.attachEvent?s.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),this.script=n,r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.isOpen&&this.get(),this},i.prototype.ready=function(e,n){var i=this;return r?(t.util.load(function(){n.call(i)}),void 0):n.call(this)},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}(),define("vendor/simplewebrtc",function(){}),define("app/connection/models/stream",[],function(){return Backbone.Model.extend({})}),define("app/connection/collections/streams",["../models/stream"],function(e){return Backbone.Collection.extend({model:e})}),define("app/connection/controllers/webrtc",["vendor/simplewebrtc","app/connection/collections/streams"],function(e,t){return Marionette.Controller.extend({initialize:function(){var n=this.collection=new t;this.driver=new e({autoRequestMedia:!0,autoRemoveVideos:!1,localVideoEl:document.createElement("div"),remoteVideosEl:document.createElement("div")}),this.driver.on("readyToCall",this.boot.bind(this)),this.driver.on("videoAdded",this.addVideo.bind(this)),this.driver.on("videoRemoved",this.removeVideo.bind(this)),this.driver.connection.on("message",function(e){this.trigger("message",e),this.trigger("message:"+e.type,e)}.bind(this)),this.driver.on("speaking",function(e){e&&n.get(e.id).set("speaking",!0)}),this.driver.on("stoppedSpeaking",function(e){e&&n.get(e.id).set("speaking",!1)})},localVideo:function(){return this.driver.getEl(this.driver.config.localVideoEl).querySelector("video")},boot:function(e){this.collection.add({id:e,local:!0,videoEl:this.localVideo()}),this.driver.resume(),this.driver.joinRoom(window.location.pathname.slice(1))},addVideo:function(e,t){this.collection.add(t),this.trigger("stream:added")},removeVideo:function(e,t){this.collection.remove(t.id),this.trigger("stream:removed")},send:function(e,t){this.driver.webrtc.sendToAll(e,t)}})}),define("app/connection/core",["app/core","./controllers/webrtc"],function(e,t){var n=e.module("Connection"),i=n.controller=new t;return e.reqres.setHandler("connection:streams",function(){return i.collection}),e.commands.setHandler("connection:mute",function(){i.driver.mute()}),e.commands.setHandler("connection:unmute",function(){i.driver.unmute()}),e.commands.setHandler("connection:pause",function(){i.driver.pause()}),e.commands.setHandler("connection:resume",function(){i.driver.resume()}),n}),define("text",{});var Handlebars={};!function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";e.registerHelper=function(t,i,o){if(n.call(t)===r){if(o||i)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else o&&(i.not=o),this.helpers[t]=i},e.registerPartial=function(t,i){n.call(t)===r?e.Utils.extend(this.partials,t):this.partials[t]=i},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,r){var o=r.inverse||function(){},s=r.fn,a=n.call(t);return a===i&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?o(this):"[object Array]"===a?t.length>0?e.helpers.each(t,r):o(this):s(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var i=e.logger.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,r){var o,s=r.fn,a=r.inverse,c=0,u="",l=n.call(t);if(l===i&&(t=t.call(this)),r.data&&(o=e.createFrame(r.data)),t&&"object"==typeof t)if(t instanceof Array)for(var h=t.length;h>c;c++)o&&(o.index=c),u+=s(t[c],{data:o});else for(var p in t)t.hasOwnProperty(p)&&(o&&(o.key=p),u+=s(t[p],{data:o}),c++);return 0===c&&(u=a(this)),u}),e.registerHelper("if",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?r.inverse(this):r.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),e.Utils.isEmpty(t)?void 0:r.fn(t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)});var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<o.length;t++)this[o[t]]=e[o[t]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,c=/[&<>"'`]/,u=function(e){return s[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":(t=t.toString(),c.test(t)?t.replace(a,u):t)},isEmpty:function(e){return e||0===e?"[object Array]"===n.call(e)&&0===e.length?!0:!1:!0}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var r=this.programs[t];return i?r=e.VM.program(t,n,i):r||(r=this.programs[t]=e.VM.program(t,n)),r},merge:function(t,n){var i=t||n;return t&&n&&(i={},e.Utils.extend(i,n),e.Utils.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=t.call(n,e,i,r.helpers,r.partials,r.data),s=n.compilerInfo||[],a=s[0]||1,c=e.COMPILER_REVISION;if(a!==c){if(c>a){var u=e.REVISION_CHANGES[c],l=e.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r},program:function(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,s,a){var c={helpers:o,partials:s,data:a};if(n===t)throw new e.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,c);if(e.compile)return s[i]=e.compile(n,{data:a!==t}),s[i](r,c);throw new e.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template}(Handlebars),define("Handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),define("hbars",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("hbars!app/navigation/templates/utility",["Handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<nav class="actionbar">\n	<a href="/" class="actionbar__logo">\n		<img src="/images/logo.png" alt="DoppelGanger">\n	</a>\n	<ul class="actionbar__nav">\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--mute">\n				<i class="icon">&#xe602;</i>\n				<i class="visually-hidden">Mute Microphone</i>\n			</a>\n		</li>\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--pause">\n				<i class="icon">&#xe603;</i>\n				<i class="visually-hidden">Pause Video</i>\n			</a>\n		</li>\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--pause">\n				<i class="icon">&#xe600;</i>\n				<i class="visually-hidden">Toggle Chat</i>\n			</a>\n		</li>\n	</ul>\n</nav>'})}),define("app/navigation/views/utility",["app/core","hbars!../templates/utility"],function(e,t){return Marionette.ItemView.extend({template:t,events:{"click 	.actionbar__nav__control--mute":"toggleMute","click 	.actionbar__nav__control--pause":"togglePause"},ui:{mute:".actionbar__nav__control--mute",pause:".actionbar__nav__control--pause"},toggleMute:function(){var t=this.ui.mute.toggleClass("is-active").hasClass("is-active"),n=t?"mute":"unmute";e.execute("connection:"+n)},togglePause:function(){var t=this.ui.pause.toggleClass("is-active").hasClass("is-active"),n=t?"pause":"resume";e.execute("connection:"+n)}})}),define("app/navigation/core",["app/core","./views/utility"],function(e,t){var n=e.module("Navigation");return n.addInitializer(function(){e.navigation.show(new t)}),n}),define("app/scene/views/hexagon",[],function(){return Marionette.ItemView.extend({template:!1,initialize:function(e){this.geometry=e.geometry,this.canvas=e.canvas,this.canvas_ctx=this.canvas.getContext("2d"),this.swap=this.canvas.cloneNode(),this.swap_ctx=this.swap.getContext("2d")},clone:function(){return this.canvas.cloneNode()},isPlaying:function(){return!this.el.paused},erase:function(){this.canvas_ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},updateVideo:function(e,t,n,i){this.swap_ctx.drawImage(this.el,e,t,n,i)},getStrokeMask:_.memoize(function(){var e=this.clone();return this.geometry.draw(e.getContext("2d"),"#205163"),e},function(){return this.geometry.Id}),getFillMask:_.memoize(function(){var e=this.clone();return this.geometry.draw(e.getContext("2d"),!1,"#000"),e},function(){return this.geometry.Id}),applyMask:function(){this.canvas_ctx.drawImage(this.getFillMask(),0,0)},applyVideo:function(){this.canvas_ctx.globalCompositeOperation="source-atop",this.canvas_ctx.drawImage(this.swap,0,0)},applyHighlights:function(){this.canvas_ctx.globalCompositeOperation="lighten",this.canvas_ctx.drawImage(this.getStrokeMask(),0,0)},render:function(){var e=this.serializeData();return this.updateVideo(e.x,e.y,e.width,e.height),this.applyMask(),this.applyVideo(),this.applyHighlights(),this},serializeData:function(){var e=this.model.toJSON(),t=HT.Hexagon.Static.WIDTH,n=HT.Hexagon.Static.HEIGHT,i=t/this.el.videoWidth,r=n/this.el.videoHeight,o=e.scale=Math.max(i,r),s=e.height=this.el.videoHeight*o,a=e.width=this.el.videoWidth*o;return e.x=this.geometry.x-.5*(a-t),e.y=this.geometry.y-.5*(s-n),e}})}),define("hbars!app/scene/templates/honeycomb",["Handlebars"],function(e){return e.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<canvas class="backdrop__layer background"></canvas>\n<canvas class="backdrop__layer middleground"></canvas>\n<canvas class="backdrop__layer foreground"></canvas>'})}),define("app/scene/views/honeycomb",["./hexagon","hbars!../templates/honeycomb"],function(e,t){return Marionette.CompositeView.extend({className:"honeycomb",itemView:e,template:t,ui:{background:".background",middleground:".middleground",foreground:".foreground"},collectionEvents:{add:"videoLoop",remove:"videoLoop"},initialize:function(){$(window).on("resize",this.drawTileMap.bind(this))},allLayers:function(){return this.$(".backdrop__layer")},buildItemView:function(e,t,n){var i=45*this.children.length,r=this.grid.nearestHexFromCenter(this.$el.width(),this.$el.height(),i),o=_.extend({el:e.get("videoEl"),canvas:this.ui.foreground[0].cloneNode(),geometry:r,model:e},n);return new t(o)},appendHtml:function(){},draw:function(){var e=this.getContext("foreground");this.ui.foreground[0].width=this.ui.foreground[0].width,this.children.each(function(t){e.drawImage(t.render().canvas,0,0)
})},videoLoop:function(){cancelAnimationFrame(this.frame);var e=Date.now();this.frame=requestAnimationFrame(function t(){var n=Date.now()-e>1e3/24;this.frame=requestAnimationFrame(t.bind(this)),n&&(e=Date.now(),this.draw())}.bind(this))},drawGradientMap:function(){var e=this.getContext("background"),t=window.innerWidth,n=window.innerHeight,i=e.createRadialGradient(t/2,n/2,0,t/2,n/2,.45*t);i.addColorStop(0,"rgba(0, 120, 150, 0.25)"),i.addColorStop(1,"rgba(0, 10, 10, 0.3)"),e.globalCompositeOperation="lighten",e.fillStyle=i,e.fillRect(0,0,t,n)},drawTileMap:function(){var e=1.2*window.innerWidth,t=1.2*window.innerHeight;this.allLayers().attr({height:t,width:e}),this.grid=new HT.Grid(e,t),this.cache=this.grid.Cache(),this.getContext("background").drawImage(this.cache,0,0),this.drawGradientMap(),this.videoLoop()},getContext:_.memoize(function(e){return this.$(".backdrop__layer."+e)[0].getContext("2d")}),onDomRefresh:function(){this.drawTileMap()}})}),define("app/scene/core",["app/core","./views/honeycomb"],function(e,t){var n=e.module("Scene");return n.addInitializer(function(){e.body.show(new t({collection:e.request("connection:streams")}))}),n}),require(["app/core","app/connection/core","app/navigation/core","app/scene/core"],function(e){e.start()}),define("setup",["hex","marionette"],function(e){return function(){var t;return t||e.Doppelganger}}(this)),require(["setup"]);