var requirejs,require,define;!function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,i,r,o,a,s,l,c,u,h,f=e&&e.split("/"),p=g.map,d=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=f.concat(t.split("/")),c=0;c<t.length;c+=1)if(h=t[c],"."===h)t.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||d)&&p){for(n=t.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),f)for(u=f.length;u>0;u-=1)if(r=p[f.slice(0,u).join("/")],r&&(r=r[i])){o=r,a=c;break}if(o)break;!s&&d&&d[i]&&(s=d[i],l=c)}!o&&s&&(o=s,a=l),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function i(e,n){return function(){return u.apply(t,y.call(arguments,0).concat([e,n]))}}function r(t){return function(e){return n(e,t)}}function o(t){return function(e){p[t]=e}}function a(n){if(e(d,n)){var i=d[n];delete d[n],m[n]=!0,c.apply(t,i)}if(!e(p,n)&&!e(m,n))throw new Error("No "+n);return p[n]}function s(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return g&&g.config&&g.config[t]||{}}}var c,u,h,f,p={},d={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice;h=function(t,e){var i,o=s(t),l=o[0];return t=o[1],l&&(l=n(l,e),i=a(l)),l?t=i&&i.normalize?i.normalize(t,r(e)):n(t,e):(t=n(t,e),o=s(t),l=o[0],t=o[1],l&&(i=a(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:i}},f={require:function(t){return i(t)},exports:function(t){var e=p[t];return"undefined"!=typeof e?e:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:l(t)}}},c=function(n,r,s,l){var c,u,g,v,y,b,x=[];if(l=l||n,"function"==typeof s){for(r=!r.length&&s.length?["require","exports","module"]:r,y=0;y<r.length;y+=1)if(v=h(r[y],l),u=v.f,"require"===u)x[y]=f.require(n);else if("exports"===u)x[y]=f.exports(n),b=!0;else if("module"===u)c=x[y]=f.module(n);else if(e(p,u)||e(d,u)||e(m,u))x[y]=a(u);else{if(!v.p)throw new Error(n+" missing "+u);v.p.load(v.n,i(l,!0),o(u),{}),x[y]=p[u]}g=s.apply(p[n],x),n&&(c&&c.exports!==t&&c.exports!==p[n]?p[n]=c.exports:g===t&&b||(p[n]=g))}else n&&(p[n]=s)},requirejs=require=u=function(e,n,i,r,o){return"string"==typeof e?f[e]?f[e](n):a(h(e,n).f):(e.splice||(g=e,n.splice?(e=n,n=i,i=null):e=t),n=n||function(){},"function"==typeof i&&(i=r,r=o),r?c(t,e,n,i):setTimeout(function(){c(t,e,n,i)},4),u)},u.config=function(t){return g=t,g.deps&&u(g.deps,g.callback),u},requirejs._defined=p,define=function(t,n,i){n.splice||(i=n,n=[]),e(p,t)||e(d,t)||(d[t]=[t,n,i])},define.amd={jQuery:!0}}(),define("vendor/almond",function(){}),function(){var t={};t.Point=function(t,e){this.X=t,this.Y=e},t.Rectangle=function(t,e,n,i){this.X=t,this.Y=e,this.Width=n,this.Height=i},t.Line=function(t,e,n,i){this.X1=t,this.Y1=e,this.X2=n,this.Y2=i},t.Hexagon=function(e,n,i){this.Points=[];var r=null,o=null;t.Hexagon.Static.ORIENTATION===t.Hexagon.Orientation.Normal?(r=(t.Hexagon.Static.WIDTH-t.Hexagon.Static.SIDE)/2,o=t.Hexagon.Static.HEIGHT/2,this.Points.push(new t.Point(r+n,i)),this.Points.push(new t.Point(r+t.Hexagon.Static.SIDE+n,i)),this.Points.push(new t.Point(t.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new t.Point(r+t.Hexagon.Static.SIDE+n,t.Hexagon.Static.HEIGHT+i)),this.Points.push(new t.Point(r+n,t.Hexagon.Static.HEIGHT+i)),this.Points.push(new t.Point(n,o+i))):(r=t.Hexagon.Static.WIDTH/2,o=(t.Hexagon.Static.HEIGHT-t.Hexagon.Static.SIDE)/2,this.Points.push(new t.Point(r+n,i)),this.Points.push(new t.Point(t.Hexagon.Static.WIDTH+n,o+i)),this.Points.push(new t.Point(t.Hexagon.Static.WIDTH+n,o+t.Hexagon.Static.SIDE+i)),this.Points.push(new t.Point(r+n,t.Hexagon.Static.HEIGHT+i)),this.Points.push(new t.Point(n,o+t.Hexagon.Static.SIDE+i)),this.Points.push(new t.Point(n,o+i))),this.Id=e,this.x=n,this.y=i,this.x1=r,this.y1=o,this.TopLeftPoint=new t.Point(this.x,this.y),this.BottomRightPoint=new t.Point(this.x+t.Hexagon.Static.WIDTH,this.y+t.Hexagon.Static.HEIGHT),this.MidPoint=new t.Point(this.x+t.Hexagon.Static.WIDTH/2,this.y+t.Hexagon.Static.HEIGHT/2),this.P1=new t.Point(n+r,i+o),this.selected=!1},t.Hexagon.prototype.draw=function(t,e,n){t.beginPath(),t.moveTo(this.Points[0].X,this.Points[0].Y);for(var i=1;i<this.Points.length;i++){var r=this.Points[i];t.lineTo(r.X,r.Y)}t.closePath(),t.lineWidth=2,t.strokeStyle=e||"#0c2731",(this.selected||n)&&(t.fillStyle=n||"rgba(0, 0, 0, 0.15)",t.fill()),e!==!1&&t.stroke()},t.Hexagon.prototype.isInBounds=function(e,n){return this.Contains(new t.Point(e,n))},t.Hexagon.prototype.isInHexBounds=function(t){return this.TopLeftPoint.X<t.X&&this.TopLeftPoint.Y<t.Y&&t.X<this.BottomRightPoint.X&&t.Y<this.BottomRightPoint.Y?!0:!1},t.Hexagon.prototype.Contains=function(t){var e=!1;if(this.isInHexBounds(t)){var n,i=0;for(n=0,i=this.Points.length-1;n<this.Points.length;i=n++){var r=this.Points[n],o=this.Points[i];(r.Y<=t.Y&&t.Y<o.Y||o.Y<=t.Y&&t.Y<r.Y)&&t.X<(o.X-r.X)*(t.Y-r.Y)/(o.Y-r.Y)+r.X&&(e=!e)}}return e},t.Hexagon.prototype.isOnScreen=function(t,e){var n=this.MidPoint,i=n.X+(t||0),r=n.Y+(e||0);return 0>i||i>window.innerWidth?!1:0>r||r>window.innerHeight?!1:!0},t.Hexagon.Orientation={Normal:0,Rotated:1},t.Hexagon.Static={HEIGHT:173.20508075688775,WIDTH:200,SIDE:100,ORIENTATION:t.Hexagon.Orientation.Normal,DRAWSTATS:!1},window.HT=t}(),define("vendor/hex/tools",function(){}),function(t){window.findHexWithSideLengthZAndRatio=function(e,n){e=e||50,n=n||1.1547;var i=Math.pow(n,2),r=(1+i)/i,o=e/i,a=(1-4*i)/(4*i)*Math.pow(e,2),s=(-o+Math.sqrt(Math.pow(o,2)-4*r*a))/(2*r),l=(2*s+e)/(2*n),c=2*s+e,u=2*l;t.Hexagon.Static.WIDTH=c,t.Hexagon.Static.HEIGHT=u,t.Hexagon.Static.SIDE=e},window.findHexWithWidthAndHeight=function(e,n){e=e||100,n=n||86.60254037844388;var i=-3,r=-2*e,o=Math.pow(e,2)+Math.pow(n,2),a=(-r-Math.sqrt(Math.pow(r,2)-4*i*o))/(2*i);t.Hexagon.Static.WIDTH=e,t.Hexagon.Static.HEIGHT=n,t.Hexagon.Static.SIDE=a}}(window.HT),define("vendor/hex/calculations",function(){}),function(t){t.Grid=function(e,n){this.Hexes=[],this.width=e,this.height=n;for(var i={},r=0,o=0;o+t.Hexagon.Static.HEIGHT<=n;){var a=0,s=0;1===r%2&&(s=t.Hexagon.Static.ORIENTATION===t.Hexagon.Orientation.Normal?(t.Hexagon.Static.WIDTH-t.Hexagon.Static.SIDE)/2+t.Hexagon.Static.SIDE:t.Hexagon.Static.WIDTH/2,a=1);for(var l=s;l+t.Hexagon.Static.WIDTH<=e;){var c=this.GetHexId(r,a),u=new t.Hexagon(c,l,o),h=a;t.Hexagon.Static.ORIENTATION===t.Hexagon.Orientation.Normal?u.PathCoOrdX=a:(u.PathCoOrdY=r,h=r),this.Hexes.push(u),i[h]||(i[h]=[]),i[h].push(u),a+=2,l+=t.Hexagon.Static.ORIENTATION===t.Hexagon.Orientation.Normal?t.Hexagon.Static.WIDTH+t.Hexagon.Static.SIDE:t.Hexagon.Static.WIDTH}r++,o+=t.Hexagon.Static.ORIENTATION===t.Hexagon.Orientation.Normal?t.Hexagon.Static.HEIGHT/2:(t.Hexagon.Static.HEIGHT-t.Hexagon.Static.SIDE)/2+t.Hexagon.Static.SIDE}for(var f in i){var p=i[f],d=Math.floor(f/2)+f%2;for(var g in p){var m=p[g];t.Hexagon.Static.ORIENTATION===t.Hexagon.Orientation.Normal?m.PathCoOrdY=d++:m.PathCoOrdX=d++}}},t.Grid.Static={Letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},t.Grid.prototype.GetHexId=function(e,n){for(var i=e,r="";i>25;)r=t.Grid.Static.Letters[i%26]+r,i-=26;return t.Grid.Static.Letters[i]+r+(n+1)},t.Grid.prototype.GetHexAt=function(t){for(var e in this.Hexes)if(this.Hexes[e].Contains(t))return this.Hexes[e];return null},t.Grid.prototype.getHexAtCenter=function(e,n){var i=new t.Point(e/2,n/2);for(var r in this.Hexes)if(this.Hexes[r].Contains(i))return this.Hexes[r];return null},t.Grid.prototype.getNearestHexFromAngle=function(e,n){n*=Math.PI/180;var i=t.Hexagon.Static.HEIGHT,r=t.Hexagon.Static.WIDTH,o=e.MidPoint,a=o.X+Math.sin(n)*r,s=o.Y+Math.cos(n)*i;return this.GetHexAt(new t.Point(a,s))},t.Grid.prototype.nearestHexFromCenter=function(t,e,n){var i,r=this.getHexAtCenter(t,e);return n!==!1&&(i=this.getNearestHexFromAngle(r,n)),i||r},t.Grid.prototype.GetHexDistance=function(t,e){var n=t.PathCoOrdX-e.PathCoOrdX,i=t.PathCoOrdY-e.PathCoOrdY;return(Math.abs(n)+Math.abs(i)+Math.abs(n-i))/2},t.Grid.prototype.GetHexById=function(t){for(var e in this.Hexes)if(this.Hexes[e].Id===t)return this.Hexes[e];return null},t.Grid.prototype.GetHexByCartesian=function(t,e){for(var n in this.Hexes)if(this.Hexes[n].PathCoOrdX===t&&this.Hexes[n].PathCoOrdY===e)return this.Hexes[n];return null},t.Grid.prototype.Cache=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=this.width,t.height=this.height;for(var n in this.Hexes)this.Hexes[n].draw(e);return this.selected&&this.selected.draw(e),this.cache=t,t},t.Grid.prototype.select=function(t){for(var e in this.Hexes)this.Hexes[e].selected=!1;t.selected=!0,this.selected=t},t.Grid.prototype.each=function(t,e){var n=0,i=this.Hexes.length;for(i;i>n;n++)t.call(e||this,this.Hexes[n]);return this},t.Grid.prototype.eachOnScreen=function(t,e,n,i){var r=0,o=this.Hexes.length;for(o;o>r;r++)this.Hexes[r].isOnScreen(t,e)&&n.call(i||this,this.Hexes[r])}}(window.HT),define("hex",["vendor/hex/tools","vendor/hex/calculations"],function(){}),function(){function t(t,e,n){for(var i=(n||0)-1,r=t?t.length:0;++i<r;)if(t[i]===e)return i;return-1}function e(e,n){var i=typeof n;if(e=e.cache,"boolean"==i||null==n)return e[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var r="number"==i?n:x+n;return e=(e=e[i])&&e[r],"object"==i?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?t:x+t,r=e[n]||(e[n]={});"object"==n?(r[i]||(r[i]=[])).push(t):r[i]=!0}}function i(t){return t.charCodeAt(0)}function r(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||"undefined"==typeof n)return 1;if(i>n||"undefined"==typeof i)return-1}return t.index-e.index}function o(t){var e=-1,i=t.length,r=t[0],o=t[0|i/2],a=t[i-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var s=l();s["false"]=s["null"]=s["true"]=s.undefined=!1;var c=l();for(c.array=t,c.cache=s,c.push=n;++e<i;)c.push(t[e]);return c}function a(t){return"\\"+te[t]}function s(){return m.pop()||[]}function l(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function u(){}function h(t){t.length=0,m.length<_&&m.push(t)}function f(t){var e=t.cache;e&&f(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,v.length<_&&v.push(t)}function p(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var i=-1,r=n-e||0,o=Array(0>r?0:r);++i<r;)o[i]=t[e+i];return o}function d(n){function m(t){return t&&"object"==typeof t&&!lr(t)&&Ni.call(t,"__wrapped__")?t:new v(t)}function v(t,e){this.__chain__=!!e,this.__wrapped__=t}function _(t,e,n,i,r){if(n){var o=n(t);if("undefined"!=typeof o)return o}var a=Oe(t);if(!a)return t;var l=Wi.call(t);if(!G[l]||!or.nodeClass&&c(t))return t;var u=ir[l];switch(l){case W:case z:return new u(+t);case B:case U:return new u(t);case Y:return o=u(t.source,M.exec(t)),o.lastIndex=t.lastIndex,o}var f=lr(t);if(e){var d=!i;i||(i=s()),r||(r=s());for(var g=i.length;g--;)if(i[g]==t)return r[g];o=f?u(t.length):{}}else o=f?p(t):br({},t);return f&&(Ni.call(t,"index")&&(o.index=t.index),Ni.call(t,"input")&&(o.input=t.input)),e?(i.push(t),r.push(o),(f?yr:_r)(t,function(t,a){o[a]=_(t,e,n,i,r)}),d&&(h(i),h(r)),o):o}function te(t,e,n){if("function"!=typeof t)return Qn;if("undefined"==typeof e)return t;var i=t.__bindData__||or.funcNames&&!t.name;if("undefined"==typeof i){var r=N&&Ai.call(t);or.funcNames||!r||P.test(r)||(i=!0),(or.funcNames||!i)&&(i=!or.funcDecomp||N.test(r),sr(t,i))}if(i!==!0&&i&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return Rn(t,e)}function ne(t,e,n,i){for(var r=(i||0)-1,o=t?t.length:0,a=[];++r<o;){var s=t[r];if(s&&"object"==typeof s&&"number"==typeof s.length&&(lr(s)||me(s))){e||(s=ne(s,e,n));var l=-1,c=s.length,u=a.length;for(a.length+=c;++l<c;)a[u++]=s[l]}else n||a.push(s)}return a}function ie(t,e,n,i,r,o){if(n){var a=n(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var l=typeof t,u=typeof e;if(!(t!==t||t&&Z[l]||e&&Z[u]))return!1;if(null==t||null==e)return t===e;var f=Wi.call(t),p=Wi.call(e);if(f==V&&(f=X),p==V&&(p=X),f!=p)return!1;switch(f){case W:case z:return+t==+e;case B:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case Y:case U:return t==wi(e)}var d=f==$;if(!d){if(Ni.call(t,"__wrapped__ ")||Ni.call(e,"__wrapped__"))return ie(t.__wrapped__||t,e.__wrapped__||e,n,i,r,o);if(f!=X||!or.nodeClass&&(c(t)||c(e)))return!1;var g=!or.argsObject&&me(t)?bi:t.constructor,m=!or.argsObject&&me(e)?bi:e.constructor;if(g!=m&&!(Ae(g)&&g instanceof g&&Ae(m)&&m instanceof m))return!1}var v=!r;r||(r=s()),o||(o=s());for(var y=r.length;y--;)if(r[y]==t)return o[y]==e;var b=0;if(a=!0,r.push(t),o.push(e),d){if(y=t.length,b=e.length,a=b==t.length,!a&&!i)return a;for(;b--;){var x=y,w=e[b];if(i)for(;x--&&!(a=ie(t[x],w,n,i,r,o)););else if(!(a=ie(t[b],w,n,i,r,o)))break}return a}return wr(e,function(e,s,l){return Ni.call(l,s)?(b++,a=Ni.call(t,s)&&ie(t[s],e,n,i,r,o)):void 0}),a&&!i&&wr(t,function(t,e,n){return Ni.call(n,e)?a=--b>-1:void 0}),v&&(h(r),h(o)),a}function oe(t,e,n,i,r){(lr(e)?Qe:_r)(e,function(e,o){var a,s,l=e,c=t[o];if(e&&((s=lr(e))||Cr(e))){for(var u=i.length;u--;)if(a=i[u]==e){c=r[u];break}if(!a){var h;n&&(l=n(c,e),(h="undefined"!=typeof l)&&(c=l)),h||(c=s?lr(c)?c:[]:Cr(c)?c:{}),i.push(e),r.push(c),h||oe(c,e,n,i,r)}}else n&&(l=n(c,e),"undefined"==typeof l&&(l=e)),"undefined"!=typeof l&&(c=l);t[o]=c})}function se(n,i,r){var a=-1,l=pe(),c=n?n.length:0,u=[],p=!i&&c>=w&&l===t,d=r||p?s():u;if(p){var g=o(d);g?(l=e,d=g):(p=!1,d=r?d:(h(d),u))}for(;++a<c;){var m=n[a],v=r?r(m,a,n):m;(i?!a||d[d.length-1]!==v:l(d,v)<0)&&((r||p)&&d.push(v),u.push(m))}return p?(h(d.array),f(d)):r&&h(d),u}function le(t){return function(e,n,i){var r={};if(n=m.createCallback(n,i,3),lr(e))for(var o=-1,a=e.length;++o<a;){var s=e[o];t(r,s,n(s,o,e),e)}else yr(e,function(e,i,o){t(r,e,n(e,i,o),o)});return r}}function ce(t,e,n,i,r,o){var a=1&e,s=2&e,l=4&e,c=8&e,u=16&e,h=32&e,f=t;if(!s&&!Ae(t))throw new _i;u&&!n.length&&(e&=-17,u=n=!1),h&&!i.length&&(e&=-33,h=i=!1);var p=t&&t.__bindData__;if(p)return!a||1&p[1]||(p[4]=r),!a&&1&p[1]&&(e|=8),!l||4&p[1]||(p[5]=o),u&&Ri.apply(p[2]||(p[2]=[]),n),h&&Ri.apply(p[3]||(p[3]=[]),i),p[1]|=e,ce.apply(null,p);if(!a||s||l||h||!(or.fastBind||Li&&u))g=function(){var p=arguments,d=a?r:this;if((l||u||h)&&(p=tr.call(p),u&&zi.apply(p,n),h&&Ri.apply(p,i),l&&p.length<o))return e|=16,ce(t,c?e:-4&e,p,null,r,o);if(s&&(t=d[f]),this instanceof g){d=he(t.prototype);var m=t.apply(d,p);return Oe(m)?m:d}return t.apply(d,p)};else{if(u){var d=[r];Ri.apply(d,n)}var g=u?Li.apply(t,d):Li.call(t,r)}return sr(g,tr.call(arguments)),g}function ue(){Q.shadowedProps=D,Q.array=Q.bottom=Q.loop=Q.top="",Q.init="iterable",Q.useHas=!0;for(var t,e=0;t=arguments[e];e++)for(var n in t)Q[n]=t[n];var i=Q.args;Q.firstArg=/^[^,]+/.exec(i)[0];var r=mi("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+ar(Q)+"\n}");return r(te,q,ki,Ni,b,me,lr,Fe,Q.keys,Hi,Z,rr,U,Ei,Wi)}function he(t){return Oe(t)?Bi(t):{}}function fe(t){return dr[t]}function pe(){var e=(e=m.indexOf)===xn?t:e;return e}function de(t){var e,n;return!t||Wi.call(t)!=X||(e=t.constructor,Ae(e)&&!(e instanceof e))||!or.argsClass&&me(t)||!or.nodeClass&&c(t)?!1:or.ownLast?(wr(t,function(t,e,i){return n=Ni.call(i,e),!1}),n!==!1):(wr(t,function(t,e){n=e}),"undefined"==typeof n||Ni.call(t,n))}function ge(t){return gr[t]}function me(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Wi.call(t)==V||!1}function ve(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=e,e=!1),_(t,e,"function"==typeof n&&te(n,i,1))}function ye(t,e,n){return _(t,!0,"function"==typeof e&&te(e,n,1))}function be(t,e,n){var i;return e=m.createCallback(e,n,3),_r(t,function(t,n,r){return e(t,n,r)?(i=n,!1):void 0}),i}function xe(t,e,n){var i;return e=m.createCallback(e,n,3),_e(t,function(t,n,r){return e(t,n,r)?(i=n,!1):void 0}),i}function we(t,e,n){var i=[];wr(t,function(t,e){i.push(e,t)});var r=i.length;for(e=te(e,n,3);r--&&e(i[r--],i[r],t)!==!1;);return t}function _e(t,e,n){var i=ur(t),r=i.length;for(e=te(e,n,3);r--;){var o=i[r];if(e(t[o],o,t)===!1)break}return t}function Ce(t){var e=[];return wr(t,function(t,n){Ae(t)&&e.push(n)}),e.sort()}function ke(t,e){return t?Ni.call(t,e):!1}function He(t){for(var e=-1,n=ur(t),i=n.length,r={};++e<i;){var o=n[e];r[t[o]]=o}return r}function Ee(t){return t===!0||t===!1||Wi.call(t)==W}function Te(t){return t?"object"==typeof t&&Wi.call(t)==z:!1}function Se(t){return t?1===t.nodeType:!1}function Me(t){var e=!0;if(!t)return e;var n=Wi.call(t),i=t.length;return n==$||n==U||(or.argsClass?n==V:me(t))||n==X&&"number"==typeof i&&Ae(t.splice)?!i:(_r(t,function(){return e=!1}),e)}function Pe(t,e,n,i){return ie(t,e,"function"==typeof n&&te(n,i,2))}function Ie(t){return Yi(t)&&!Ui(parseFloat(t))}function Ae(t){return"function"==typeof t}function Oe(t){return!(!t||!Z[typeof t])}function Ne(t){return Re(t)&&t!=+t}function je(t){return null===t}function Re(t){return"number"==typeof t||Wi.call(t)==B}function De(t){return t&&Z[typeof t]?Wi.call(t)==Y:!1}function Fe(t){return"string"==typeof t||Wi.call(t)==U}function Ve(t){return"undefined"==typeof t}function $e(t){var e=arguments,n=2;if(!Oe(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var i=te(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(i=e[--n]);for(var r=tr.call(arguments,1,n),o=-1,a=s(),l=s();++o<n;)oe(t,r[o],i,a,l);return h(a),h(l),t}function We(t,e,n){var i=pe(),r="function"==typeof e,o={};if(r)e=m.createCallback(e,n,3);else var a=ne(arguments,!0,!1,1);return wr(t,function(t,n,s){(r?!e(t,n,s):i(a,n)<0)&&(o[n]=t)}),o}function ze(t){for(var e=-1,n=ur(t),i=n.length,r=fi(i);++e<i;){var o=n[e];r[e]=[o,t[o]]}return r}function qe(t,e,n){var i={};if("function"!=typeof e)for(var r=-1,o=ne(arguments,!0,!1,1),a=Oe(t)?o.length:0;++r<a;){var s=o[r];s in t&&(i[s]=t[s])}else e=m.createCallback(e,n,3),wr(t,function(t,n,r){e(t,n,r)&&(i[n]=t)});return i}function Le(t,e,n,i){var r=lr(t);if(e=te(e,i,4),null==n)if(r)n=[];else{var o=t&&t.constructor,a=o&&o.prototype;n=he(a)}return(r?yr:_r)(t,function(t,i,r){return e(n,t,i,r)}),n}function Be(t){for(var e=-1,n=ur(t),i=n.length,r=fi(i);++e<i;)r[e]=t[n[e]];return r}function Xe(t){var e=arguments,n=-1,i=ne(e,!0,!1,1),r=e[2]&&e[2][e[1]]===t?1:i.length,o=fi(r);for(or.unindexedChars&&Fe(t)&&(t=t.split(""));++n<r;)o[n]=t[i[n]];return o}function Ye(t,e,n){var i=-1,r=pe(),o=t?t.length:0,a=!1;return n=(0>n?Ji(0,o+n):n)||0,lr(t)?a=r(t,e,n)>-1:"number"==typeof o?a=(Fe(t)?t.indexOf(e,n):r(t,e,n))>-1:yr(t,function(t){return++i>=n?!(a=t===e):void 0}),a}function Ue(t,e,n){var i=!0;if(e=m.createCallback(e,n,3),lr(t))for(var r=-1,o=t.length;++r<o&&(i=!!e(t[r],r,t)););else yr(t,function(t,n,r){return i=!!e(t,n,r)});return i}function Ge(t,e,n){var i=[];if(e=m.createCallback(e,n,3),lr(t))for(var r=-1,o=t.length;++r<o;){var a=t[r];e(a,r,t)&&i.push(a)}else yr(t,function(t,n,r){e(t,n,r)&&i.push(t)});return i}function Je(t,e,n){if(e=m.createCallback(e,n,3),!lr(t)){var i;return yr(t,function(t,n,r){return e(t,n,r)?(i=t,!1):void 0}),i}for(var r=-1,o=t.length;++r<o;){var a=t[r];if(e(a,r,t))return a}}function Ke(t,e,n){var i;return e=m.createCallback(e,n,3),Ze(t,function(t,n,r){return e(t,n,r)?(i=t,!1):void 0}),i}function Qe(t,e,n){if(e&&"undefined"==typeof n&&lr(t))for(var i=-1,r=t.length;++i<r&&e(t[i],i,t)!==!1;);else yr(t,e,n);return t}function Ze(t,e,n){var i=t,r=t?t.length:0;if(e=e&&"undefined"==typeof n?e:te(e,n,3),lr(t))for(;r--&&e(t[r],r,t)!==!1;);else{if("number"!=typeof r){var o=ur(t);r=o.length}else or.unindexedChars&&Fe(t)&&(i=t.split(""));yr(t,function(t,n,a){return n=o?o[--r]:--r,e(i[n],n,a)})}return t}function tn(t,e){var n=tr.call(arguments,2),i=-1,r="function"==typeof e,o=t?t.length:0,a=fi("number"==typeof o?o:0);return Qe(t,function(t){a[++i]=(r?e:t[e]).apply(t,n)}),a}function en(t,e,n){var i=-1,r=t?t.length:0,o=fi("number"==typeof r?r:0);if(e=m.createCallback(e,n,3),lr(t))for(;++i<r;)o[i]=e(t[i],i,t);else yr(t,function(t,n,r){o[++i]=e(t,n,r)});return o}function nn(t,e,n){var r=-1/0,o=r;if(!e&&lr(t))for(var a=-1,s=t.length;++a<s;){var l=t[a];l>o&&(o=l)}else e=!e&&Fe(t)?i:m.createCallback(e,n,3),yr(t,function(t,n,i){var a=e(t,n,i);a>r&&(r=a,o=t)});return o}function rn(t,e,n){var r=1/0,o=r;if(!e&&lr(t))for(var a=-1,s=t.length;++a<s;){var l=t[a];o>l&&(o=l)}else e=!e&&Fe(t)?i:m.createCallback(e,n,3),yr(t,function(t,n,i){var a=e(t,n,i);r>a&&(r=a,o=t)});return o}function on(t,e,n,i){var r=arguments.length<3;if(e=te(e,i,4),lr(t)){var o=-1,a=t.length;for(r&&(n=t[++o]);++o<a;)n=e(n,t[o],o,t)}else yr(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)});return n}function an(t,e,n,i){var r=arguments.length<3;return e=te(e,i,4),Ze(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function sn(t,e,n){return e=m.createCallback(e,n,3),Ge(t,function(t,n,i){return!e(t,n,i)})}function ln(t,e,n){var i=t?t.length:0;if("number"!=typeof i?t=Be(t):or.unindexedChars&&Fe(t)&&(t=t.split("")),null==e||n)return t?t[ei(i-1)]:g;var r=cn(t);return r.length=Ki(Ji(0,e),r.length),r}function cn(t){var e=-1,n=t?t.length:0,i=fi("number"==typeof n?n:0);return Qe(t,function(t){var n=ei(++e);i[e]=i[n],i[n]=t}),i}function un(t){var e=t?t.length:0;return"number"==typeof e?e:ur(t).length}function hn(t,e,n){var i;if(e=m.createCallback(e,n,3),lr(t))for(var r=-1,o=t.length;++r<o&&!(i=e(t[r],r,t)););else yr(t,function(t,n,r){return!(i=e(t,n,r))});return!!i}function fn(t,e,n){var i=-1,o=t?t.length:0,a=fi("number"==typeof o?o:0);for(e=m.createCallback(e,n,3),Qe(t,function(t,n,r){var o=a[++i]=l();o.criteria=e(t,n,r),o.index=i,o.value=t}),o=a.length,a.sort(r);o--;){var s=a[o];a[o]=s.value,f(s)}return a}function pn(t){return t&&"number"==typeof t.length?or.unindexedChars&&Fe(t)?t.split(""):p(t):Be(t)}function dn(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var r=t[e];r&&i.push(r)}return i}function gn(n){var i=-1,r=pe(),a=n?n.length:0,s=ne(arguments,!0,!0,1),l=[],c=a>=w&&r===t;if(c){var u=o(s);u?(r=e,s=u):c=!1}for(;++i<a;){var h=n[i];r(s,h)<0&&l.push(h)}return c&&f(s),l}function mn(t,e,n){var i=-1,r=t?t.length:0;for(e=m.createCallback(e,n,3);++i<r;)if(e(t[i],i,t))return i;return-1}function vn(t,e,n){var i=t?t.length:0;for(e=m.createCallback(e,n,3);i--;)if(e(t[i],i,t))return i;return-1}function yn(t,e,n){var i=0,r=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=m.createCallback(e,n,3);++o<r&&e(t[o],o,t);)i++}else if(i=e,null==i||n)return t?t[0]:g;return p(t,0,Ki(Ji(0,i),r))}function bn(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=i&&i[e]===t?null:e,e=!1),null!=n&&(t=en(t,n,i)),ne(t,e)}function xn(e,n,i){if("number"==typeof i){var r=e?e.length:0;i=0>i?Ji(0,r+i):i||0}else if(i){var o=Mn(e,n);return e[o]===n?o:-1}return t(e,n,i)}function wn(t,e,n){var i=0,r=t?t.length:0;if("number"!=typeof e&&null!=e){var o=r;for(e=m.createCallback(e,n,3);o--&&e(t[o],o,t);)i++}else i=null==e||n?1:e||i;return p(t,0,Ki(Ji(0,r-i),r))}function _n(n){for(var i=arguments,r=i.length,a=-1,l=s(),c=-1,u=pe(),p=n?n.length:0,d=[],g=s();++a<r;){var m=i[a];l[a]=u===t&&(m?m.length:0)>=w&&o(a?i[a]:g)}t:for(;++c<p;){var v=l[0];if(m=n[c],(v?e(v,m):u(g,m))<0){for(a=r,(v||g).push(m);--a;)if(v=l[a],(v?e(v,m):u(i[a],m))<0)continue t;d.push(m)}}for(;r--;)v=l[r],v&&f(v);return h(l),h(g),d}function Cn(t,e,n){var i=0,r=t?t.length:0;if("number"!=typeof e&&null!=e){var o=r;for(e=m.createCallback(e,n,3);o--&&e(t[o],o,t);)i++}else if(i=e,null==i||n)return t?t[r-1]:g;return p(t,Ji(0,r-i))}function kn(t,e,n){var i=t?t.length:0;for("number"==typeof n&&(i=(0>n?Ji(0,i+n):Ki(n,i-1))+1);i--;)if(t[i]===e)return i;return-1}function Hn(t){for(var e=arguments,n=0,i=e.length,r=t?t.length:0;++n<i;)for(var o=-1,a=e[n];++o<r;)t[o]===a&&($i.call(t,o--,1),r--);return t}function En(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var i=-1,r=Ji(0,Mi((e-t)/(n||1))),o=fi(r);++i<r;)o[i]=t,t+=n;return o}function Tn(t,e,n){var i=-1,r=t?t.length:0,o=[];for(e=m.createCallback(e,n,3);++i<r;){var a=t[i];e(a,i,t)&&(o.push(a),$i.call(t,i--,1),r--)}return o}function Sn(t,e,n){if("number"!=typeof e&&null!=e){var i=0,r=-1,o=t?t.length:0;for(e=m.createCallback(e,n,3);++r<o&&e(t[r],r,t);)i++}else i=null==e||n?1:Ji(0,e);return p(t,i)}function Mn(t,e,n,i){var r=0,o=t?t.length:r;for(n=n?m.createCallback(n,i,1):Qn,e=n(e);o>r;){var a=r+o>>>1;n(t[a])<e?r=a+1:o=a}return r}function Pn(){return se(ne(arguments,!0,!0))}function In(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=i&&i[e]===t?null:e,e=!1),null!=n&&(n=m.createCallback(n,i,3)),se(t,e,n)}function An(t){return gn(t,tr.call(arguments,1))}function On(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?nn(Tr(t,"length")):0,i=fi(0>n?0:n);++e<n;)i[e]=Tr(t,e);return i}function Nn(t,e){for(var n=-1,i=t?t.length:0,r={};++n<i;){var o=t[n];e?r[o]=e[n]:o&&(r[o[0]]=o[1])}return r}function jn(t,e){if(!Ae(e))throw new _i;return function(){return--t<1?e.apply(this,arguments):void 0}}function Rn(t,e){return arguments.length>2?ce(t,17,tr.call(arguments,2),null,e):ce(t,1,null,null,e)}function Dn(t){for(var e=arguments.length>1?ne(arguments,!0,!1,1):Ce(t),n=-1,i=e.length;++n<i;){var r=e[n];t[r]=ce(t[r],1,null,null,t)}return t}function Fn(t,e){return arguments.length>2?ce(e,19,tr.call(arguments,2),null,t):ce(e,3,null,null,t)}function Vn(){for(var t=arguments,e=t.length;e--;)if(!Ae(t[e]))throw new _i;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function $n(t,e,n){var i=typeof t;if(null==t||"function"==i)return te(t,e,n);if("object"!=i)return function(e){return e[t]};var r=ur(t),o=r[0],a=t[o];return 1!=r.length||a!==a||Oe(a)?function(e){for(var n=r.length,i=!1;n--&&(i=ie(e[r[n]],t[r[n]],null,!0)););return i}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function Wn(t,e){return e="number"==typeof e?e:+e||t.length,ce(t,4,null,null,null,e)}function zn(t,e,n){var i,r,o,a,s,l,c,u=0,h=!1,f=!0;if(!Ae(t))throw new _i;if(e=Ji(0,e)||0,n===!0){var p=!0;f=!1}else Oe(n)&&(p=n.leading,h="maxWait"in n&&(Ji(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var d=function(){var n=e-(ji()-a);if(0>=n){r&&Pi(r);var h=c;r=l=c=g,h&&(u=ji(),o=t.apply(s,i))}else l=Vi(d,n)},m=function(){l&&Pi(l),r=l=c=g,(f||h!==e)&&(u=ji(),o=t.apply(s,i))};return function(){if(i=arguments,a=ji(),s=this,c=f&&(l||!p),h===!1)var n=p&&!l;else{r||p||(u=a);var g=h-(a-u);0>=g?(r&&(r=Pi(r)),u=a,o=t.apply(s,i)):r||(r=Vi(m,g))}return l||e===h||(l=Vi(d,e)),n&&(o=t.apply(s,i)),o}}function qn(t){if(!Ae(t))throw new _i;var e=tr.call(arguments,1);return Vi(function(){t.apply(g,e)},1)}function Ln(t,e){if(!Ae(t))throw new _i;var n=tr.call(arguments,2);return Vi(function(){t.apply(g,n)},e)}function Bn(t,e){if(!Ae(t))throw new _i;var n=function(){var i=n.cache,r=e?e.apply(this,arguments):x+arguments[0];return Ni.call(i,r)?i[r]:i[r]=t.apply(this,arguments)};return n.cache={},n}function Xn(t){var e,n;if(!Ae(t))throw new _i;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Yn(t){return ce(t,16,tr.call(arguments,1))}function Un(t){return ce(t,32,null,tr.call(arguments,1))}function Gn(t,e,n){var i=!0,r=!0;if(!Ae(t))throw new _i;n===!1?i=!1:Oe(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),J.leading=i,J.maxWait=e,J.trailing=r;var o=zn(t,e,J);return o}function Jn(t,e){if(!Ae(e))throw new _i;return function(){var n=[t];return Ri.apply(n,arguments),e.apply(this,n)}}function Kn(t){return null==t?"":wi(t).replace(vr,fe)}function Qn(t){return t}function Zn(t,e){var n=t,i=!e||Ae(n);e||(n=v,e=t,t=m),Qe(Ce(e),function(r){var o=t[r]=e[r];i&&(n.prototype[r]=function(){var e=this.__wrapped__,i=[e];Ri.apply(i,arguments);var r=o.apply(t,i);return e&&"object"==typeof e&&e===r?this:(r=new n(r),r.__chain__=this.__chain__,r)})})}function ti(){return n._=Ti,this}function ei(t,e,n){var i=null==t,r=null==e;null==n&&("boolean"==typeof t&&r?(n=t,t=1):r||"boolean"!=typeof e||(n=e,r=!0)),i&&r&&(e=1),t=+t||0,r?(e=t,t=0):e=+e||0;var o=Zi();return n||t%1||e%1?Ki(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e):t+Ii(o*(e-t+1))}function ni(t,e){if(t){var n=t[e];return Ae(n)?t[e]():n}}function ii(t,e,n){var i=m.templateSettings;t||(t=""),n=xr({},n,i);var r,o=xr({},n.imports,i.imports),s=ur(o),l=Be(o),c=0,u=n.interpolate||O,h="__p += '",f=xi((n.escape||O).source+"|"+u.source+"|"+(u===I?S:O).source+"|"+(n.evaluate||O).source+"|$","g");t.replace(f,function(e,n,i,o,s,l){return i||(i=o),h+=t.slice(c,l).replace(j,a),n&&(h+="' +\n__e("+n+") +\n'"),s&&(r=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),h+="';\n";var p=n.variable,d=p;d||(p="obj",h="with ("+p+") {\n"+h+"\n}\n"),h=(r?h.replace(H,""):h).replace(E,"$1").replace(T,"$1;"),h="function("+p+") {\n"+(d?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+F++ +"]")+"\n*/";try{var y=mi(s,"return "+h+v).apply(g,l)}catch(b){throw b.source=h,b}return e?y(e):(y.source=h,y)}function ri(t,e,n){t=(t=+t)>-1?t:0;var i=-1,r=fi(t);for(e=te(e,n,1);++i<t;)r[i]=e(i);return r}function oi(t){return null==t?"":wi(t).replace(mr,ge)}function ai(t){var e=++y;return wi(null==t?"":t)+e}function si(t){return t=new v(t),t.__chain__=!0,t}function li(t,e){return e(t),t}function ci(){return this.__chain__=!0,this}function ui(){return wi(this.__wrapped__)}function hi(){return this.__wrapped__}n=n?ae.defaults(ee.Object(),n,ae.pick(ee,R)):ee;var fi=n.Array,pi=n.Boolean,di=n.Date,gi=n.Error,mi=n.Function,vi=n.Math,yi=n.Number,bi=n.Object,xi=n.RegExp,wi=n.String,_i=n.TypeError,Ci=[],ki=gi.prototype,Hi=bi.prototype,Ei=wi.prototype,Ti=n._,Si=xi("^"+wi(Hi.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Mi=vi.ceil,Pi=n.clearTimeout,Ii=vi.floor,Ai=mi.prototype.toString,Oi=Si.test(Oi=bi.getPrototypeOf)&&Oi,Ni=Hi.hasOwnProperty,ji=Si.test(ji=di.now)&&ji||function(){return+new di},Ri=Ci.push,Di=Hi.propertyIsEnumerable,Fi=n.setImmediate,Vi=n.setTimeout,$i=Ci.splice,Wi=Hi.toString,zi=Ci.unshift,qi=function(){try{var t={},e=Si.test(e=bi.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),Li=Si.test(Li=Wi.bind)&&Li,Bi=Si.test(Bi=bi.create)&&Bi,Xi=Si.test(Xi=fi.isArray)&&Xi,Yi=n.isFinite,Ui=n.isNaN,Gi=Si.test(Gi=bi.keys)&&Gi,Ji=vi.max,Ki=vi.min,Qi=n.parseInt,Zi=vi.random,tr=Ci.slice,er=Si.test(n.attachEvent),nr=Li&&!/\n|true/.test(Li+er),ir={};ir[$]=fi,ir[W]=pi,ir[z]=di,ir[L]=mi,ir[X]=bi,ir[B]=yi,ir[Y]=xi,ir[U]=wi;var rr={};rr[$]=rr[z]=rr[B]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},rr[W]=rr[U]={constructor:!0,toString:!0,valueOf:!0},rr[q]=rr[L]=rr[Y]={constructor:!0,toString:!0},rr[X]={constructor:!0},function(){for(var t=D.length;t--;){var e=D[t];for(var n in rr)Ni.call(rr,n)&&!Ni.call(rr[n],e)&&(rr[n][e]=!1)}}(),v.prototype=m.prototype;var or=m.support={};!function(){var t=function(){this.x=1},e={0:1,length:1},i=[];t.prototype={valueOf:1,y:1};for(var r in new t)i.push(r);for(r in arguments);or.argsClass=Wi.call(arguments)==V,or.argsObject=arguments.constructor==bi&&!(arguments instanceof fi),or.enumErrorProps=Di.call(ki,"message")||Di.call(ki,"name"),or.enumPrototypes=Di.call(t,"prototype"),or.fastBind=Li&&!nr,or.funcDecomp=!Si.test(n.WinRTError)&&N.test(d),or.funcNames="string"==typeof mi.name,or.nonEnumArgs=0!=r,or.nonEnumShadows=!/valueOf/.test(i),or.ownLast="x"!=i[0],or.spliceObjects=(Ci.splice.call(e,0,1),!e[0]),or.unindexedChars="xx"!="x"[0]+bi("x")[0];try{or.nodeClass=!(Wi.call(document)==X&&!({toString:0}+""))
}catch(o){or.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:m}};var ar=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",or.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):or.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),or.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),or.enumErrorProps&&(e+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(or.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),or.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  ";else if(e+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }    ",or.nonEnumShadows){for(e+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)e+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(e+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),e+=") {\n      "+t.loop+";\n    }      ";e+="\n  }    "}return(t.array||or.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"};Bi||(he=function(t){if(Oe(t)){u.prototype=t;var e=new u;u.prototype=null}return e||{}});var sr=qi?function(t,e){K.value=e,qi(t,"__bindData__",K)}:u;or.argsClass||(me=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Ni.call(t,"callee")||!1});var lr=Xi||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Wi.call(t)==$||!1},cr=ue({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),ur=Gi?function(t){return Oe(t)?or.enumPrototypes&&"function"==typeof t||or.nonEnumArgs&&t.length&&me(t)?cr(t):Gi(t):[]}:cr,hr={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:ur,loop:"if (callback(iterable[index], index, collection) === false) return result"},fr={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:ur,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pr={top:"if (!objectTypes[typeof iterable]) return result;\n"+hr.top,array:!1},dr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gr=He(dr),mr=xi("("+ur(gr).join("|")+")","g"),vr=xi("["+ur(dr).join("")+"]","g"),yr=ue(hr),br=ue(fr,{top:fr.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),xr=ue(fr),wr=ue(hr,pr,{useHas:!1}),_r=ue(hr,pr);Ae(/x/)&&(Ae=function(t){return"function"==typeof t&&Wi.call(t)==L});var Cr=Oi?function(t){if(!t||Wi.call(t)!=X||!or.argsClass&&me(t))return!1;var e=t.valueOf,n="function"==typeof e&&(n=Oi(e))&&Oi(n);return n?t==n||Oi(t)==n:de(t)}:de,kr=le(function(t,e,n){Ni.call(t,n)?t[n]++:t[n]=1}),Hr=le(function(t,e,n){(Ni.call(t,n)?t[n]:t[n]=[]).push(e)}),Er=le(function(t,e,n){t[n]=e}),Tr=en,Sr=Ge;nr&&re&&"function"==typeof Fi&&(qn=function(t){if(!Ae(t))throw new _i;return Fi.apply(n,arguments)});var Mr=8==Qi(C+"08")?Qi:function(t,e){return Qi(Fe(t)?t.replace(A,""):t,e||0)};return m.after=jn,m.assign=br,m.at=Xe,m.bind=Rn,m.bindAll=Dn,m.bindKey=Fn,m.chain=si,m.compact=dn,m.compose=Vn,m.countBy=kr,m.createCallback=$n,m.curry=Wn,m.debounce=zn,m.defaults=xr,m.defer=qn,m.delay=Ln,m.difference=gn,m.filter=Ge,m.flatten=bn,m.forEach=Qe,m.forEachRight=Ze,m.forIn=wr,m.forInRight=we,m.forOwn=_r,m.forOwnRight=_e,m.functions=Ce,m.groupBy=Hr,m.indexBy=Er,m.initial=wn,m.intersection=_n,m.invert=He,m.invoke=tn,m.keys=ur,m.map=en,m.max=nn,m.memoize=Bn,m.merge=$e,m.min=rn,m.omit=We,m.once=Xn,m.pairs=ze,m.partial=Yn,m.partialRight=Un,m.pick=qe,m.pluck=Tr,m.pull=Hn,m.range=En,m.reject=sn,m.remove=Tn,m.rest=Sn,m.shuffle=cn,m.sortBy=fn,m.tap=li,m.throttle=Gn,m.times=ri,m.toArray=pn,m.transform=Le,m.union=Pn,m.uniq=In,m.values=Be,m.where=Sr,m.without=An,m.wrap=Jn,m.zip=On,m.zipObject=Nn,m.collect=en,m.drop=Sn,m.each=Qe,m.eachRight=Ze,m.extend=br,m.methods=Ce,m.object=Nn,m.select=Ge,m.tail=Sn,m.unique=In,m.unzip=On,Zn(m),m.clone=ve,m.cloneDeep=ye,m.contains=Ye,m.escape=Kn,m.every=Ue,m.find=Je,m.findIndex=mn,m.findKey=be,m.findLast=Ke,m.findLastIndex=vn,m.findLastKey=xe,m.has=ke,m.identity=Qn,m.indexOf=xn,m.isArguments=me,m.isArray=lr,m.isBoolean=Ee,m.isDate=Te,m.isElement=Se,m.isEmpty=Me,m.isEqual=Pe,m.isFinite=Ie,m.isFunction=Ae,m.isNaN=Ne,m.isNull=je,m.isNumber=Re,m.isObject=Oe,m.isPlainObject=Cr,m.isRegExp=De,m.isString=Fe,m.isUndefined=Ve,m.lastIndexOf=kn,m.mixin=Zn,m.noConflict=ti,m.parseInt=Mr,m.random=ei,m.reduce=on,m.reduceRight=an,m.result=ni,m.runInContext=d,m.size=un,m.some=hn,m.sortedIndex=Mn,m.template=ii,m.unescape=oi,m.uniqueId=ai,m.all=Ue,m.any=hn,m.detect=Je,m.findWhere=Je,m.foldl=on,m.foldr=an,m.include=Ye,m.inject=on,_r(m,function(t,e){m.prototype[e]||(m.prototype[e]=function(){var e=[this.__wrapped__],n=this.__chain__;Ri.apply(e,arguments);var i=t.apply(m,e);return n?new v(i,n):i})}),m.first=yn,m.last=Cn,m.sample=ln,m.take=yn,m.head=yn,_r(m,function(t,e){var n="sample"!==e;m.prototype[e]||(m.prototype[e]=function(e,i){var r=this.__chain__,o=t(this.__wrapped__,e,i);return r||null!=e&&(!i||n&&"function"==typeof e)?new v(o,r):o})}),m.VERSION="2.2.1",m.prototype.chain=ci,m.prototype.toString=ui,m.prototype.value=hi,m.prototype.valueOf=hi,yr(["join","pop","shift"],function(t){var e=Ci[t];m.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new v(n,t):n}}),yr(["push","reverse","sort","unshift"],function(t){var e=Ci[t];m.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),yr(["concat","slice","splice"],function(t){var e=Ci[t];m.prototype[t]=function(){return new v(e.apply(this.__wrapped__,arguments),this.__chain__)}}),or.spliceObjects||yr(["pop","shift","splice"],function(t){var e=Ci[t],n="splice"==t;m.prototype[t]=function(){var t=this.__chain__,i=this.__wrapped__,r=e.apply(i,arguments);return 0===i.length&&delete i[0],t||n?new v(r,t):r}}),m}var g,m=[],v=[],y=0,b={},x=+new Date+"",w=75,_=40,C=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",H=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,S=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M=/\w*$/,P=/^function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,A=RegExp("^["+C+"]*0+(?=.$)"),O=/($^)/,N=/\bthis\b/,j=/['\n\r\t\u2028\u2029\\]/g,R=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],D=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],F=0,V="[object Arguments]",$="[object Array]",W="[object Boolean]",z="[object Date]",q="[object Error]",L="[object Function]",B="[object Number]",X="[object Object]",Y="[object RegExp]",U="[object String]",G={};G[L]=!1,G[V]=G[$]=G[W]=G[z]=G[B]=G[X]=G[Y]=G[U]=!0;var J={leading:!1,maxWait:0,trailing:!1},K={configurable:!1,enumerable:!1,value:null,writable:!1},Q={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Z={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},te={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},ee=Z[typeof window]&&window||this,ne=Z[typeof exports]&&exports&&!exports.nodeType&&exports,ie=Z[typeof module]&&module&&!module.nodeType&&module,re=ie&&ie.exports===ne&&ne,oe=Z[typeof global]&&global;!oe||oe.global!==oe&&oe.window!==oe||(ee=oe);var ae=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ee._=ae,define("lodash",[],function(){return ae})):ne&&ie?re?(ie.exports=ae)._=ae:ne._=ae:ee._=ae}.call(this),function(t,e){function n(t){var e=t.length,n=X.type(t);return X.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=re[t]={};return X.each(t.match(U)||[],function(t,n){e[n]=!0}),e}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=X.expando+Math.random()}function o(t,n,i){var r;if(i===e&&1===t.nodeType)if(r="data-"+n.replace(le,"-$1").toLowerCase(),i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:se.test(i)?JSON.parse(i):i}catch(o){}oe.set(t,n,i)}else i=e;return i}function a(){return!0}function s(){return!1}function l(){try{return A.activeElement}catch(t){}}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t,e,n){if(X.isFunction(e))return X.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return X.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(ye.test(e))return X.filter(e,t,n);e=X.filter(e,t)}return X.grep(t,function(t){return z.call(e,t)>=0!==n})}function h(t,e){return X.nodeName(t,"table")&&X.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Me.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function d(t,e){for(var n=t.length,i=0;n>i;i++)ae.set(t[i],"globalEval",!e||ae.get(e[i],"globalEval"))}function g(t,e){var n,i,r,o,a,s,l,c;if(1===e.nodeType){if(ae.hasData(t)&&(o=ae.access(t),a=ae.set(e,o),c=o.events)){delete a.handle,a.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)X.event.add(e,r,c[r][n])}oe.hasData(t)&&(s=oe.access(t),l=X.extend({},s),oe.set(e,l))}}function m(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&X.nodeName(t,n)?X.merge([t],i):i}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ee.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=qe.length;r--;)if(e=qe[r]+n,e in t)return e;return i}function b(t,e){return t=e||t,"none"===X.css(t,"display")||!X.contains(t.ownerDocument,t)}function x(e){return t.getComputedStyle(e,null)}function w(t,e){for(var n,i,r,o=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(o[a]=ae.get(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(o[a]=ae.access(i,"olddisplay",H(i.nodeName)))):o[a]||(r=b(i),(n&&"none"!==n||!r)&&ae.set(i,"olddisplay",r?n:X.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function _(t,e,n){var i=Re.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function C(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=X.css(t,n+ze[o],!0,r)),i?("content"===n&&(a-=X.css(t,"padding"+ze[o],!0,r)),"margin"!==n&&(a-=X.css(t,"border"+ze[o]+"Width",!0,r))):(a+=X.css(t,"padding"+ze[o],!0,r),"padding"!==n&&(a+=X.css(t,"border"+ze[o]+"Width",!0,r)));return a}function k(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=x(t),a=X.support.boxSizing&&"border-box"===X.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=Ae(t,e,o),(0>r||null==r)&&(r=t.style[e]),De.test(r))return r;i=a&&(X.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+C(t,e,n||(a?"border":"content"),i,o)+"px"}function H(t){var e=A,n=Ve[t];return n||(n=E(t,e),"none"!==n&&n||(Oe=(Oe||X("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(Oe[0].contentWindow||Oe[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=E(t,e),Oe.detach()),Ve[t]=n),n}function E(t,e){var n=X(e.createElement(t)).appendTo(e.body),i=X.css(n[0],"display");return n.remove(),i}function T(t,e,n,i){var r;if(X.isArray(e))X.each(e,function(e,r){n||Be.test(t)?i(t,r):T(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==X.type(e))i(t,e);else for(r in e)T(t+"["+r+"]",e[r],n,i)}function S(t){return X.isWindow(t)?t:9===t.nodeType&&t.defaultView}var M,P,I=typeof e,A=(t.location,t.document),O=A.documentElement,N=t.jQuery,j=t.$,R={},D=[],F="2.0.3 -sizzle,-wrap,-ajax,-ajax/script,-ajax/jsonp,-ajax/xhr,-effects,-deprecated",V=D.concat,$=D.push,W=D.slice,z=D.indexOf,q=R.toString,L=R.hasOwnProperty,B=F.trim,X=function(t,e){return new X.fn.init(t,e,M)},Y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=/\S+/g,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/^-ms-/,Q=/-([\da-z])/gi,Z=function(t,e){return e.toUpperCase()},te=function(){A.removeEventListener("DOMContentLoaded",te,!1),t.removeEventListener("load",te,!1),X.ready()};X.fn=X.prototype={jquery:F,constructor:X,init:function(t,n,i){var r,o;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:G.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof X?n[0]:n,X.merge(this,X.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:A,!0)),J.test(r[1])&&X.isPlainObject(n))for(r in n)X.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=A.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=A,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):X.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),X.makeArray(t,this))},selector:"",length:0,toArray:function(){return W.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=X.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return X.each(this,t,e)},ready:function(t){return X.ready.promise().done(t),this},slice:function(){return this.pushStack(W.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(X.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:[].sort,splice:[].splice},X.fn.init.prototype=X.fn,X.extend=X.fn.extend=function(){var t,n,i,r,o,a,s=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==typeof s||X.isFunction(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(n in t)i=s[n],r=t[n],s!==r&&(u&&r&&(X.isPlainObject(r)||(o=X.isArray(r)))?(o?(o=!1,a=i&&X.isArray(i)?i:[]):a=i&&X.isPlainObject(i)?i:{},s[n]=X.extend(u,a,r)):r!==e&&(s[n]=r));return s},X.extend({expando:"jQuery"+(F+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===X&&(t.$=j),e&&t.jQuery===X&&(t.jQuery=N),X},isReady:!1,readyWait:1,holdReady:function(t){t?X.readyWait++:X.ready(!0)},ready:function(t){(t===!0?--X.readyWait:X.isReady)||(X.isReady=!0,t!==!0&&--X.readyWait>0||(P.resolveWith(A,[X]),X.fn.trigger&&X(A).trigger("ready").off("ready")))},isFunction:function(t){return"function"===X.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?R[q.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==X.type(t)||t.nodeType||X.isWindow(t))return!1;try{if(t.constructor&&!L.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||A;var i=J.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=X.buildFragment([t],e,r),r&&X(r).remove(),X.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(r){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&X.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=X.trim(t),t&&(1===t.indexOf("use strict")?(e=A.createElement("script"),e.text=t,A.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(K,"ms-").replace(Q,Z)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,a=t.length,s=n(t);if(i){if(s)for(;a>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(s)for(;a>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":B.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?X.merge(i,"string"==typeof t?[t]:t):$.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:z.call(e,t,n)},merge:function(t,n){var i=n.length,r=t.length,o=0;if("number"==typeof i)for(;i>o;o++)t[r++]=n[o];else for(;n[o]!==e;)t[r++]=n[o++];return t.length=r,t},grep:function(t,e,n){var i,r=[],o=0,a=t.length;for(n=!!n;a>o;o++)i=!!e(t[o],o),n!==i&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)r=e(t[o],o,i),null!=r&&(l[l.length]=r);else for(o in t)r=e(t[o],o,i),null!=r&&(l[l.length]=r);return V.apply([],l)},guid:1,proxy:function(t,n){var i,r,o;return"string"==typeof n&&(i=t[n],n=t,t=i),X.isFunction(t)?(r=W.call(arguments,2),o=function(){return t.apply(n||this,r.concat(W.call(arguments)))},o.guid=t.guid=t.guid||X.guid++,o):e},access:function(t,n,i,r,o,a,s){var l=0,c=t.length,u=null==i;if("object"===X.type(i)){o=!0;for(l in i)X.access(t,n,l,i[l],!0,a,s)}else if(r!==e&&(o=!0,X.isFunction(r)||(s=!0),u&&(s?(n.call(t,r),n=null):(u=n,n=function(t,e,n){return u.call(X(t),n)})),n))for(;c>l;l++)n(t[l],i,s?r:r.call(t[l],l,n(t[l],i)));return o?t:u?n.call(t):c?n(t[0],i):a},now:Date.now,swap:function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r}}),X.ready.promise=function(e){return P||(P=X.Deferred(),"complete"===A.readyState?setTimeout(X.ready):(A.addEventListener("DOMContentLoaded",te,!1),t.addEventListener("load",te,!1))),P.promise(e)},X.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){R["[object "+e+"]"]=e.toLowerCase()}),M=X(A);var ee,ne=O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector,ie=function(t,e){if(t===e)return ee=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n?t===A||X.contains(A,t)?-1:e===A||X.contains(A,e)?1:0:4&n?-1:1:t.compareDocumentPosition?-1:1};X.extend({find:function(t,e,n,i){var r,o,a=0;if(n=n||[],e=e||A,!t||"string"!=typeof t)return n;if(1!==(o=e.nodeType)&&9!==o)return[];if(i)for(;r=i[a++];)X.find.matchesSelector(r,t)&&n.push(r);else X.merge(n,e.querySelectorAll(t));return n},unique:function(t){var e,n=[],i=0,r=0;if(ee=!1,t.sort(ie),ee){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},text:function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r)return t.textContent;if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=X.text(e);return n},contains:function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!n.contains(i))},isXMLDoc:function(t){return"HTML"!==(t.ownerDocument||t).documentElement.nodeName},expr:{attrHandle:{},match:{bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),X.extend(X.find,{matches:function(t,e){return X.find(t,null,null,e)},matchesSelector:function(t,e){return ne.call(t,e)},attr:function(t,e){return t.getAttribute(e)}});var re={};X.Callbacks=function(t){t="string"==typeof t?re[t]||i(t):X.extend({},t);var n,r,o,a,s,l,c=[],u=!t.once&&[],h=function(e){for(n=t.memory&&e,r=!0,l=a||0,a=0,s=c.length,o=!0;c&&s>l;l++)if(c[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,c&&(u?u.length&&h(u.shift()):n?c=[]:f.disable())},f={add:function(){if(c){var e=c.length;!function i(e){X.each(e,function(e,n){var r=X.type(n);"function"===r?t.unique&&f.has(n)||c.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),o?s=c.length:n&&(a=e,h(n))}return this},remove:function(){return c&&X.each(arguments,function(t,e){for(var n;(n=X.inArray(e,c,n))>-1;)c.splice(n,1),o&&(s>=n&&s--,l>=n&&l--)}),this},has:function(t){return t?X.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],s=0,this},disable:function(){return c=u=n=e,this},disabled:function(){return!c},lock:function(){return u=e,n||f.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||r&&!u||(e=e||[],e=[t,e.slice?e.slice():e],o?u.push(e):h(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},X.extend({Deferred:function(t){var e=[["resolve","done",X.Callbacks("once memory"),"resolved"],["reject","fail",X.Callbacks("once memory"),"rejected"],["notify","progress",X.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return X.Deferred(function(n){X.each(e,function(e,o){var a=o[0],s=X.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&X.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?X.extend(t,i):i}},r={};return i.pipe=i.then,X.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=W.call(arguments),a=o.length,s=1!==a||t&&X.isFunction(t.promise)?a:0,l=1===s?t:X.Deferred(),c=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?W.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=Array(a),n=Array(a),i=Array(a);a>r;r++)o[r]&&X.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,e)):--s;return s||l.resolveWith(i,o),l.promise()}}),X.support=function(e){var n=A.createElement("input"),i=A.createDocumentFragment(),r=A.createElement("div"),o=A.createElement("select"),a=o.appendChild(A.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=a.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!a.disabled,n=A.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===r.style.backgroundClip,X(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",a=A.getElementsByTagName("body")[0];a&&(n=A.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",X.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===r.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(r,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(A.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),a.removeChild(n))}),e):e}({});var oe,ae,se=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,le=/([A-Z])/g;r.uid=1,r.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},r.prototype={key:function(t){if(!r.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=r.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,X.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=n;else if(X.isEmptyObject(o))X.extend(this.cache[r],e);else for(i in e)o[i]=e[i];return o},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var r;return n===e||n&&"string"==typeof n&&i===e?(r=this.get(t,n),r!==e?r:this.get(t,X.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,r,o,a=this.key(t),s=this.cache[a];if(n===e)this.cache[a]={};else{X.isArray(n)?r=n.concat(n.map(X.camelCase)):(o=X.camelCase(n),n in s?r=[n,o]:(r=o,r=r in s?[r]:r.match(U)||[])),i=r.length;for(;i--;)delete s[r[i]]}},hasData:function(t){return!X.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},oe=new r,ae=new r,X.extend({acceptData:r.accepts,hasData:function(t){return oe.hasData(t)||ae.hasData(t)},data:function(t,e,n){return oe.access(t,e,n)},removeData:function(t,e){oe.remove(t,e)},_data:function(t,e,n){return ae.access(t,e,n)},_removeData:function(t,e){ae.remove(t,e)}}),X.fn.extend({data:function(t,n){var i,r,a=this[0],s=0,l=null;if(t===e){if(this.length&&(l=oe.get(a),1===a.nodeType&&!ae.get(a,"hasDataAttrs"))){for(i=a.attributes;i.length>s;s++)r=i[s].name,0===r.indexOf("data-")&&(r=X.camelCase(r.slice(5)),o(a,r,l[r]));ae.set(a,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){oe.set(this,t)}):X.access(this,function(n){var i,r=X.camelCase(t);if(a&&n===e){if(i=oe.get(a,t),i!==e)return i;if(i=oe.get(a,r),i!==e)return i;if(i=o(a,r,e),i!==e)return i}else this.each(function(){var i=oe.get(this,r);oe.set(this,r,n),-1!==t.indexOf("-")&&i!==e&&oe.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){oe.remove(this,t)})}}),X.extend({queue:function(t,n,i){var r;return t?(n=(n||"fx")+"queue",r=ae.get(t,n),i&&(!r||X.isArray(i)?r=ae.access(t,n,X.makeArray(i)):r.push(i)),r||[]):e},dequeue:function(t,e){e=e||"fx";var n=X.queue(t,e),i=n.length,r=n.shift(),o=X._queueHooks(t,e),a=function(){X.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ae.get(t,n)||ae.access(t,n,{empty:X.Callbacks("once memory").add(function(){ae.remove(t,[e+"queue",n])})})}}),X.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?X.queue(this[0],t):n===e?this:this.each(function(){var e=X.queue(this,t,n);X._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&X.dequeue(this,t)})},dequeue:function(t){return this.each(function(){X.dequeue(this,t)})},delay:function(t,e){return t=X.fx?X.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,o=X.Deferred(),a=this,s=this.length,l=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";s--;)i=ae.get(a[s],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var ce,ue,he=/[\t\r\n\f]/g,fe=/\r/g,pe=/^(?:input|select|textarea|button)$/i;X.fn.extend({attr:function(t,e){return X.access(this,X.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){X.removeAttr(this,t)})},prop:function(t,e){return X.access(this,X.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[X.propFix[t]||t]})},addClass:function(t){var e,n,i,r,o,a=0,s=this.length,l="string"==typeof t&&t;if(X.isFunction(t))return this.each(function(e){X(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(U)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(he," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=X.trim(i)}return this},removeClass:function(t){var e,n,i,r,o,a=0,s=this.length,l=0===arguments.length||"string"==typeof t&&t;if(X.isFunction(t))return this.each(function(e){X(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(U)||[];s>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(he," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?X.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):X.isFunction(t)?this.each(function(n){X(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,r=X(this),o=t.match(U)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===I||"boolean"===n)&&(this.className&&ae.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ae.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(he," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,o=this[0];return arguments.length?(r=X.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=r?t.call(this,i,X(this).val()):t,null==o?o="":"number"==typeof o?o+="":X.isArray(o)&&(o=X.map(o,function(t){return null==t?"":t+""})),n=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))})):o?(n=X.valHooks[o.type]||X.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==e?i:(i=o.value,"string"==typeof i?i.replace(fe,""):null==i?"":i)):void 0
}}),X.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(X.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&X.nodeName(n.parentNode,"optgroup"))){if(e=X(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=X.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=X.inArray(X(i).val(),o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,n,i){var r,o,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?typeof t.getAttribute===I?X.prop(t,n,i):(1===a&&X.isXMLDoc(t)||(n=n.toLowerCase(),r=X.attrHooks[n]||(X.expr.match.bool.test(n)?ue:ce)),i===e?r&&"get"in r&&null!==(o=r.get(t,n))?o:(o=X.find.attr(t,n),null==o?e:o):null!==i?r&&"set"in r&&(o=r.set(t,i,n))!==e?o:(t.setAttribute(n,i+""),i):(X.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(U);if(o&&1===t.nodeType)for(;n=o[r++];)i=X.propFix[n]||n,X.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!X.support.radioValue&&"radio"===e&&X.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var r,o,a,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?(a=1!==s||!X.isXMLDoc(t),a&&(n=X.propFix[n]||n,o=X.propHooks[n]),i!==e?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:t[n]=i:o&&"get"in o&&null!==(r=o.get(t,n))?r:t[n]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||pe.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),ue={set:function(t,e,n){return e===!1?X.removeAttr(t,n):t.setAttribute(n,n),n}},X.each(X.expr.match.bool.source.match(/\w+/g),function(t,n){var i=X.expr.attrHandle[n]||X.find.attr;X.expr.attrHandle[n]=function(t,n,r){var o=X.expr.attrHandle[n],a=r?e:(X.expr.attrHandle[n]=e)!=i(t,n,r)?n.toLowerCase():null;return X.expr.attrHandle[n]=o,a}}),X.support.optSelected||(X.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),X.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){X.propFix[this.toLowerCase()]=this}),X.each(["radio","checkbox"],function(){X.valHooks[this]={set:function(t,n){return X.isArray(n)?t.checked=X.inArray(X(t).val(),n)>=0:e}},X.support.checkOn||(X.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var de=/^key/,ge=/^(?:mouse|contextmenu)|click/,me=/^(?:focusinfocus|focusoutblur)$/,ve=/^([^.]*)(?:\.(.+)|)$/;X.event={global:{},add:function(t,n,i,r,o){var a,s,l,c,u,h,f,p,d,g,m,v=ae.get(t);if(v){for(i.handler&&(a=i,i=a.handler,o=a.selector),i.guid||(i.guid=X.guid++),(c=v.events)||(c=v.events={}),(s=v.handle)||(s=v.handle=function(t){return typeof X===I||t&&X.event.triggered===t.type?e:X.event.dispatch.apply(s.elem,arguments)},s.elem=t),n=(n||"").match(U)||[""],u=n.length;u--;)l=ve.exec(n[u])||[],d=m=l[1],g=(l[2]||"").split(".").sort(),d&&(f=X.event.special[d]||{},d=(o?f.delegateType:f.bindType)||d,f=X.event.special[d]||{},h=X.extend({type:d,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&X.expr.match.needsContext.test(o),namespace:g.join(".")},a),(p=c[d])||(p=c[d]=[],p.delegateCount=0,f.setup&&f.setup.call(t,r,g,s)!==!1||t.addEventListener&&t.addEventListener(d,s,!1)),f.add&&(f.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,h):p.push(h),X.event.global[d]=!0);t=null}},remove:function(t,e,n,i,r){var o,a,s,l,c,u,h,f,p,d,g,m=ae.hasData(t)&&ae.get(t);if(m&&(l=m.events)){for(e=(e||"").match(U)||[""],c=e.length;c--;)if(s=ve.exec(e[c])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p){for(h=X.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,f=l[p]||[],s=s[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!r&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,h.remove&&h.remove.call(t,u));a&&!f.length&&(h.teardown&&h.teardown.call(t,d,m.handle)!==!1||X.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)X.event.remove(t,p+e[c],n,i,!0);X.isEmptyObject(l)&&(delete m.handle,ae.remove(t,"events"))}},trigger:function(n,i,r,o){var a,s,l,c,u,h,f,p=[r||A],d=L.call(n,"type")?n.type:n,g=L.call(n,"namespace")?n.namespace.split("."):[];if(s=l=r=r||A,3!==r.nodeType&&8!==r.nodeType&&!me.test(d+X.event.triggered)&&(d.indexOf(".")>=0&&(g=d.split("."),d=g.shift(),g.sort()),u=0>d.indexOf(":")&&"on"+d,n=n[X.expando]?n:new X.Event(d,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:X.makeArray(i,[n]),f=X.event.special[d]||{},o||!f.trigger||f.trigger.apply(r,i)!==!1)){if(!o&&!f.noBubble&&!X.isWindow(r)){for(c=f.delegateType||d,me.test(c+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),l=s;l===(r.ownerDocument||A)&&p.push(l.defaultView||l.parentWindow||t)}for(a=0;(s=p[a++])&&!n.isPropagationStopped();)n.type=a>1?c:f.bindType||d,h=(ae.get(s,"events")||{})[n.type]&&ae.get(s,"handle"),h&&h.apply(s,i),h=u&&s[u],h&&X.acceptData(s)&&h.apply&&h.apply(s,i)===!1&&n.preventDefault();return n.type=d,o||n.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),i)!==!1||!X.acceptData(r)||u&&X.isFunction(r[d])&&!X.isWindow(r)&&(l=r[u],l&&(r[u]=null),X.event.triggered=d,r[d](),X.event.triggered=e,l&&(r[u]=l)),n.result}},dispatch:function(t){t=X.event.fix(t);var n,i,r,o,a,s=[],l=W.call(arguments),c=(ae.get(this,"events")||{})[t.type]||[],u=X.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(s=X.event.handlers.call(this,t,c),n=0;(o=s[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(a.namespace))&&(t.handleObj=a,t.data=a.data,r=((X.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l),r!==e&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,o,a,s=[],l=n.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(r=[],i=0;l>i;i++)a=n[i],o=a.selector+" ",r[o]===e&&(r[o]=a.needsContext?X(o,this).index(c)>=0:X.find(o,this,null,[c]).length),r[o]&&r.push(a);r.length&&s.push({elem:c,handlers:r})}return n.length>l&&s.push({elem:this,handlers:n.slice(l)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,o,a=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||A,r=i.documentElement,o=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),t.which||a===e||(t.which=1&a?1:2&a?3:4&a?2:0),t}},fix:function(t){if(t[X.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=ge.test(r)?this.mouseHooks:de.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new X.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=A),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&X.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return X.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=X.extend(new X.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?X.event.trigger(r,null,e):X.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},X.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},X.Event=function(t,n){return this instanceof X.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?a:s):this.type=t,n&&X.extend(this,n),this.timeStamp=t&&t.timeStamp||X.now(),this[X.expando]=!0,e):new X.Event(t,n)},X.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=a,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=a,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},X.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){X.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!X.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),X.support.focusinBubbles||X.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){X.event.simulate(e,t.target,X.event.fix(t),!0)};X.event.special[e]={setup:function(){0===n++&&A.addEventListener(t,i,!0)},teardown:function(){0===--n&&A.removeEventListener(t,i,!0)}}}),X.fn.extend({on:function(t,n,i,r,o){var a,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(l in t)this.on(l,n,i,t[l],o);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=s;else if(!r)return this;return 1===o&&(a=r,r=function(t){return X().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=X.guid++)),this.each(function(){X.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,X(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=s),this.each(function(){X.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){X.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?X.event.trigger(t,n,i,!0):e}});var ye=/^.[^:#\[\.,]*$/,be=/^(?:parents|prev(?:Until|All))/,xe=X.expr.match.needsContext,we={children:!0,contents:!0,next:!0,prev:!0};X.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(X(t).filter(function(){for(e=0;r>e;e++)if(X.contains(i[e],this))return!0}));for(e=0;r>e;e++)X.find(t,i[e],n);return n=this.pushStack(r>1?X.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=X(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(X.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(u(this,t||[],!0))},filter:function(t){return this.pushStack(u(this,t||[],!1))},is:function(t){return!!u(this,"string"==typeof t&&xe.test(t)?X(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=xe.test(t)||"string"!=typeof t?X(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(a?a.index(n)>-1:1===n.nodeType&&X.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(o.length>1?X.unique(o):o)},index:function(t){return t?"string"==typeof t?z.call(X(t),this[0]):z.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?X(t,e):X.makeArray(t&&t.nodeType?[t]:t),i=X.merge(this.get(),n);return this.pushStack(X.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),X.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return X.dir(t,"parentNode")},parentsUntil:function(t,e,n){return X.dir(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return X.dir(t,"nextSibling")},prevAll:function(t){return X.dir(t,"previousSibling")},nextUntil:function(t,e,n){return X.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return X.dir(t,"previousSibling",n)},siblings:function(t){return X.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return X.sibling(t.firstChild)},contents:function(t){return t.contentDocument||X.merge([],t.childNodes)}},function(t,e){X.fn[t]=function(n,i){var r=X.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=X.filter(i,r)),this.length>1&&(we[t]||X.unique(r),be.test(t)&&r.reverse()),this.pushStack(r)}}),X.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?X.find.matchesSelector(i,t)?[i]:[]:X.find.matches(t,X.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var r=[],o=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&X(t).is(i))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var _e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ce=/<([\w:]+)/,ke=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Ee=/^(?:checkbox|radio)$/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^$|\/(?:java|ecma)script/i,Me=/^true\/(.*)/,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,X.fn.extend({text:function(t){return X.access(this,function(t){return t===e?X.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?X.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||X.cleanData(m(n)),n.parentNode&&(e&&X.contains(n.ownerDocument,n)&&d(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(X.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return X.clone(this,t,e)})},html:function(t){return X.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!He.test(t)&&!Ie[(Ce.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(_e,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(X.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=X.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],r=t[e++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),X(this).remove(),r.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=V.apply([],t);var i,r,o,a,s,l,c=0,u=this.length,h=this,d=u-1,g=t[0],v=X.isFunction(g);if(v||!(1>=u||"string"!=typeof g||X.support.checkClone)&&Te.test(g))return this.each(function(i){var r=h.eq(i);v&&(t[0]=g.call(this,i,r.html())),r.domManip(t,e,n)});if(u&&(i=X.buildFragment(t,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=X.map(m(i,"script"),f),a=o.length;u>c;c++)s=i,c!==d&&(s=X.clone(s,!0,!0),a&&X.merge(o,m(s,"script"))),e.call(this[c],s,c);if(a)for(l=o[o.length-1].ownerDocument,X.map(o,p),c=0;a>c;c++)s=o[c],Se.test(s.type||"")&&!ae.access(s,"globalEval")&&X.contains(l,s)&&(s.src?X._evalUrl(s.src):X.globalEval(s.textContent.replace(Pe,"")))}return this}}),X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){X.fn[t]=function(t){for(var n,i=[],r=X(t),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),X(r[a])[e](n),$.apply(i,n.get());return this.pushStack(i)}}),X.extend({clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=X.contains(t.ownerDocument,t);if(!(X.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||X.isXMLDoc(t)))for(a=m(s),o=m(t),i=0,r=o.length;r>i;i++)v(o[i],a[i]);if(e)if(n)for(o=o||m(t),a=a||m(s),i=0,r=o.length;r>i;i++)g(o[i],a[i]);else g(t,s);return a=m(s,"script"),a.length>0&&d(a,!l&&m(t,"script")),s},buildFragment:function(t,e,n,i){for(var r,o,a,s,l,c,u=0,h=t.length,f=e.createDocumentFragment(),p=[];h>u;u++)if(r=t[u],r||0===r)if("object"===X.type(r))X.merge(p,r.nodeType?[r]:r);else if(ke.test(r)){for(o=o||f.appendChild(e.createElement("div")),a=(Ce.exec(r)||["",""])[1].toLowerCase(),s=Ie[a]||Ie._default,o.innerHTML=s[1]+r.replace(_e,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;X.merge(p,o.childNodes),o=f.firstChild,o.textContent=""}else p.push(e.createTextNode(r));for(f.textContent="",u=0;r=p[u++];)if((!i||-1===X.inArray(r,i))&&(l=X.contains(r.ownerDocument,r),o=m(f.appendChild(r),"script"),l&&d(o),n))for(c=0;r=o[c++];)Se.test(r.type||"")&&n.push(r);return f},cleanData:function(t){for(var n,i,o,a,s,l,c=X.event.special,u=0;(i=t[u])!==e;u++){if(r.accepts(i)&&(s=i[ae.expando],s&&(n=ae.cache[s]))){if(o=Object.keys(n.events||{}),o.length)for(l=0;(a=o[l])!==e;l++)c[a]?X.event.remove(i,a):X.removeEvent(i,a,n.handle);ae.cache[s]&&delete ae.cache[s]}delete oe.cache[i[oe.expando]]}},_evalUrl:function(t){return X.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});var Ae,Oe,Ne=/^(none|table(?!-c[ea]).+)/,je=/^margin/,Re=RegExp("^("+Y+")(.*)$","i"),De=RegExp("^("+Y+")(?!px)[a-z%]+$","i"),Fe=RegExp("^([+-])=("+Y+")","i"),Ve={BODY:"block"},$e={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:0,fontWeight:400},ze=["Top","Right","Bottom","Left"],qe=["Webkit","O","Moz","ms"];X.fn.extend({css:function(t,n){return X.access(this,function(t,n,i){var r,o,a={},s=0;if(X.isArray(n)){for(r=x(t),o=n.length;o>s;s++)a[n[s]]=X.css(t,n[s],!1,r);return a}return i!==e?X.style(t,n,i):X.css(t,n)},t,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){b(this)?X(this).show():X(this).hide()})}}),X.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ae(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,s,l=X.camelCase(n),c=t.style;return n=X.cssProps[l]||(X.cssProps[l]=y(c,l)),s=X.cssHooks[n]||X.cssHooks[l],i===e?s&&"get"in s&&(o=s.get(t,!1,r))!==e?o:c[n]:(a=typeof i,"string"===a&&(o=Fe.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(X.css(t,n)),a="number"),null==i||"number"===a&&isNaN(i)||("number"!==a||X.cssNumber[l]||(i+="px"),X.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),s&&"set"in s&&(i=s.set(t,i,r))===e||(c[n]=i)),e)}},css:function(t,n,i,r){var o,a,s,l=X.camelCase(n);return n=X.cssProps[l]||(X.cssProps[l]=y(t.style,l)),s=X.cssHooks[n]||X.cssHooks[l],s&&"get"in s&&(o=s.get(t,!0,i)),o===e&&(o=Ae(t,n,r)),"normal"===o&&n in We&&(o=We[n]),""===i||i?(a=parseFloat(o),i===!0||X.isNumeric(a)?a||0:o):o}}),Ae=function(t,n,i){var r,o,a,s=i||x(t),l=s?s.getPropertyValue(n)||s[n]:e,c=t.style;return s&&(""!==l||X.contains(t.ownerDocument,t)||(l=X.style(t,n)),De.test(l)&&je.test(n)&&(r=c.width,o=c.minWidth,a=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=s.width,c.width=r,c.minWidth=o,c.maxWidth=a)),l},X.each(["height","width"],function(t,n){X.cssHooks[n]={get:function(t,i,r){return i?0===t.offsetWidth&&Ne.test(X.css(t,"display"))?X.swap(t,$e,function(){return k(t,n,r)}):k(t,n,r):e},set:function(t,e,i){var r=i&&x(t);return _(t,e,i?C(t,n,i,X.support.boxSizing&&"border-box"===X.css(t,"boxSizing",!1,r),r):0)}}}),X(function(){X.support.reliableMarginRight||(X.cssHooks.marginRight={get:function(t,n){return n?X.swap(t,{display:"inline-block"},Ae,[t,"marginRight"]):e}}),!X.support.pixelPosition&&X.fn.position&&X.each(["top","left"],function(t,n){X.cssHooks[n]={get:function(t,i){return i?(i=Ae(t,n),De.test(i)?X(t).position()[n]+"px":i):e}}})}),X.expr&&X.expr.filters&&(X.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},X.expr.filters.visible=function(t){return!X.expr.filters.hidden(t)}),X.each({margin:"",padding:"",border:"Width"},function(t,e){X.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+ze[i]+e]=o[i]||o[i-2]||o[0];return r}},je.test(t)||(X.cssHooks[t+e].set=_)});var Le=/%20/g,Be=/\[\]$/,Xe=/\r?\n/g,Ye=/^(?:submit|button|image|reset|file)$/i,Ue=/^(?:input|select|textarea|keygen)/i;X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=X.prop(this,"elements");return t?X.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!X(this).is(":disabled")&&Ue.test(this.nodeName)&&!Ye.test(t)&&(this.checked||!Ee.test(t))}).map(function(t,e){var n=X(this).val();return null==n?null:X.isArray(n)?X.map(n,function(t){return{name:e.name,value:t.replace(Xe,"\r\n")}}):{name:e.name,value:n.replace(Xe,"\r\n")}}).get()}}),X.param=function(t,n){var i,r=[],o=function(t,e){e=X.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=X.ajaxSettings&&X.ajaxSettings.traditional),X.isArray(t)||t.jquery&&!X.isPlainObject(t))X.each(t,function(){o(this.name,this.value)});else for(i in t)T(i,t[i],n,o);return r.join("&").replace(Le,"+")},X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){X.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),X.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),X.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){X.offset.setOffset(this,t,e)});var n,i,r=this[0],o={top:0,left:0},a=r&&r.ownerDocument;return a?(n=a.documentElement,X.contains(n,r)?(typeof r.getBoundingClientRect!==I&&(o=r.getBoundingClientRect()),i=S(a),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}):o):void 0},X.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,c,u=X.css(t,"position"),h=X(t),f={};"static"===u&&(t.style.position="relative"),s=h.offset(),o=X.css(t,"top"),l=X.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),X.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+r),"using"in e?e.using.call(t,f):h.css(f)}},X.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===X.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),X.nodeName(t[0],"html")||(i=t.offset()),i.top+=X.css(t[0],"borderTopWidth",!0),i.left+=X.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-X.css(n,"marginTop",!0),left:e.left-i.left-X.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||O;t&&!X.nodeName(t,"html")&&"static"===X.css(t,"position");)t=t.offsetParent;return t||O})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;X.fn[n]=function(o){return X.access(this,function(n,o,a){var s=S(n);return a===e?s?s[i]:n[o]:(s?s.scrollTo(r?t.pageXOffset:a,r?a:t.pageYOffset):n[o]=a,e)},n,o,arguments.length,null)}}),X.each({Height:"height",Width:"width"},function(t,n){X.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){X.fn[r]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||o===!0?"margin":"border");return X.access(this,function(n,i,r){var o;return X.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):r===e?X.css(n,i,s):X.style(n,i,r,s)},n,a?r:e,a,null)}})}),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=X:"function"==typeof define&&define.amd&&define("jquery",[],function(){return X}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=X)}(window),function(){var t,e=this,n=e.Backbone,i=[],r=i.push,o=i.slice,a=i.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var s=e._;s||"undefined"==typeof require||(s=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var i=this,r=s.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,a,l,c,h,f;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:s.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=i=[],e||n)for(h=0,f=o.length;f>h;h++)r=o[h],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&h(n,e),i&&h(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},c=/\s+/,u=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(i));return!1}return!0},h=function(t,e){var n,i=-1,r=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};s.each(f,function(t,e){l[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=s.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,s.extend(t,l);var p=t.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(e,d)),e.parse&&(i=this.parse(i,e)||{}),(n=s.result(this,"defaults"))&&(i=s.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];s.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,o,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)e=r[i],s.isEqual(h[i],e)||a.push(i),s.isEqual(u[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete h[i]:h[i]=e;if(!l){a.length&&(this._pending=!0);for(var f=0,p=a.length;p>f;f++)this.trigger("change:"+a[f],this,h[a[f]],n)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)s.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),e.trigger("sync",e,i,t),void 0):!1},D(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,r,o,a=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=s.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=s.extend({},a,i)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(t){l.attributes=a;var e=l.parse(t,n);return n.wait&&(e=s.extend(i||{},e)),s.isObject(e)&&!l.set(e,n)?!1:(c&&c(l,t,n),l.trigger("sync",l,t,n),void 0)},D(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=a),o},destroy:function(t){t=t?s.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&i(),n&&n(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;D(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||R();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)
},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,s.extend(e||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];s.each(g,function(t){p.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)}});var m=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};s.extend(m.prototype,l,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,s.defaults(e||{},y))},remove:function(t,e){t=s.isArray(t)?t.slice():[t],e||(e={});var n,i,r,o;for(n=0,i=t.length;i>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=s.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),s.isArray(t)||(t=t?[t]:[]);var n,i,o,l,c,u=e.at,h=this.comparator&&null==u&&e.sort!==!1,f=s.isString(this.comparator)?this.comparator:null,p=[],d=[],g={};for(n=0,i=t.length;i>n;n++)(o=this._prepareModel(t[n],e))&&((l=this.get(o))?(e.remove&&(g[l.cid]=!0),e.merge&&(l.set(o.attributes,e),h&&!c&&l.hasChanged(f)&&(c=!0))):e.add&&(p.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,i=this.length;i>n;++n)g[(o=this.models[n]).cid]||d.push(o);d.length&&this.remove(d,e)}if(p.length&&(h&&(c=!0),this.length+=p.length,null!=u?a.apply(this.models,[u,0].concat(p)):r.apply(this.models,p)),c&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=p.length;i>n;n++)(o=p[n]).trigger("add",o,this,e);return c&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return s.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=s.isFunction(e)?e:function(t){return t.get(e)};return s.sortedIndex(this.models,t,i,n)},pluck:function(t){return s.invoke(this.models,"get",t)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},D(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(r){e.wait&&n.add(t,e),i&&i(t,r,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(b,function(t){m.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});var x=["groupBy","countBy","sortBy"];s.each(x,function(t){m.prototype[t]=function(e,n){var i=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,i,n)}});var w=t.View=function(t){this.cid=s.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];s.extend(w.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(s.isFunction(n)||(n=this[t[e]]),n){var i=e.match(_),r=i[1],o=i[2];n=s.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=s.extend({},s.result(this,"options"),t)),s.extend(this,s.pick(t,C)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var e=s.extend({},s.result(this,"attributes"));this.id&&(e.id=s.result(this,"id")),this.className&&(e["class"]=s.result(this,"className"));var n=t.$("<"+s.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,i){var r=k[e];s.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=s.result(n,"url")||R()),null!=i.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var a=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(s.extend(o,i));return n.trigger("request",n,l,i),l};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var H=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,S=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(H.prototype,l,{initialize:function(){},route:function(e,n,i){s.isRegExp(e)||(e=this._routeToRegExp(e)),s.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return t.history.route(e,function(o){var a=r._extractParameters(e,o);i&&i.apply(r,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),t.history.trigger("route",r,n,a)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(E,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(S,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return s.map(n,function(t){return t?decodeURIComponent(t):null})}});var P=t.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,O=/msie [\w.]+/,N=/\/$/;P.started=!1,s.extend(P.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(N,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(I,"")},start:function(e){if(P.started)throw new Error("Backbone.history has already been started");P.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=O.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(A,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,a=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!P.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),t.history=new P;var j=function(t,e){var n,i=this;n=t&&s.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},s.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&s.extend(n.prototype,t),n.__super__=i.prototype,n};p.extend=m.extend=H.extend=w.extend=P.extend=j;var R=function(){throw new Error('A "url" property or function must be specified')},D=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this),define("backbone",["lodash","jquery"],function(t){return function(){var e;return e||t.Backbone}}(this)),Backbone.ChildViewContainer=function(t,e){var n=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(n.prototype,{add:function(t,e){var n=t.cid;this._views[n]=t,t.model&&(this._indexByModel[t.model.cid]=n),e&&(this._indexByCustom[e]=n),this._updateLength()},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var n=t.cid;t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===n?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[n],this._updateLength()},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,n){e.each(this._views,function(i){e.isFunction(i[t])&&i[t].apply(i,n||[])})},_updateLength:function(){this.length=e.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(i,function(t){n.prototype[t]=function(){var n=e.values(this._views),i=[n].concat(e.toArray(arguments));return e[t].apply(e,i)}}),n}(Backbone,_),Backbone.Wreqr=function(t,e,n){var i={};return i.Handlers=function(t,e){var n=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,n){var i=null;e.isObject(t)&&!e.isFunction(t)&&(i=t.context,t=t.callback),this.setHandler(n,t,i)},this)},setHandler:function(t,e,n){var i={callback:e,context:n};this._wreqrHandlers[t]=i,this.trigger("handler:add",t,e,n)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(!e)throw Error("Handler not found for '"+t+"'");return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(t,n),i.CommandStorage=function(){var e=function(t){this.options=t,this._commands={},n.isFunction(this.initialize)&&this.initialize(t)};return n.extend(e.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var n=this.getCommands(t);n.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),e}(),i.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,n)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,e,i){var r=this.storage.getCommands(t);n.each(r.instances,function(t){e.apply(i,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var e,i=t.storageType||this.storageType;e=n.isFunction(i)?new i:i,this.storage=e}})}(i),i.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.getHandler(t).apply(this,e)}})}(i),i.EventAggregator=function(t,e){var n=function(){};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events),n}(t,n),i}(Backbone,Backbone.Marionette,_);var Marionette=function(t,e,n){function i(t){return a.call(t)}function r(t,e){var n=Error(t);throw n.name=e||"Error",n}var o={};e.Marionette=o,o.$=e.$;var a=Array.prototype.slice;return o.extend=e.Model.extend,o.getOption=function(t,e){if(t&&e){var n;return n=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},o.triggerMethod=function(){function t(t,e,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi,i=function(i){var r="on"+i.replace(e,t),o=this[r];return this.trigger.apply(this,arguments),n.isFunction(o)?o.apply(this,n.tail(arguments)):void 0};return i}(),o.MonitorDOMRefresh=function(){function t(t){t._isShown=!0,i(t)}function e(t){t._isRendered=!0,i(t)}function i(t){t._isShown&&t._isRendered&&n.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}return function(n){n.listenTo(n,"show",function(){t(n)}),n.listenTo(n,"render",function(){e(n)})}}(),function(t){function e(t,e,i,o){var a=o.split(/\s+/);n.each(a,function(n){var o=t[n];o||r("Method '"+n+"' was configured as an event handler, but does not exist."),t.listenTo(e,i,o,t)})}function i(t,e,n,i){t.listenTo(e,n,i,t)}function o(t,e,i,r){var o=r.split(/\s+/);n.each(o,function(n){var r=t[n];t.stopListening(e,i,r,t)})}function a(t,e,n,i){t.stopListening(e,n,i,t)}function s(t,e,i,r,o){e&&i&&(n.isFunction(i)&&(i=i.call(t)),n.each(i,function(i,a){n.isFunction(i)?r(t,e,a,i):o(t,e,a,i)}))}t.bindEntityEvents=function(t,n,r){s(t,n,r,i,e)},t.unbindEntityEvents=function(t,e,n){s(t,e,n,a,o)}}(o),o.Callbacks=function(){this._deferred=o.$.Deferred(),this._callbacks=[]},n.extend(o.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(n,i){e&&(n=e),t.call(n,i)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=o.$.Deferred(),this._callbacks=[],n.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.triggerMethod=o.triggerMethod,this.options=t||{},n.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,n.extend(o.Controller.prototype,e.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),o.Region=function(t){if(this.options=t||{},this.el=o.getOption(this,"el"),!this.el){var e=Error("An 'el' must be specified for a region.");throw e.name="NoElError",e}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(o.Region,{buildRegion:function(t,e){var i="string"==typeof t,r="string"==typeof t.selector,o=void 0===t.regionType,a="function"==typeof t;if(!a&&!i&&!r)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var s,l;i&&(s=t),t.selector&&(s=t.selector),a&&(l=t),!a&&o&&(l=e),t.regionType&&(l=t.regionType);var c=new l({el:s});return t.parentEl&&(c.getEl=function(e){var i=t.parentEl;return n.isFunction(i)&&(i=i()),i.find(e)}),c}}),n.extend(o.Region.prototype,e.Events,{show:function(t){this.ensureEl();var e=t.isClosed||n.isUndefined(t.$el),i=t!==this.currentView;i&&this.close(),t.render(),(i||e)&&this.open(t),this.currentView=t,o.triggerMethod.call(this,"show",t),o.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return o.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),o.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),o.Region.extend=o.extend,o.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var i={};return n.each(t,function(t,r){"string"==typeof t&&(t={selector:t}),t.selector&&(t=n.defaults({},t,e));var o=this.addRegion(r,t);i[r]=o},this),i},addRegion:function(e,i){var r,o=n.isObject(i),a=n.isString(i),s=!!i.selector;return r=a||o&&s?t.Region.buildRegion(i,t.Region):n.isFunction(i)?t.Region.buildRegion(i,t.Region):i,this._store(e,r),this.triggerMethod("region:add",e,r),r},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){n.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){n.each(this._regions,function(t){t.close()},this)},close:function(){this.removeRegions();var e=Array.prototype.slice.call(arguments);t.Controller.prototype.close.apply(this,e)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(t){e.prototype[t]=function(){var e=n.values(this._regions),i=[e].concat(n.toArray(arguments));return n[t].apply(n,i)}}),e}(o),o.TemplateCache=function(t){this.templateId=t},n.extend(o.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new o.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=i(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),n.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=o.$(t).html();return e&&0!==e.length||r("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return n.template(t)}}),o.Renderer={render:function(t,e){if(!t){var n=Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return i="function"==typeof t?t:o.TemplateCache.get(t),i(e)}},o.View=e.View.extend({constructor:function(){n.bindAll(this,"render");var t=Array.prototype.slice.apply(arguments);e.View.prototype.constructor.apply(this,t),o.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:o.triggerMethod,getTemplate:function(){return o.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=this.templateHelpers;return n.isFunction(e)&&(e=e.call(this)),n.extend(t,e)},configureTriggers:function(){if(this.triggers){var t={},e=n.result(this,"triggers");return n.each(e,function(e,n){t[n]=function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation();var n={view:this,model:this.model,collection:this.collection};this.triggerMethod(e,n)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),o.bindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.bindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,n.isFunction(t)&&(t=t.call(this));var i={},r=this.configureTriggers();n.extend(i,t,r),e.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),o.unbindEntityEvents(this,this.model,o.getOption(this,"modelEvents")),o.unbindEntityEvents(this,this.collection,o.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=this.triggerMethod("before:close");t!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(t),function(e){var n=t[e];this.ui[e]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&(n.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),o.ItemView=o.View.extend({constructor:function(){o.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),n=o.Renderer.render(e,t);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),o.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),o.CollectionView=o.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),o.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(t){this.closeEmptyView();var e=this.getItemView(t),n=this.collection.indexOf(t);this.addItemView(t,e,n)},onShowCalled:function(){this.children.each(function(t){o.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var t;this.collection.each(function(e,n){t=this.getItemView(e),this.addItemView(e,t,n)},this)},showEmptyView:function(){var t=o.getOption(this,"emptyView");if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new e.Model;this.addItemView(n,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var t=o.getOption(this,"itemView");return t||r("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(t,e,i){var r=o.getOption(this,"itemViewOptions");n.isFunction(r)&&(r=r.call(this,t,i));var a=this.buildItemView(t,e,r);this.addChildViewEventForwarding(a),this.triggerMethod("before:item:added",a),this.children.add(a),this.renderItemView(a,i),this._isShown&&o.triggerMethod.call(a,"show"),this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(t){var e=o.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var n=i(arguments);n[0]=e+":"+n[0],n.splice(1,0,t),o.triggerMethod.apply(this,n)},this)},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,i){var r=n.extend({model:t},i);return new e(r)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(this.stopListening(t),t.close?t.close():t.remove&&t.remove(),this.children.remove(t)),this.triggerMethod("item:removed",t)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(t,e){t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),o.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.prototype.constructor.apply(this,i(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var t=o.getOption(this,"itemView")||this.constructor;return t||r("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(o.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return o.Renderer.render(e,t)},appendHtml:function(t,e){var n=this.getItemViewContainer(t);n.append(e.el)},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e;if(t.itemViewContainer){var i=n.result(t,"itemViewContainer");e=t.$(i),0>=e.length&&r("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),o.Layout=o.ItemView.extend({regionType:o.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.prototype.constructor.call(this,t)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var t=Array.prototype.slice.apply(arguments),e=o.ItemView.prototype.render.apply(this,t);return e},close:function(){if(!this.isClosed){this.regionManager.close();var t=Array.prototype.slice.apply(arguments);o.ItemView.prototype.close.apply(this,t)}},addRegion:function(t,e){var n={};return n[t]=e,this.addRegions(n)[t]},addRegions:function(t){return this.regions=n.extend(this.regions||{},t),this._buildRegions(t)},removeRegion:function(t){return this.regionManager.removeRegion(t)},_buildRegions:function(t){var e=this,n={parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,n)},_initializeRegions:function(t){var e;this._initRegionManager(),e=n.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new o.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),o.AppRouter=e.Router.extend({constructor:function(t){if(e.Router.prototype.constructor.apply(this,i(arguments)),this.options=t,this.appRoutes){var n=o.getOption(this,"controller");
this.processAppRoutes(n,this.appRoutes)}},processAppRoutes:function(t,e){var i=n.keys(e).reverse();n.each(i,function(i){var r=e[i],o=t[r];if(!o)throw Error("Method '"+r+"' was not found on the controller");this.route(i,r,n.bind(o,t))},this)}}),o.Application=function(t){this._initRegionManager(),this._initCallbacks=new o.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},n.extend(this,t),this.triggerMethod=o.triggerMethod},n.extend(o.Application.prototype,e.Events,{execute:function(){var t=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,t)},request:function(){var t=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,t)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},removeRegion:function(t){this._regionManager.removeRegion(t)},module:function(){var t=i(arguments);return t.unshift(this),o.Module.create.apply(o.Module,t)},_initRegionManager:function(){this._regionManager=new o.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t){delete this[t]})}}),o.Application.extend=o.extend,o.Module=function(t,e){this.moduleName=t,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=o.triggerMethod},n.extend(o.Module.prototype,e.Events,{addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(n.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,o.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),o.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,i){if(t){var r=n.flatten([this,this.app,e,o,o.$,n,i]);t.apply(this,r)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks}}),n.extend(o.Module,{create:function(t,e,r){var o=t,a=i(arguments);a.splice(0,3),e=e.split(".");var s=e.length,l=[];return l[s-1]=r,n.each(e,function(e,n){var i=o;o=this._getModule(i,e,t),this._addModuleDefinition(i,o,l[n],a)},this),o},_getModule:function(t,e,n){var i=t[e];return i||(i=new o.Module(e,n),t[e]=i,t.submodules[e]=i),i},_addModuleDefinition:function(t,e,i,r){var o,a;n.isFunction(i)?(o=i,a=!0):n.isObject(i)?(o=i.define,a=i.startWithParent):a=!0,o&&e.addDefinition(o,r),e.startWithParent=e.startWithParent&&a,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o}(this,Backbone,_);define("marionette",["backbone"],function(t){return function(){var e;return e||t.Marionette}}(this)),define("app/router",["app/core","app/core"],function(){return Backbone.Router.extend({routes:{"":"index",":room":"room"},index:function(){var t=require("app/core");t.Connection.stop(),t.Halloween.stop(),t.Navigation.start(),t.Gatekeeper.start()},room:function(){var t=require("app/core");t.Gatekeeper.stop(),t.Connection.start(),t.Halloween.start(),t.Navigation.start()}})}),define("app/core",["app/router"],function(t){var e=new Marionette.Application;return e.addInitializer(function(){e.router=new t}),e.addRegions({body:"#region--body",modal:"#region--modal",navigation:"#region--navigation"}),e.on("start",function(){Backbone.history.start({hashChange:!1,pushState:!0})}),e}),define("app/connection/core",["app/core",window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.RTCPeerConnection?"./controllers/webrtc":"./controllers/fallback"],function(t,e){var n=t.module("Connection",function(){this.startWithParent=!1,this.controller=new e}),i=n.controller;return n.on("start",function(){i.connect()}),n.on("stop",function(){_.result(i,"disconnect")}),t.reqres.setHandler("connection:supported",function(){return!!window.webkitRTCPeerConnection||!!window.mozRTCPeerConnection||!!window.RTCPeerConnection}),t.reqres.setHandler("connection:streams",function(){return i.collection}),t.commands.setHandler("connection:mute",function(){i.mute()}),t.commands.setHandler("connection:unmute",function(){i.unmute()}),t.commands.setHandler("connection:pause",function(){i.pause()}),t.commands.setHandler("connection:resume",function(){i.resume()}),n}),define("text",{});var Handlebars={};!function(t,e){t.VERSION="1.0.0",t.COMPILER_REVISION=4,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},t.helpers={},t.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";t.registerHelper=function(e,i,o){if(n.call(e)===r){if(o||i)throw new t.Exception("Arg not supported with multiple helpers");t.Utils.extend(this.helpers,e)}else o&&(i.not=o),this.helpers[e]=i},t.registerPartial=function(e,i){n.call(e)===r?t.Utils.extend(this.partials,e):this.partials[e]=i},t.registerHelper("helperMissing",function(t){if(2===arguments.length)return e;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,r){var o=r.inverse||function(){},a=r.fn,s=n.call(e);return s===i&&(e=e.call(this)),e===!0?a(this):e===!1||null==e?o(this):"[object Array]"===s?e.length>0?t.helpers.each(e,r):o(this):a(e)}),t.K=function(){},t.createFrame=Object.create||function(e){t.K.prototype=e;var n=new t.K;return t.K.prototype=null,n},t.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,n){if(t.logger.level<=e){var i=t.logger.methodMap[e];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},t.log=function(e,n){t.logger.log(e,n)},t.registerHelper("each",function(e,r){var o,a=r.fn,s=r.inverse,l=0,c="",u=n.call(e);if(u===i&&(e=e.call(this)),r.data&&(o=t.createFrame(r.data)),e&&"object"==typeof e)if(e instanceof Array)for(var h=e.length;h>l;l++)o&&(o.index=l),c+=a(e[l],{data:o});else for(var f in e)e.hasOwnProperty(f)&&(o&&(o.key=f),c+=a(e[f],{data:o}),l++);return 0===l&&(c=s(this)),c}),t.registerHelper("if",function(e,r){var o=n.call(e);return o===i&&(e=e.call(this)),!e||t.Utils.isEmpty(e)?r.inverse(this):r.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn})}),t.registerHelper("with",function(e,r){var o=n.call(e);return o===i&&(e=e.call(this)),t.Utils.isEmpty(e)?void 0:r.fn(e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)});var o=["description","fileName","lineNumber","message","name","number","stack"];t.Exception=function(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<o.length;e++)this[o[e]]=t[o[e]]},t.Exception.prototype=new Error,t.SafeString=function(t){this.string=t},t.SafeString.prototype.toString=function(){return this.string.toString()};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/[&<>"'`]/g,l=/[&<>"'`]/,c=function(t){return a[t]||"&amp;"};t.Utils={extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},escapeExpression:function(e){return e instanceof t.SafeString?e.toString():null==e||e===!1?"":(e=e.toString(),l.test(e)?e.replace(s,c):e)},isEmpty:function(t){return t||0===t?"[object Array]"===n.call(t)&&0===t.length?!0:!1:!0}},t.VM={template:function(e){var n={escapeExpression:t.Utils.escapeExpression,invokePartial:t.VM.invokePartial,programs:[],program:function(e,n,i){var r=this.programs[e];return i?r=t.VM.program(e,n,i):r||(r=this.programs[e]=t.VM.program(e,n)),r},merge:function(e,n){var i=e||n;return e&&n&&(i={},t.Utils.extend(i,n),t.Utils.extend(i,e)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=e.call(n,t,i,r.helpers,r.partials,r.data),a=n.compilerInfo||[],s=a[0]||1,l=t.COMPILER_REVISION;if(s!==l){if(l>s){var c=t.REVISION_CHANGES[l],u=t.REVISION_CHANGES[s];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+u+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+")."}return o}},programWithDepth:function(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r},program:function(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,a,s){var l={helpers:o,partials:a,data:s};if(n===e)throw new t.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,l);if(t.compile)return a[i]=t.compile(n,{data:s!==e}),a[i](r,l);throw new t.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},t.template=t.VM.template}(Handlebars),define("Handlebars",function(t){return function(){var e;return e||t.Handlebars}}(this)),define("hbars",{load:function(t){throw new Error("Dynamic load not allowed: "+t)}}),define("hbars!app/navigation/templates/information",["Handlebars"],function(t){return t.template(function(t,e,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{},'<menu class="menu halloween__menu--info">\n	<header class="menu__header">\n		<a class="halloween__menu__pointless" href="http://pointlesscorp.com">\n			Pointless Corp\n		</a>\n	</header>\n\n	<p>\n		Haunted Hills gets its sweet moves from <a\n		href="http://wagerfield.github.io/parallax/"\n		target="_blank">Parallax.JS</a> and is powered by\n		<a href="https://github.com/vigetlabs/doppelganger"\n		target="_blank">Doppelganger</a>, a simple <a\n		href="http://www.webrtc.org/" target="_blank">WebRTC</a> video\n		platform made by a few <a href="https://viget.com"\n		target="_blank">Viget</a> zombies at <a\n		href="https://pointlesscorp.com" target="_blank">Pointless\n		Corp</a>. While it’s fun to look at on almost any device\n		(especially phones and tablets) — use the latest versions of\n		<a href="https://www.google.com/intl/en/chrome/browser/" target="_blank">Chrome</a>\n		or\n		<a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a>\n		to get the full experience.\n	</p>\n\n	<ul class="halloween__menu__credit-list">\n		<li>\n			<a href="https://github.com/vigetlabs/doppelganger" target="_blank"><img src="/images/halloween/logos/doppelganger.jpg"></a>\n		</li>\n		<li>\n			<a href="http://www.webrtc.org/" target="_blank"><img src="/images/halloween/logos/webrtc.jpg"></a>\n 		</li>\n		<li>\n			<a href="http://wagerfield.github.io/parallax/" target="_blank"><img src="/images/halloween/logos/parallaxjs.jpg"></a>\n		</li>\n	</ul>\n</menu>'})}),define("app/navigation/views/information",["hbars!../templates/information"],function(t){return Marionette.ItemView.extend({className:"modal",template:t,events:{click:"handleModalClick"},ui:{menu:".menu"},remove:function(){this.ui.menu.addClass("effect__fade-away"),setTimeout(Marionette.ItemView.prototype.remove.bind(this),700)},handleModalClick:function(t){t.target==this.el&&this.remove()}})}),define("hbars!app/navigation/templates/utility",["Handlebars"],function(t){return t.template(function(t,e,n,i,r){function o(){return'\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--mute">\n				<i class="icon">&#xe602;</i>\n				<i class="visually-hidden">Mute Microphone</i>\n			</a>\n		</li>\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--pause">\n				<i class="icon">&#xe603;</i>\n				<i class="visually-hidden">Pause Video</i>\n			</a>\n		</li>\n		'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var a,s="",l=this,c="function",u=this.escapeExpression;return s+='<nav class="actionbar">\n	<a href="/" class="actionbar__logo">Doppelganger</a>\n	<ul class="actionbar__nav">\n		',a=n["if"].call(e,e.hasWebRTC,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(a||0===a)&&(s+=a),s+='\n		<li>\n			<a href="#" class="actionbar__nav__control actionbar__nav__control--info actionbar__nav__control--social">\n				<i class="icon">&#xe606;</i>\n				<i class="visually-hidden">Info</i>\n			</a>\n		</li>\n		<li>\n			<a href="http://twitter.com/home?status=',(a=n.tweet)?a=a.call(e,{hash:{},data:r}):(a=e.tweet,a=typeof a===c?a.apply(e):a),s+=u(a)+"+",(a=n.url)?a=a.call(e,{hash:{},data:r}):(a=e.url,a=typeof a===c?a.apply(e):a),s+=u(a)+'" target="_blank" class="actionbar__nav__control actionbar__nav__control--social" data-title="Twitter">\n				<i class="icon">&#xe604;</i>\n				<i class="visually-hidden">Share on Twitter</i>\n			</a>\n		</li>\n		<li>\n			<a href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]=',(a=n.url)?a=a.call(e,{hash:{},data:r}):(a=e.url,a=typeof a===c?a.apply(e):a),s+=u(a)+"&p[title]=",(a=n.title)?a=a.call(e,{hash:{},data:r}):(a=e.title,a=typeof a===c?a.apply(e):a),s+=u(a)+"&p[summary]=",(a=n.summary)?a=a.call(e,{hash:{},data:r}):(a=e.summary,a=typeof a===c?a.apply(e):a),s+=u(a)+"&p[images][0]=",(a=n.image)?a=a.call(e,{hash:{},data:r}):(a=e.image,a=typeof a===c?a.apply(e):a),s+=u(a)+'" target="_blank" class="actionbar__nav__control actionbar__nav__control--social" data-title="Facebook">\n				<i class="icon">&#xe605;</i>\n				<i class="visually-hidden">Share on Facebook</i>\n			</a>\n		</li>\n	</ul>\n</nav>'})}),define("app/navigation/views/utility",["app/core","./information","hbars!../templates/utility"],function(t,e,n){return Marionette.ItemView.extend({template:n,events:{"click .actionbar__nav__control--mute":"toggleMute","click .actionbar__nav__control--pause":"togglePause","click .actionbar__nav__control--info":"showInfo","click .actionbar__logo":"visitLobby"},ui:{mute:".actionbar__nav__control--mute",pause:".actionbar__nav__control--pause"},toggleMute:function(e){var n=this.ui.mute.toggleClass("is-active").hasClass("is-active"),i=n?"mute":"unmute";t.execute("connection:"+i),e.preventDefault()},togglePause:function(e){var n=this.ui.pause.toggleClass("is-active").hasClass("is-active"),i=n?"pause":"resume";t.execute("connection:"+i),e.preventDefault()},serializeData:function(){return{hasWebRTC:t.request("connection:supported"),url:window.location,summary:"I’m waiting for you in Haunted Hills — join me for a scary-good time.",title:"Join me in Haunted Hills",image:window.location+"/images/halloween/fb.jpeg",tweet:"Join me in Haunted Hills — it’s a scary-good time."}},showInfo:function(n){t.modal.show(new e),n.preventDefault()},visitLobby:function(e){t.router.navigate("",{trigger:!0}),e.preventDefault()}})}),define("app/navigation/core",["app/core","./views/utility"],function(t,e){var n=t.module("Navigation",function(){this.startWithParent=!1});return n.on("start",function(){t.navigation.show(new e)}),n.on("stop",function(){t.navigation.reset()}),n}),function(t,e,n,i){function r(e,n){this.element=e,this.$context=t(e).data("api",this),this.$layers=this.$context.find(".layer");var i={calibrateX:this.$context.data("calibrate-x")||null,calibrateY:this.$context.data("calibrate-y")||null,invertX:this.$context.data("invert-x")||null,invertY:this.$context.data("invert-y")||null,limitX:parseFloat(this.$context.data("limit-x"))||null,limitY:parseFloat(this.$context.data("limit-y"))||null,scalarX:parseFloat(this.$context.data("scalar-x"))||null,scalarY:parseFloat(this.$context.data("scalar-y"))||null,frictionX:parseFloat(this.$context.data("friction-x"))||null,frictionY:parseFloat(this.$context.data("friction-y"))||null};for(var r in i)null===i[r]&&delete i[r];t.extend(this,s,n,i),this.calibrationTimer=null,this.calibrationFlag=!0,this.enabled=!1,this.depths=[],this.raf=null,this.ox=0,this.oy=0,this.ow=0,this.oh=0,this.cx=0,this.cy=0,this.ix=0,this.iy=0,this.mx=0,this.my=0,this.vx=0,this.vy=0,this.onMouseMove=this.onMouseMove.bind(this),this.onDeviceOrientation=this.onDeviceOrientation.bind(this),this.onOrientationTimer=this.onOrientationTimer.bind(this),this.onCalibrationTimer=this.onCalibrationTimer.bind(this),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.initialise()}var o="parallax",a=30,s={calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:!1,calibrateY:!0,invertX:!0,invertY:!0,limitX:!1,limitY:!1,scalarX:10,scalarY:10,frictionX:.1,frictionY:.1};r.prototype.transformSupport=function(t){for(var r=n.createElement("div"),o=!1,a=null,s=!1,l=null,c=null,u=0,h=this.vendors.length;h>u;u++)if(null!==this.vendors[u]?(l=this.vendors[u][0]+"transform",c=this.vendors[u][1]+"Transform"):(l="transform",c="transform"),r.style[c]!==i){o=!0;break}switch(t){case"2D":s=o;break;case"3D":o&&(n.body.appendChild(r),r.style[c]="translate3d(1px,1px,1px)",a=e.getComputedStyle(r).getPropertyValue(l),s=a!==i&&a.length>0&&"none"!==a,n.body.removeChild(r))}return s},r.prototype.ww=null,r.prototype.wh=null,r.prototype.hw=null,r.prototype.hh=null,r.prototype.portrait=null,r.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i),r.prototype.vendors=[null,["-webkit-","webkit"],["-moz-","Moz"],["-o-","O"],["-ms-","ms"]],r.prototype.motionSupport=!!e.DeviceMotionEvent,r.prototype.orientationSupport=!!e.DeviceOrientationEvent,r.prototype.orientationStatus=0,r.prototype.transform2DSupport=r.prototype.transformSupport("2D"),r.prototype.transform3DSupport=r.prototype.transformSupport("3D"),r.prototype.initialise=function(){"static"===this.$context.css("position")&&this.$context.css({position:"relative"}),this.$layers.css({position:"absolute",display:"block",height:"100%",width:"100%",left:0,top:0}),this.$layers.first().css({position:"relative"}),this.$layers.each(t.proxy(function(e,n){this.depths.push(t(n).data("depth")||0)},this)),this.accelerate(this.$context),this.accelerate(this.$layers),this.updateDimensions(),this.enable(),this.queueCalibration(this.calibrationDelay)},r.prototype.updateDimensions=function(){this.ox=this.$context.offset().left,this.oy=this.$context.offset().top,this.ow=this.$context.width(),this.oh=this.$context.height(),this.ww=e.innerWidth,this.wh=e.innerHeight,this.hw=this.ww/2,this.hh=this.wh/2},r.prototype.queueCalibration=function(t){clearTimeout(this.calibrationTimer),this.calibrationTimer=setTimeout(this.onCalibrationTimer,t)},r.prototype.enable=function(){this.enabled||(this.enabled=!0,this.orientationSupport?(this.portrait=null,e.addEventListener("deviceorientation",this.onDeviceOrientation),setTimeout(this.onOrientationTimer,this.supportDelay)):(this.cx=0,this.cy=0,this.portrait=!1,e.addEventListener("mousemove",this.onMouseMove)),e.addEventListener("resize",this.onWindowResize),this.raf=requestAnimationFrame(this.onAnimationFrame))},r.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.orientationSupport?e.removeEventListener("deviceorientation",this.onDeviceOrientation):e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("resize",this.onWindowResize),cancelAnimationFrame(this.raf))},r.prototype.calibrate=function(t,e){this.calibrateX=t===i?this.calibrateX:t,this.calibrateY=e===i?this.calibrateY:e},r.prototype.invert=function(t,e){this.invertX=t===i?this.invertX:t,this.invertY=e===i?this.invertY:e},r.prototype.friction=function(t,e){this.frictionX=t===i?this.frictionX:t,this.frictionY=e===i?this.frictionY:e},r.prototype.scalar=function(t,e){this.scalarX=t===i?this.scalarX:t,this.scalarY=e===i?this.scalarY:e},r.prototype.limit=function(t,e){this.limitX=t===i?this.limitX:t,this.limitY=e===i?this.limitY:e},r.prototype.clamp=function(t,e,n){return t=Math.max(t,e),t=Math.min(t,n)},r.prototype.css=function(e,n,r){for(var o=null,a=0,s=this.vendors.length;s>a;a++)if(o=null!==this.vendors[a]?t.camelCase(this.vendors[a][1]+"-"+n):n,e.style[o]!==i){e.style[o]=r;break}},r.prototype.accelerate=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];this.css(i,"transform","translate3d(0,0,0)"),this.css(i,"transform-style","preserve-3d"),this.css(i,"backface-visibility","hidden")}},r.prototype.setPosition=function(t,e,n){e+="%",n+="%",this.transform3DSupport?this.css(t,"transform","translate3d("+e+","+n+",0)"):this.transform2DSupport?this.css(t,"transform","translate("+e+","+n+")"):(t.style.left=e,t.style.top=n)},r.prototype.onOrientationTimer=function(){this.orientationSupport&&0===this.orientationStatus&&(this.disable(),this.orientationSupport=!1,this.enable())},r.prototype.onCalibrationTimer=function(){this.calibrationFlag=!0},r.prototype.onWindowResize=function(){this.updateDimensions()},r.prototype.onAnimationFrame=function(){var t=this.ix-this.cx,e=this.iy-this.cy;(Math.abs(t)>this.calibrationThreshold||Math.abs(e)>this.calibrationThreshold)&&this.queueCalibration(0),this.portrait?(this.mx=(this.calibrateX?e:this.iy)*this.scalarX,this.my=(this.calibrateY?t:this.ix)*this.scalarY):(this.mx=(this.calibrateX?t:this.ix)*this.scalarX,this.my=(this.calibrateY?e:this.iy)*this.scalarY),isNaN(parseFloat(this.limitX))||(this.mx=this.clamp(this.mx,-this.limitX,this.limitX)),isNaN(parseFloat(this.limitY))||(this.my=this.clamp(this.my,-this.limitY,this.limitY)),this.vx+=(this.mx-this.vx)*this.frictionX,this.vy+=(this.my-this.vy)*this.frictionY;for(var n=0,i=this.$layers.length;i>n;n++){var r=this.depths[n],o=this.$layers[n],a=this.vx*r*(this.invertX?-1:1),s=this.vy*r*(this.invertY?-1:1);this.setPosition(o,a,s)}this.raf=requestAnimationFrame(this.onAnimationFrame)},r.prototype.onDeviceOrientation=function(t){if(!this.desktop&&null!==t.beta&&null!==t.gamma){this.orientationStatus=1;var n=(t.beta||0)/a,i=(t.gamma||0)/a,r=e.innerHeight>e.innerWidth;this.portrait!==r&&(this.portrait=r,this.calibrationFlag=!0),this.calibrationFlag&&(this.calibrationFlag=!1,this.cx=n,this.cy=i),this.ix=n,this.iy=i}},r.prototype.onMouseMove=function(t){this.ix=(t.pageX-this.hw)/this.hw,this.iy=(t.pageY-this.hh)/this.hh};var l={enable:r.prototype.enable,disable:r.prototype.disable,calibrate:r.prototype.calibrate,friction:r.prototype.friction,invert:r.prototype.invert,scalar:r.prototype.scalar,limit:r.prototype.limit};t.fn[o]=function(e){var n=arguments;return this.each(function(){var i=t(this),a=i.data(o);a||(a=new r(this,e),i.data(o,a)),l[e]&&a[e].apply(a,Array.prototype.slice.call(n,1))})}}(window.jQuery||window.Zepto,window,document),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;e.length>n&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=window.setTimeout(function(){e(n+i)},i);return t=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),define("vendor/jquery.parallax",function(){}),define("app/halloween/views/scene",["vendor/jquery.parallax"],function(){return Marionette.ItemView.extend({className:"scene halloween__scene",tagName:"ul",ui:{layers:".layer",masks:".mask",canvases:"canvas"},initialize:function(){$(window).on("resize.scene",this.resize.bind(this)),this.bindUIElements(),this.resize(),this.$el.parallax()},resize:_.throttle(function(){var t=window.innerHeight-$("#region--footer").height();this.$el.width(window.innerWidth),this.$el.height(t)},100),play:function(){this.videoLoop()},pause:function(){this.cancel()},serializeMask:function(t,e,n,i){var r=t.toJSON(),o=r.videoEl,a=e/o.videoWidth,s=n/o.videoHeight,l=r.scale=Math.max(a,s)*i,c=r.height=o.videoHeight*l,u=r.width=o.videoWidth*l;return r.x=.5*(u-e),r.y=.5*(c-n),r},draw:function(){this.collection.each(function(t,e){var n=this.ui.canvases.get(e),i=this.ui.masks.get(e),r=n.getContext("2d"),o=parseFloat(i.getAttribute("data-zoom"),10),a=this.serializeMask(t,i.width,i.height,o);r.clearRect(0,0,n.width,n.height),r.save(),r.drawImage(a.videoEl,-a.x,-a.y,a.width,a.height),r.fillStyle=i.getAttribute("data-hue"),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-in",r.drawImage(i,0,0),r.restore()},this)},cancel:function(){cancelAnimationFrame(this.frame)},videoLoop:function(){this.cancel();var t=Date.now();this.frame=requestAnimationFrame(function e(){var n=Date.now()-t>1e3/30;this.frame=requestAnimationFrame(e.bind(this)),n&&(t=Date.now(),this.draw())}.bind(this))}})}),define("app/halloween/core",["app/core","app/connection/core","./views/scene"],function(t,e,n){var i=t.module("Halloween",function(){this.startWithParent=!1}),r=new n({el:".halloween__scene",collection:t.request("connection:streams")});return i.on("start",function(){r.play()}),i.on("stop",function(){r.pause()}),i}),define("hbars!app/gatekeeper/templates/lobby",["Handlebars"],function(t){return t.template(function(t,e,n,i,r){function o(t,e){var i,r="";return r+='\n		<div class="menu__backface">\n			<div class="halloween__menu__header">\n				<h3>Welcome to Haunted Hills</h3>\n				<p>\n					A fun Halloween experiment using <a\n    					href="http://www.webrtc.org/"\n						target="_blank">WebRTC</a> Video and\n					<a href="http://wagerfield.github.io/parallax/"\n						target="_blank">Parallax.JS</a>.\n					Fire up your webcam, share with your friends, and\n					have a scary-good time.\n				</p>\n			</div>\n\n			<ol class="halloween__menu__instructions">\n				<li>\n					<img src="/images/stare.png" height="107" width="106">\n					<h3>Stare</h3>\n					<p>at your webcam</p>\n				</li>\n				<li>\n					<img src="/images/share.png" height="107" width="106">\n					<h3>Share</h3>\n					<p>with your friends</p>\n				</li>\n				<li>\n					<img src="/images/scare.png" height="107" width="106">\n					<h3>Scare</h3>\n					<p>the snot out of them</p>\n				</li>\n			</ol>\n\n			<form class="form--lobby">\n				<input type="hidden" name="room_name" value="',(i=n.uuid)?i=i.call(t,{hash:{},data:e}):(i=t.uuid,i=typeof i===c?i.apply(t):i),r+=u(i)+'">\n				<div class="field field--horizontal">\n					<label>Session URL:</label>\n					<input disabled type="text" class="input--text" value="',(i=n.location)?i=i.call(t,{hash:{},data:e}):(i=t.location,i=typeof i===c?i.apply(t):i),r+=u(i)+"/",(i=n.uuid)?i=i.call(t,{hash:{},data:e}):(i=t.uuid,i=typeof i===c?i.apply(t):i),r+=u(i)+'">\n					<button class="btn" type="submit">Visit Haunted Hills</button>\n				</div>\n			</form>\n\n			<small class="menu__legal">\n				*To get the full Haunted Hills experience, have a webcam and use a browser that supports WebRTC.\n			</small>\n		</div>\n	'}function a(){return'\n    	<div class="menu__backface is-error">\n			<div class="halloween__menu__header">\n				<h2>BOO!*</h2>\n				<p>\n					Your browser isn’t welcome in Haunted\n					Hills. Although it’s still fun to look at — you\n					really should download\n					<a href="https://www.google.com/intl/en/chrome/browser/" target="_blank">Chrome</a>\n					or\n					<a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a>\n					to get the full experience.\n				</p>\n				<br>\n				<button class="btn js--skip">Take me there anyway</button>\n				<small class="halloween__menu__caveat">* disappointed "Boo" not intimidating scary "Boo"</small>\n			</div>\n		</div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),r=r||{};var s,l="",c="function",u=this.escapeExpression,h=this;return l+='<menu class="menu">\n\n	<div class="menu__frontface">\n		<img src="/images/postcard.jpg">\n	</div>\n\n	',s=n["if"].call(e,e.hasWebRTC,{hash:{},inverse:h.program(3,a,r),fn:h.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+="\n	</div>\n</menu>"})}),define("app/gatekeeper/lib/uuid",[],function(){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");Math.uuid=function(e,n){var i,r=t,o=[];if(n=n||r.length,e)for(i=0;e>i;i++)o[i]=r[0|Math.random()*n];else{var a;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",i=0;36>i;i++)o[i]||(a=0|16*Math.random(),o[i]=r[19==i?8|3&a:a])}return o.join("")},Math.uuidFast=function(){for(var e,n=t,i=new Array(36),r=0,o=0;36>o;o++)8==o||13==o||18==o||23==o?i[o]="-":14==o?i[o]="4":(2>=r&&(r=0|33554432+16777216*Math.random()),e=15&r,r>>=4,i[o]=n[19==o?8|3&e:e]);return i.join("")},Math.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)})}}),define("app/gatekeeper/views/Lobby",["app/core","hbars!../templates/lobby","app/gatekeeper/lib/uuid"],function(t,e){return Marionette.ItemView.extend({className:"modal",template:e,events:{"submit form":"joinRoom","click .js--skip":"close"},ui:{menu:".menu",form:".form--lobby"},serializeData:function(){return{hasWebRTC:t.request("connection:supported"),location:window.location.protocol+"//"+window.location.host,uuid:Math.uuid(8)}},onDomRefresh:function(){_.delay(function(){this.ui.menu.addClass("is-flipped")}.bind(this),2e3)},joinRoom:function(e){var n=this.ui.form[0].room_name.value;t.router.navigate(n,{trigger:!0}),e.preventDefault()},close:function(){this.$el.addClass("effect__fade-away"),_.delay(Marionette.ItemView.prototype.close.bind(this),500)}})}),define("app/gatekeeper/core",["app/core","./views/Lobby"],function(t,e){var n=t.module("Gatekeeper",function(){this.startWithParent=!1,t.request("connection:supported")||t.modal.show(new e)});return n.on("start",function(){t.modal.show(new e)}),n.on("stop",function(){t.modal.reset()}),n}),require(["app/core","app/connection/core","app/navigation/core","app/halloween/core","app/gatekeeper/core"],function(t){t.start()}),define("setup",["hex","marionette"],function(t){return function(){var e;return e||t.Doppelganger}}(this)),require(["setup"]);